{"ast":null,"code":"import _objectSpread from\"D:/previous/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"D:/previous/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/previous/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\previous\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useEffect,useCallback}from'react';import'./style.scss';import Icon from'react-icons-kit';import{toast}from'react-toastify';import{useForm}from'react-hook-form';import'react-toastify/dist/ReactToastify.css';import{Link,useParams}from'react-router-dom';import{chevronLeft,plus}from'react-icons-kit/feather';import{PreLoader}from'../../components/loading/Index';import Requests from'../../utils/Requests/Index';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Edit=function Edit(){var _useParams=useParams(),id=_useParams.id;var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.errors;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),update=_useState6[0],setUpdate=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),brand=_useState8[0],setBrand=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),selectedFile=_useState10[0],setSelectedFile=_useState10[1];var _useState11=useState({headers:{Authorization:\"Bearer \"+localStorage.getItem('token')}}),_useState12=_slicedToArray(_useState11,1),header=_useState12[0];// Fetch data\nvar fetchData=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Requests.Brand.Show(id,header);case 2:data=_context.sent;if(data){setBrand(data.brand);setLoading(false);}setLoading(false);case 5:case\"end\":return _context.stop();}}},_callee);})),[id,header]);useEffect(function(){fetchData();},[id,header,fetchData]);// Handle image\nvar handleImage=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var file,size,formData,response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:file=event.target.files[0];if(!file){_context2.next=14;break;}size=parseInt(file.size)/1000;if(!(size>100)){_context2.next=6;break;}setError(_objectSpread(_objectSpread({},error),{},{image:'Select less than 100KB file.'}));return _context2.abrupt(\"return\");case 6:setSelectedFile({image:file,preview:URL.createObjectURL(file)});formData=new FormData();formData.append('image',file);setBrand(_objectSpread(_objectSpread({},brand),{},{image:null}));_context2.next=12;return Requests.Brand.UpdateImage(id,formData,header);case 12:response=_context2.sent;if(response.status===true){toast.success(response.message);}case 14:case\"end\":return _context2.stop();}}},_callee2);}));return function handleImage(_x){return _ref2.apply(this,arguments);};}();// Submit Form\nvar onSubmit=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(data){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setUpdate(true);_context3.next=3;return Requests.Brand.Update(id,data,header);case 3:return _context3.abrupt(\"return\",setUpdate(false));case 4:case\"end\":return _context3.stop();}}},_callee3);}));return function onSubmit(_x2){return _ref3.apply(this,arguments);};}();if(isLoading)return/*#__PURE__*/_jsx(PreLoader,{});return/*#__PURE__*/_jsx(\"div\",{className:\"store-brand pb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-padding\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card border-0 shadow-sm\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header p-3 p-lg-4 bg-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h6\",{className:\"mb-0\",children:\"Edit Brand\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-auto\",children:/*#__PURE__*/_jsx(Link,{to:\"/dashboard/brand\",type:\"button\",className:\"btn shadow-none rounded-circle\",children:/*#__PURE__*/_jsx(Icon,{icon:chevronLeft,size:22})})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body p-4\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[errors.name&&errors.name.message?/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:errors.name&&errors.name.message}):/*#__PURE__*/_jsx(\"p\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",defaultValue:brand?brand.name:null,className:\"form-control shadow-none\",placeholder:\"Enter brand name\",ref:register({required:\"Name is required\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[error&&error.image?/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:error.image}):/*#__PURE__*/_jsx(\"p\",{children:\"Logo/Image (100x100)\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[brand&&brand.image?/*#__PURE__*/_jsx(\"div\",{className:\"img-container text-center mr-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"image border\",children:/*#__PURE__*/_jsx(\"img\",{src:brand.image,className:\"img-fluid\",alt:\"...\"})})}):selectedFile?/*#__PURE__*/_jsx(\"div\",{className:\"img-container text-center mr-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"image border\",children:/*#__PURE__*/_jsx(\"img\",{src:selectedFile.preview,className:\"img-fluid\",alt:\"...\"})})}):null,/*#__PURE__*/_jsx(\"div\",{className:\"img-container text-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"image border\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",className:\"upload\",onChange:handleImage}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-center flex-column\",children:/*#__PURE__*/_jsx(Icon,{icon:plus,size:22})})]})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-right\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn shadow-none\",disabled:update,children:update?'Updating...':'Update'})})]})})]})})})})});};export default Edit;","map":{"version":3,"sources":["D:/previous/src/pages/brand/Edit.js"],"names":["React","useState","useEffect","useCallback","Icon","toast","useForm","Link","useParams","chevronLeft","plus","PreLoader","Requests","Edit","id","register","handleSubmit","errors","error","setError","isLoading","setLoading","update","setUpdate","brand","setBrand","selectedFile","setSelectedFile","headers","Authorization","localStorage","getItem","header","fetchData","Brand","Show","data","handleImage","event","file","target","files","size","parseInt","image","preview","URL","createObjectURL","formData","FormData","append","UpdateImage","response","status","success","message","onSubmit","Update","name","required"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback } from 'react'\nimport './style.scss'\nimport Icon from 'react-icons-kit'\nimport { toast } from 'react-toastify'\nimport { useForm } from 'react-hook-form'\nimport 'react-toastify/dist/ReactToastify.css'\nimport { Link, useParams } from 'react-router-dom'\nimport { chevronLeft, plus } from 'react-icons-kit/feather'\nimport { PreLoader } from '../../components/loading/Index'\nimport Requests from '../../utils/Requests/Index'\n\nconst Edit = () => {\n    const { id } = useParams()\n    const { register, handleSubmit, errors } = useForm()\n    const [error, setError] = useState(null)\n    const [isLoading, setLoading] = useState(true)\n    const [update, setUpdate] = useState(false)\n    const [brand, setBrand] = useState(null)\n    const [selectedFile, setSelectedFile] = useState(null)\n    const [header] = useState({\n        headers: { Authorization: \"Bearer \" + localStorage.getItem('token') }\n    })\n\n    // Fetch data\n    const fetchData = useCallback(async () => {\n        const data = await Requests.Brand.Show(id, header)\n        if (data) {\n            setBrand(data.brand)\n            setLoading(false)\n        }\n        setLoading(false)\n    }, [id, header])\n\n\n    useEffect(() => {\n        fetchData()\n    }, [id, header, fetchData])\n\n\n    // Handle image\n    const handleImage = async (event) => {\n        const file = event.target.files[0]\n        if (file) {\n            const size = parseInt(file.size) / 1000\n            if (size > 100) {\n                setError({ ...error, image: 'Select less than 100KB file.' })\n                return\n            }\n            setSelectedFile({ image: file, preview: URL.createObjectURL(file) })\n            let formData = new FormData()\n            formData.append('image', file)\n            setBrand({ ...brand, image: null })\n            const response = await Requests.Brand.UpdateImage(id, formData, header)\n\n            if (response.status === true) {\n                toast.success(response.message)\n            }\n        }\n    }\n\n\n    // Submit Form\n    const onSubmit = async (data) => {\n        setUpdate(true)\n        await Requests.Brand.Update(id, data, header)\n        return setUpdate(false)\n    }\n\n    if (isLoading) return <PreLoader />\n\n    return (\n        <div className=\"store-brand pb-4\">\n\n            <div className=\"container-fluid\">\n                <div className=\"row\">\n                    <div className=\"col-12 col-padding\">\n                        <div className=\"card border-0 shadow-sm\">\n                            <div className=\"card-header p-3 p-lg-4 bg-white\">\n                                <div className=\"d-flex\">\n                                    <div><h6 className=\"mb-0\">Edit Brand</h6></div>\n                                    <div className=\"ml-auto\">\n                                        <Link\n                                            to=\"/dashboard/brand\"\n                                            type=\"button\"\n                                            className=\"btn shadow-none rounded-circle\"\n                                        >\n                                            <Icon icon={chevronLeft} size={22} />\n                                        </Link>\n                                    </div>\n                                </div>\n                            </div>\n                            <div className=\"card-body p-4\">\n                                <form onSubmit={handleSubmit(onSubmit)}>\n\n                                    {/* Name */}\n                                    <div className=\"form-group mb-4\">\n                                        {errors.name && errors.name.message ? (\n                                            <p className=\"text-danger\">{errors.name && errors.name.message}</p>\n                                        ) : <p>Name</p>}\n\n                                        <input\n                                            type=\"text\"\n                                            name=\"name\"\n                                            defaultValue={brand ? brand.name : null}\n                                            className=\"form-control shadow-none\"\n                                            placeholder=\"Enter brand name\"\n                                            ref={register({\n                                                required: \"Name is required\"\n                                            })}\n                                        />\n                                    </div>\n\n                                    {/* Image upload Container */}\n                                    <div className=\"form-group mb-4\">\n                                        {error && error.image ? <p className=\"text-danger\">{error.image}</p> : <p>Logo/Image (100x100)</p>}\n                                        <div className=\"d-flex\">\n                                            {brand && brand.image ?\n                                                <div className=\"img-container text-center mr-2\">\n                                                    <div className=\"image border\">\n                                                        <img src={brand.image} className=\"img-fluid\" alt=\"...\" />\n                                                    </div>\n                                                </div>\n                                                : selectedFile ?\n                                                    <div className=\"img-container text-center mr-2\">\n                                                        <div className=\"image border\">\n                                                            <img src={selectedFile.preview} className=\"img-fluid\" alt=\"...\" />\n                                                        </div>\n                                                    </div>\n                                                    : null}\n\n                                            <div className=\"img-container text-center\">\n                                                <div className=\"image border\">\n                                                    <input type=\"file\" className=\"upload\" onChange={handleImage} />\n                                                    <div className=\"flex-center flex-column\">\n                                                        <Icon icon={plus} size={22} />\n                                                    </div>\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                    <div className=\"text-right\">\n                                        <button type=\"submit\" className=\"btn shadow-none\" disabled={update}>\n                                            {update ? 'Updating...' : 'Update'}\n                                        </button>\n                                    </div>\n\n                                </form>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default Edit;\n"]},"metadata":{},"sourceType":"module"}