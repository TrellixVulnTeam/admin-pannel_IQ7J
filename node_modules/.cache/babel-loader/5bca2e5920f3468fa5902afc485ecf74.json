{"ast":null,"code":"import _objectSpread from\"D:/previous/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"D:/previous/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/previous/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\previous\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useCallback,useEffect,useState}from'react';import Icon from'react-icons-kit';import{trash2,checkCircle,alertTriangle,x}from'react-icons-kit/feather';import{CustomButton}from'../../components/button';import{DataTable}from'../../components/table/Index';import{DeleteModal}from'../../components/modal/Delete';import{Container}from'../../components/container';import{Card}from'../../components/card/Index';import{SearchableSelect,SingleSelect}from'../../components/select';import Requests from'../../utils/Requests/Index';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Index=function Index(){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(10),_useState4=_slicedToArray(_useState3,2),limit=_useState4[0],setLimit=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),totalItems=_useState6[0],setTotalItems=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),data=_useState8[0],setData=_useState8[1];// const [isUpdate, setUpdate] = useState(null)\nvar _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),closeFilter=_useState10[0],setCloseFilter=_useState10[1];var _useState11=useState({value:null,show:false,loading:false}),_useState12=_slicedToArray(_useState11,2),isDelete=_useState12[0],setDelete=_useState12[1];var _useState13=useState({headers:{Authorization:\"Bearer \"+localStorage.getItem('token')}}),_useState14=_slicedToArray(_useState13,1),header=_useState14[0];// Fetch data\nvar fetchData=useCallback(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(page){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);_context.next=3;return Requests.RatingReview.Index(page,limit,header);case 3:response=_context.sent;if(response){setData(response.data);setTotalItems(response.pagination?response.pagination.items:0);}setLoading(false);case 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}(),[limit,header]);// handle page change\nvar handlePageChange=function handlePageChange(page){return fetchData(page);};// handle limit change\nvar handleLimitChange=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(newLimit,page){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setLoading(true);_context2.next=3;return Requests.RatingReview.Index(page,newLimit,header);case 3:response=_context2.sent;setData(response.data);setLimit(newLimit);setLoading(false);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function handleLimitChange(_x2,_x3){return _ref2.apply(this,arguments);};}();useEffect(function(){fetchData(1);},[header,fetchData]);// handle update\n// const handleUpdate = async (id, status) => {\n//     setUpdate(id)\n//     await Requests.RatingReview.Update(id, status, header)\n//     fetchData(1)\n//     setUpdate(null)\n// }\n// Handle delete\nvar handleDelete=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setDelete(_objectSpread(_objectSpread({},isDelete),{},{loading:true}));_context3.next=3;return Requests.RatingReview.Delete(isDelete.value._id,header);case 3:fetchData();setDelete(_objectSpread(_objectSpread({},isDelete),{},{show:false,loading:false}));case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function handleDelete(){return _ref3.apply(this,arguments);};}();// Handle search item\nvar handleSearchItem=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(_ref4){var inputValue,field,response;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:inputValue=_ref4.inputValue,field=_ref4.field;if(!field)response={data:[]};if(!(field===\"customer\")){_context4.next=6;break;}_context4.next=5;return Requests.Options.Customer(inputValue,header);case 5:response=_context4.sent;case 6:if(!(field===\"product\")){_context4.next=10;break;}_context4.next=9;return Requests.Options.Product(inputValue,header);case 9:response=_context4.sent;case 10:if(!(response.data&&response.data.length)){_context4.next=12;break;}return _context4.abrupt(\"return\",response.data);case 12:return _context4.abrupt(\"return\",[]);case 13:case\"end\":return _context4.stop();}}},_callee4);}));return function handleSearchItem(_x4){return _ref5.apply(this,arguments);};}();// Handle filter\nvar handleFilter=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(value,field){var response;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:setLoading(true);_context5.next=3;return Requests.RatingReview.FilterItems(value,field,header);case 3:response=_context5.sent;if(response)setData(response.data);setLoading(false);case 6:case\"end\":return _context5.stop();}}},_callee5);}));return function handleFilter(_x5,_x6){return _ref6.apply(this,arguments);};}();var columns=[{name:'Customer',width:\"200px\",selector:function selector(row){return row.user;},sortable:true},{name:'',grow:0,cell:function cell(row){return/*#__PURE__*/_jsx(\"img\",{height:40,width:50,alt:\"Product\",src:row.product.thumbnail});}},{name:'Product',grow:0,selector:function selector(row){return row.product.name;},sortable:true},{name:'Rating',grow:0,selector:function selector(row){return row.rating;},sortable:true},{name:'Type',grow:0,sortable:true,cell:function cell(row){return row.type===\"Unverified\"?/*#__PURE__*/_jsx(\"span\",{className:\"text-danger\",children:row.type}):/*#__PURE__*/_jsx(\"span\",{className:\"text-success\",children:row.type});}},{name:'Review',grow:1,selector:function selector(row){return row.review;},sortable:true},{name:'Status',grow:0,cell:function cell(row){return row.status===\"Pending\"?/*#__PURE__*/_jsx(Icon,{icon:alertTriangle,className:\"text-danger\",children:row.status}):/*#__PURE__*/_jsx(Icon,{icon:checkCircle,className:\"text-success\",children:row.status});}},{name:'Action',grow:0,minWidth:'80px',cell:function cell(row){return/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(CustomButton,{style:{padding:\"6px 10px\"},className:\"btn-danger rounded-circle border-0\",onClick:function onClick(){return setDelete({value:row,show:true});},children:/*#__PURE__*/_jsx(Icon,{icon:trash2,size:16})})});}}];return/*#__PURE__*/_jsxs(\"div\",{className:\"pb-4\",children:[/*#__PURE__*/_jsx(Container.Fluid,{children:/*#__PURE__*/_jsx(Container.Row,{children:/*#__PURE__*/_jsx(Container.Column,{className:\"col-padding\",children:/*#__PURE__*/_jsxs(Card.Simple,{className:\"border-0\",children:[/*#__PURE__*/_jsxs(Card.Header,{className:\"bg-white border-0 p-3 p-lg-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex mb-3\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h6\",{className:\"mb-0\",children:\"Ratings & Reviews\"})}),closeFilter?/*#__PURE__*/_jsx(\"div\",{className:\"ml-auto\",children:/*#__PURE__*/_jsx(CustomButton,{className:\"btn-danger border-0 rounded-circle circle__padding ml-1\",onClick:function onClick(){fetchData(1);setCloseFilter(false);},children:/*#__PURE__*/_jsx(Icon,{icon:x,size:22})})}):null]}),/*#__PURE__*/_jsxs(Container.Row,{className:\"px-2\",children:[/*#__PURE__*/_jsx(Container.Column,{className:\"col-sm-6 col-md-4 px-1 mb-2\",children:/*#__PURE__*/_jsx(SingleSelect,{placeholder:\"rating\",borderRadius:25,options:[{label:5,value:5},{label:4,value:4},{label:3,value:3},{label:2,value:2},{label:1,value:1}],value:function value(event){return handleFilter(event.value,\"rating\");}})}),/*#__PURE__*/_jsx(Container.Column,{className:\"col-sm-6 col-md-4 px-1 mb-2\",children:/*#__PURE__*/_jsx(SingleSelect,{placeholder:\"type\",borderRadius:25,options:[{label:\"Verified\",value:\"Verified\"},{label:\"Unverified\",value:\"Unverified\"}],value:function value(event){return handleFilter(event.value,\"type\");}})}),/*#__PURE__*/_jsx(Container.Column,{className:\"col-sm-6 col-md-4 px-1 mb-2\",children:/*#__PURE__*/_jsx(SingleSelect,{placeholder:\"status\",borderRadius:25,options:[{label:\"Pending\",value:\"Pending\"},{label:\"Approved\",value:\"Approved\"}],value:function value(event){return handleFilter(event.value,\"status\");}})}),/*#__PURE__*/_jsx(Container.Column,{className:\"col-sm-6 px-1 mb-2\",children:/*#__PURE__*/_jsx(SearchableSelect,{placeholder:\"Type customer ...\",borderRadius:25,search:function search(inputValue){return handleSearchItem({inputValue:inputValue,field:\"customer\"});},values:function values(data){return handleFilter(data.value,\"customer\");}})}),/*#__PURE__*/_jsx(Container.Column,{className:\"col-sm-6 px-1 mb-2\",children:/*#__PURE__*/_jsx(SearchableSelect,{placeholder:\"Type product ...\",borderRadius:25,search:function search(inputValue){return handleSearchItem({inputValue:inputValue,field:\"product\"});},values:function values(data){return handleFilter(data.value,\"product\");}})})]})]}),/*#__PURE__*/_jsx(Card.Body,{className:\"p-0\",children:/*#__PURE__*/_jsx(DataTable,{fixedHeader:true,fixedHeaderScrollHeight:\"580px\",columns:columns,data:data,loading:isLoading,totalRows:totalItems,pagination:true,paginationServer:true,handlePerRowsChange:handleLimitChange,handlePageChange:handlePageChange})})]})})})}),/*#__PURE__*/_jsx(DeleteModal,{show:isDelete.show,loading:isDelete.loading,message:/*#__PURE__*/_jsx(\"h6\",{children:\"Want to delete this Review ?\"}),onHide:function onHide(){return setDelete({value:null,show:false,loading:false});},doDelete:handleDelete})]});};export default Index;","map":{"version":3,"sources":["D:/previous/src/pages/ratingsReviews/Index.js"],"names":["React","useCallback","useEffect","useState","Icon","trash2","checkCircle","alertTriangle","x","CustomButton","DataTable","DeleteModal","Container","Card","SearchableSelect","SingleSelect","Requests","Index","isLoading","setLoading","limit","setLimit","totalItems","setTotalItems","data","setData","closeFilter","setCloseFilter","value","show","loading","isDelete","setDelete","headers","Authorization","localStorage","getItem","header","fetchData","page","RatingReview","response","pagination","items","handlePageChange","handleLimitChange","newLimit","handleDelete","Delete","_id","handleSearchItem","inputValue","field","Options","Customer","Product","length","handleFilter","FilterItems","columns","name","width","selector","row","user","sortable","grow","cell","product","thumbnail","rating","type","review","status","minWidth","padding","label","event"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useState } from 'react'\nimport Icon from 'react-icons-kit'\nimport {\n    trash2,\n    checkCircle,\n    alertTriangle,\n    x\n} from 'react-icons-kit/feather'\n\nimport { CustomButton } from '../../components/button'\nimport { DataTable } from '../../components/table/Index'\nimport { DeleteModal } from '../../components/modal/Delete'\nimport { Container } from '../../components/container'\nimport { Card } from '../../components/card/Index'\nimport { SearchableSelect, SingleSelect } from '../../components/select'\n\nimport Requests from '../../utils/Requests/Index'\n\n\nconst Index = () => {\n    const [isLoading, setLoading] = useState(true)\n    const [limit, setLimit] = useState(10)\n    const [totalItems, setTotalItems] = useState(0)\n\n    const [data, setData] = useState([])\n    // const [isUpdate, setUpdate] = useState(null)\n    const [closeFilter, setCloseFilter] = useState(false)\n    const [isDelete, setDelete] = useState({ value: null, show: false, loading: false })\n    const [header] = useState({\n        headers: { Authorization: \"Bearer \" + localStorage.getItem('token') }\n    })\n\n    // Fetch data\n    const fetchData = useCallback(async (page) => {\n        setLoading(true)\n        const response = await Requests.RatingReview.Index(page, limit, header)\n\n        if (response) {\n            setData(response.data)\n            setTotalItems(response.pagination ? response.pagination.items : 0)\n        }\n\n        setLoading(false)\n    }, [limit, header])\n\n    // handle page change\n    const handlePageChange = page => fetchData(page)\n\n    // handle limit change\n    const handleLimitChange = async (newLimit, page) => {\n        setLoading(true)\n        const response = await Requests.RatingReview.Index(page, newLimit, header)\n\n        setData(response.data)\n        setLimit(newLimit)\n        setLoading(false)\n    }\n\n    useEffect(() => {\n        fetchData(1)\n    }, [header, fetchData])\n\n    // handle update\n    // const handleUpdate = async (id, status) => {\n    //     setUpdate(id)\n    //     await Requests.RatingReview.Update(id, status, header)\n    //     fetchData(1)\n    //     setUpdate(null)\n    // }\n\n    // Handle delete\n    const handleDelete = async () => {\n        setDelete({ ...isDelete, loading: true })\n\n        await Requests.RatingReview.Delete(isDelete.value._id, header)\n        fetchData()\n        setDelete({ ...isDelete, show: false, loading: false })\n    }\n\n    // Handle search item\n    const handleSearchItem = async ({ inputValue, field }) => {\n        let response\n\n        if (!field) response = { data: [] }\n\n        if (field === \"customer\") {\n            response = await Requests.Options.Customer(inputValue, header)\n        }\n\n        if (field === \"product\") {\n            response = await Requests.Options.Product(inputValue, header)\n        }\n\n        if (response.data && response.data.length) return response.data\n        return []\n    }\n\n    // Handle filter\n    const handleFilter = async (value, field) => {\n        setLoading(true)\n        const response = await Requests.RatingReview.FilterItems(value, field, header)\n        if (response) setData(response.data)\n        setLoading(false)\n    }\n\n    const columns = [\n        {\n            name: 'Customer',\n            width: \"200px\",\n            selector: row => row.user,\n            sortable: true\n        },\n        {\n            name: '',\n            grow: 0,\n            cell: row => <img height={40} width={50} alt={\"Product\"} src={row.product.thumbnail} />\n        },\n        {\n            name: 'Product',\n            grow: 0,\n            selector: row => row.product.name,\n            sortable: true\n        },\n        {\n            name: 'Rating',\n            grow: 0,\n            selector: row => row.rating,\n            sortable: true\n        },\n        {\n            name: 'Type',\n            grow: 0,\n            sortable: true,\n            cell: row =>\n                row.type === \"Unverified\" ?\n                    <span className=\"text-danger\">{row.type}</span>\n                    : <span className=\"text-success\">{row.type}</span>\n        },\n        {\n            name: 'Review',\n            grow: 1,\n            selector: row => row.review,\n            sortable: true\n        },\n        {\n            name: 'Status',\n            grow: 0,\n            cell: row =>\n                row.status === \"Pending\" ?\n                    <Icon icon={alertTriangle} className=\"text-danger\">{row.status}</Icon>\n                    : <Icon icon={checkCircle} className=\"text-success\">{row.status}</Icon>\n        },\n        {\n            name: 'Action',\n            grow: 0,\n            minWidth: '80px',\n            cell: row =>\n                <div>\n                    {/* {row.status === 'Pending' ?\n                        <CustomButton\n                            style={{ padding: \"6px 10px\", fontSize: 14, fontWeight: 600 }}\n                            className=\"btn-success rounded border-0 mr-2\"\n                            onClick={() => handleUpdate(row._id, 'Approved')}\n                            disabled={isUpdate && isUpdate === row._id}\n                        >{isUpdate && isUpdate === row._id ? 'Loading...' : 'Approve'}</CustomButton>\n                        :\n                        <CustomButton\n                            style={{ padding: \"6px 10px\", fontSize: 14, fontWeight: 600 }}\n                            className=\"btn-danger rounded border-0 mr-2\"\n                            onClick={() => handleUpdate(row._id, 'Pending')}\n                            disabled={isUpdate && isUpdate === row._id}\n                        >{isUpdate && isUpdate === row._id ? 'Loading...' : 'Remove'}</CustomButton>\n                    } */}\n\n                    <CustomButton\n                        style={{ padding: \"6px 10px\" }}\n                        className=\"btn-danger rounded-circle border-0\"\n                        onClick={() => setDelete({ value: row, show: true })}\n                    ><Icon icon={trash2} size={16} />\n                    </CustomButton>\n                </div>\n        }\n    ]\n\n    return (\n        <div className=\"pb-4\">\n            <Container.Fluid>\n                <Container.Row>\n                    <Container.Column className=\"col-padding\">\n                        <Card.Simple className=\"border-0\">\n                            <Card.Header className=\"bg-white border-0 p-3 p-lg-4\">\n\n                                {/* title container */}\n                                <div className=\"d-flex mb-3\">\n                                    <div><h6 className=\"mb-0\">Ratings & Reviews</h6></div>\n                                    {closeFilter ?\n                                        <div className=\"ml-auto\">\n\n                                            <CustomButton\n                                                className=\"btn-danger border-0 rounded-circle circle__padding ml-1\"\n                                                onClick={() => {\n                                                    fetchData(1)\n                                                    setCloseFilter(false)\n                                                }}\n                                            >\n                                                <Icon icon={x} size={22} />\n                                            </CustomButton>\n                                        </div>\n                                        : null\n                                    }\n                                </div>\n\n                                {/* Filter items */}\n                                <Container.Row className=\"px-2\">\n\n                                    {/* Rating Filter */}\n                                    <Container.Column className=\"col-sm-6 col-md-4 px-1 mb-2\">\n                                        <SingleSelect\n                                            placeholder=\"rating\"\n                                            borderRadius={25}\n                                            options={[\n                                                { label: 5, value: 5 },\n                                                { label: 4, value: 4 },\n                                                { label: 3, value: 3 },\n                                                { label: 2, value: 2 },\n                                                { label: 1, value: 1 }\n                                            ]}\n                                            value={event => handleFilter(event.value, \"rating\")}\n                                        />\n                                    </Container.Column>\n\n                                    {/* Type Filter */}\n                                    <Container.Column className=\"col-sm-6 col-md-4 px-1 mb-2\">\n                                        <SingleSelect\n                                            placeholder=\"type\"\n                                            borderRadius={25}\n                                            options={[\n                                                { label: \"Verified\", value: \"Verified\" },\n                                                { label: \"Unverified\", value: \"Unverified\" }\n                                            ]}\n                                            value={event => handleFilter(event.value, \"type\")}\n                                        />\n                                    </Container.Column>\n\n                                    {/* Status Filter */}\n                                    <Container.Column className=\"col-sm-6 col-md-4 px-1 mb-2\">\n                                        <SingleSelect\n                                            placeholder=\"status\"\n                                            borderRadius={25}\n                                            options={[\n                                                { label: \"Pending\", value: \"Pending\" },\n                                                { label: \"Approved\", value: \"Approved\" }\n                                            ]}\n                                            value={event => handleFilter(event.value, \"status\")}\n                                        />\n                                    </Container.Column>\n\n                                    {/* Customer filter */}\n                                    <Container.Column className=\"col-sm-6 px-1 mb-2\">\n                                        <SearchableSelect\n                                            placeholder=\"Type customer ...\"\n                                            borderRadius={25}\n                                            search={inputValue => handleSearchItem({ inputValue, field: \"customer\" })}\n                                            values={data => handleFilter(data.value, \"customer\")}\n                                        />\n                                    </Container.Column>\n\n                                    {/* Product filter */}\n                                    <Container.Column className=\"col-sm-6 px-1 mb-2\">\n                                        <SearchableSelect\n                                            placeholder=\"Type product ...\"\n                                            borderRadius={25}\n                                            search={inputValue => handleSearchItem({ inputValue, field: \"product\" })}\n                                            values={data => handleFilter(data.value, \"product\")}\n                                        />\n                                    </Container.Column>\n                                </Container.Row>\n                            </Card.Header>\n                            <Card.Body className=\"p-0\">\n                                <DataTable\n                                    fixedHeader\n                                    fixedHeaderScrollHeight=\"580px\"\n                                    columns={columns}\n                                    data={data}\n                                    loading={isLoading}\n                                    totalRows={totalItems}\n                                    pagination={true}\n                                    paginationServer={true}\n                                    handlePerRowsChange={handleLimitChange}\n                                    handlePageChange={handlePageChange}\n                                />\n                            </Card.Body>\n                        </Card.Simple>\n                    </Container.Column>\n                </Container.Row>\n            </Container.Fluid>\n\n            {/* Delete confirmation */}\n            <DeleteModal\n                show={isDelete.show}\n                loading={isDelete.loading}\n                message={<h6>Want to delete this Review ?</h6>}\n                onHide={() => setDelete({ value: null, show: false, loading: false })}\n                doDelete={handleDelete}\n            />\n        </div>\n    );\n};\n\nexport default Index;"]},"metadata":{},"sourceType":"module"}