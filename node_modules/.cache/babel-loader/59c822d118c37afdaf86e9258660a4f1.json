{"ast":null,"code":"import _slicedToArray from\"D:/previous/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useRef,useState}from'react';import IdleTimer from'react-idle-timer';import{Modal}from'react-bootstrap';import{CustomButton}from'../button';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var IdleTimerContainer=function IdleTimerContainer(props){var idleTimerRef=useRef(null);var sessionTimeoutRef=useRef(null);var _useState=useState(false),_useState2=_slicedToArray(_useState,2),modalIsOpen=_useState2[0],setModalIsOpen=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLogOut=_useState4[0],setLogOut=_useState4[1];// handle idle\nvar onIdle=function onIdle(){var token=localStorage.getItem(\"token\");if(token){setModalIsOpen(true);sessionTimeoutRef.current=setTimeout(logOut,10000);}};// handle logout\nvar logOut=function logOut(){setLogOut(true);setTimeout(function(){clearTimeout(sessionTimeoutRef.current);setLogOut(false);localStorage.clear();window.location.reload();},1000);};// handle signed in\nvar keepSignedIn=function keepSignedIn(){setModalIsOpen(false);clearTimeout(sessionTimeoutRef.current);};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Modal,{show:modalIsOpen,size:\"md\",centered:true,backdrop:\"static\",keyboard:false,className:\"custom-modal\",children:/*#__PURE__*/_jsxs(Modal.Body,{className:\"text-center px-4 py-5\",children:[/*#__PURE__*/_jsx(\"h4\",{className:\"fw-bolder mb-0\",children:\"You will be logged out after 10s!!!\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"pt-4\",children:[/*#__PURE__*/_jsx(CustomButton,{disabled:isLogOut,className:\"btn-danger border-0 mr-2\",style:{padding:\"7px 20px\",fontSize:14},onClick:logOut,children:isLogOut?\"Logging out ...\":\"Log me out\"}),/*#__PURE__*/_jsx(CustomButton,{className:\"btn-success border-0 mr-2\",style:{padding:\"7px 20px\",fontSize:14},onClick:keepSignedIn,children:\"Kep me signed in\"})]})]})}),/*#__PURE__*/_jsx(IdleTimer,{ref:idleTimerRef,timeout:3600000000000,onIdle:onIdle,children:props.children})]});};","map":{"version":3,"sources":["D:/previous/src/components/idleTimer/IdleTimerContainer.js"],"names":["React","useRef","useState","IdleTimer","Modal","CustomButton","IdleTimerContainer","props","idleTimerRef","sessionTimeoutRef","modalIsOpen","setModalIsOpen","isLogOut","setLogOut","onIdle","token","localStorage","getItem","current","setTimeout","logOut","clearTimeout","clear","window","location","reload","keepSignedIn","padding","fontSize","children"],"mappings":"iGAAA,MAAOA,CAAAA,KAAP,EAAgBC,MAAhB,CAAwBC,QAAxB,KAAwC,OAAxC,CACA,MAAOC,CAAAA,SAAP,KAAsB,kBAAtB,CACA,OAASC,KAAT,KAAsB,iBAAtB,CACA,OAASC,YAAT,KAA6B,WAA7B,C,wFAEA,MAAO,IAAMC,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAACC,KAAD,CAAW,CACzC,GAAMC,CAAAA,YAAY,CAAGP,MAAM,CAAC,IAAD,CAA3B,CACA,GAAMQ,CAAAA,iBAAiB,CAAGR,MAAM,CAAC,IAAD,CAAhC,CACA,cAAsCC,QAAQ,CAAC,KAAD,CAA9C,wCAAOQ,WAAP,eAAoBC,cAApB,eACA,eAA8BT,QAAQ,CAAC,KAAD,CAAtC,yCAAOU,QAAP,eAAiBC,SAAjB,eAEA;AACA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACjB,GAAMC,CAAAA,KAAK,CAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAd,CACA,GAAIF,KAAJ,CAAW,CACPJ,cAAc,CAAC,IAAD,CAAd,CACAF,iBAAiB,CAACS,OAAlB,CAA4BC,UAAU,CAACC,MAAD,CAAS,KAAT,CAAtC,CACH,CACJ,CAND,CAQA;AACA,GAAMA,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACjBP,SAAS,CAAC,IAAD,CAAT,CAEAM,UAAU,CAAC,UAAM,CACbE,YAAY,CAACZ,iBAAiB,CAACS,OAAnB,CAAZ,CACAL,SAAS,CAAC,KAAD,CAAT,CACAG,YAAY,CAACM,KAAb,GACAC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GACH,CALS,CAKP,IALO,CAAV,CAMH,CATD,CAWA;AACA,GAAMC,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,EAAM,CACvBf,cAAc,CAAC,KAAD,CAAd,CACAU,YAAY,CAACZ,iBAAiB,CAACS,OAAnB,CAAZ,CACH,CAHD,CAKA,mBACI,oCACI,KAAC,KAAD,EACI,IAAI,CAAER,WADV,CAEI,IAAI,CAAC,IAFT,CAGI,QAAQ,KAHZ,CAII,QAAQ,CAAC,QAJb,CAKI,QAAQ,CAAE,KALd,CAMI,SAAS,CAAC,cANd,uBAQI,MAAC,KAAD,CAAO,IAAP,EAAY,SAAS,CAAC,uBAAtB,wBACI,WAAI,SAAS,CAAC,gBAAd,iDADJ,cAGI,aAAK,SAAS,CAAC,MAAf,wBACI,KAAC,YAAD,EACI,QAAQ,CAAEE,QADd,CAEI,SAAS,CAAC,0BAFd,CAGI,KAAK,CAAE,CAAEe,OAAO,CAAE,UAAX,CAAuBC,QAAQ,CAAE,EAAjC,CAHX,CAII,OAAO,CAAER,MAJb,UAKER,QAAQ,CAAG,iBAAH,CAAuB,YALjC,EADJ,cASI,KAAC,YAAD,EACI,SAAS,CAAC,2BADd,CAEI,KAAK,CAAE,CAAEe,OAAO,CAAE,UAAX,CAAuBC,QAAQ,CAAE,EAAjC,CAFX,CAGI,OAAO,CAAEF,YAHb,8BATJ,GAHJ,GARJ,EADJ,cA8BI,KAAC,SAAD,EACI,GAAG,CAAElB,YADT,CAEI,OAAO,CAAE,aAFb,CAGI,MAAM,CAAEM,MAHZ,UAKKP,KAAK,CAACsB,QALX,EA9BJ,GADJ,CAwCH,CAzEM","sourcesContent":["import React, { useRef, useState } from 'react'\nimport IdleTimer from 'react-idle-timer'\nimport { Modal } from 'react-bootstrap'\nimport { CustomButton } from '../button'\n\nexport const IdleTimerContainer = (props) => {\n    const idleTimerRef = useRef(null)\n    const sessionTimeoutRef = useRef(null)\n    const [modalIsOpen, setModalIsOpen] = useState(false)\n    const [isLogOut, setLogOut] = useState(false)\n\n    // handle idle\n    const onIdle = () => {\n        const token = localStorage.getItem(\"token\")\n        if (token) {\n            setModalIsOpen(true)\n            sessionTimeoutRef.current = setTimeout(logOut, 10000)\n        }\n    }\n\n    // handle logout\n    const logOut = () => {\n        setLogOut(true)\n\n        setTimeout(() => {\n            clearTimeout(sessionTimeoutRef.current)\n            setLogOut(false)\n            localStorage.clear()\n            window.location.reload()\n        }, 1000)\n    }\n\n    // handle signed in\n    const keepSignedIn = () => {\n        setModalIsOpen(false)\n        clearTimeout(sessionTimeoutRef.current)\n    }\n\n    return (\n        <div>\n            <Modal\n                show={modalIsOpen}\n                size=\"md\"\n                centered\n                backdrop=\"static\"\n                keyboard={false}\n                className=\"custom-modal\"\n            >\n                <Modal.Body className=\"text-center px-4 py-5\">\n                    <h4 className=\"fw-bolder mb-0\">You will be logged out after 10s!!!</h4>\n\n                    <div className=\"pt-4\">\n                        <CustomButton\n                            disabled={isLogOut}\n                            className=\"btn-danger border-0 mr-2\"\n                            style={{ padding: \"7px 20px\", fontSize: 14 }}\n                            onClick={logOut}\n                        >{isLogOut ? \"Logging out ...\" : \"Log me out\"}\n                        </CustomButton>\n\n                        <CustomButton\n                            className=\"btn-success border-0 mr-2\"\n                            style={{ padding: \"7px 20px\", fontSize: 14 }}\n                            onClick={keepSignedIn}\n                        >Kep me signed in</CustomButton>\n                    </div>\n                </Modal.Body>\n            </Modal>\n\n            <IdleTimer\n                ref={idleTimerRef}\n                timeout={3600000000000}\n                onIdle={onIdle}\n            >\n                {props.children}\n            </IdleTimer>\n        </div>\n    )\n}"]},"metadata":{},"sourceType":"module"}