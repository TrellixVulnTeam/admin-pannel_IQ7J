{"ast":null,"code":"import _objectSpread from\"D:/previous/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"D:/previous/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/previous/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\previous\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useCallback,useEffect,useState}from'react';import'./style.scss';import Icon from'react-icons-kit';import{Link,useParams}from'react-router-dom';import{chevronLeft}from'react-icons-kit/feather';import{Text}from'../../components/text';import{Card}from'../../components/card/Index';import{Container}from'../../components/container';import{CustomButton}from'../../components/button';import{FormGroup}from'../../components/formGroup';import{SearchableSelect}from'../../components/select';import{PreLoader}from'../../components/loading/Index';import{SingleFileUploader}from'../../components/fileUploader/Index';import Requests from'../../utils/Requests/Index';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Edit=function Edit(){var _useParams=useParams(),id=_useParams.id;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),changing=_useState6[0],setChanging=_useState6[1];var _useState7=useState({type:null,value:null,error:null}),_useState8=_slicedToArray(_useState7,2),item=_useState8[0],setItem=_useState8[1];var _useState9=useState({value:null,error:null}),_useState10=_slicedToArray(_useState9,2),link=_useState10[0],setLink=_useState10[1];var _useState11=useState({value:null,error:null}),_useState12=_slicedToArray(_useState11,2),webImage=_useState12[0],setWebImage=_useState12[1];var _useState13=useState({value:null,error:null}),_useState14=_slicedToArray(_useState13,2),mobileImage=_useState14[0],setMobileImage=_useState14[1];var _useState15=useState({headers:{Authorization:\"Bearer \"+localStorage.getItem('token')}}),_useState16=_slicedToArray(_useState15,1),header=_useState16[0];// Fetch data\nvar fetchData=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Requests.Banner.Show(id,header);case 2:response=_context.sent;if(response){setData(response.data);setItem({type:response.data.type});setLink({value:response.data.link});}setLoading(false);case 5:case\"end\":return _context.stop();}}},_callee);})),[id,header]);useEffect(function(){fetchData();},[id,fetchData]);// Handle search\nvar handleSearch=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref2){var inputValue,field,response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:inputValue=_ref2.inputValue,field=_ref2.field;if(!field)response={data:[]};if(!(field===\"brand\")){_context2.next=6;break;}_context2.next=5;return Requests.Options.Brand(inputValue,header);case 5:response=_context2.sent;case 6:if(!(field===\"vendor\")){_context2.next=10;break;}_context2.next=9;return Requests.Options.Vendor(inputValue,header);case 9:response=_context2.sent;case 10:if(!(field===\"product\")){_context2.next=14;break;}_context2.next=13;return Requests.Options.Product(inputValue,header);case 13:response=_context2.sent;case 14:if(!(field===\"category\")){_context2.next=18;break;}_context2.next=17;return Requests.Options.Category(inputValue,header);case 17:response=_context2.sent;case 18:if(!(field===\"sub-category\")){_context2.next=22;break;}_context2.next=21;return Requests.Options.SubCategory(inputValue,header);case 21:response=_context2.sent;case 22:if(!(field===\"leaf-category\")){_context2.next=26;break;}_context2.next=25;return Requests.Options.LeafCategory(inputValue,header);case 25:response=_context2.sent;case 26:if(!(response.data&&response.data.length)){_context2.next=28;break;}return _context2.abrupt(\"return\",response.data);case 28:return _context2.abrupt(\"return\",[]);case 29:case\"end\":return _context2.stop();}}},_callee2);}));return function handleSearch(_x){return _ref3.apply(this,arguments);};}();// Submit Form\nvar onSubmit=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(event){var formData;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:event.preventDefault();if(!(item.type&&!item.value)){_context3.next=3;break;}return _context3.abrupt(\"return\",setItem(_objectSpread(_objectSpread({},item),{},{error:item.type+\" is required.\"})));case 3:if(!(!link.value&&!item.value)){_context3.next=5;break;}return _context3.abrupt(\"return\",setLink(_objectSpread(_objectSpread({},link),{},{error:\"Link is required.\"})));case 5:if(webImage.value){_context3.next=7;break;}return _context3.abrupt(\"return\",setWebImage({value:null,error:\"Web banner is required.\"}));case 7:if(mobileImage.value){_context3.next=9;break;}return _context3.abrupt(\"return\",setMobileImage({value:null,error:\"Mobile banner is required.\"}));case 9:formData=new FormData();formData.append('type',item.type);formData.append('item',item.value?item.value:null);formData.append('link',link.value);formData.append('webBanner',webImage.value);formData.append('mobileBanner',mobileImage.value);setChanging(true);_context3.next=18;return Requests.Banner.Update(id,formData,header);case 18:setChanging(false);case 19:case\"end\":return _context3.stop();}}},_callee3);}));return function onSubmit(_x2){return _ref4.apply(this,arguments);};}();if(isLoading)return/*#__PURE__*/_jsx(PreLoader,{});return/*#__PURE__*/_jsx(\"div\",{className:\"mb-4\",children:/*#__PURE__*/_jsx(Container.Fluid,{children:/*#__PURE__*/_jsx(Container.Row,{children:/*#__PURE__*/_jsx(Container.Column,{className:\"col-padding\",children:/*#__PURE__*/_jsxs(Card.Simple,{className:\"border-0 shadow-sm\",children:[/*#__PURE__*/_jsx(Card.Header,{className:\"p-3 p-lg-4 bg-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h6\",{className:\"mt-2 mb-0\",children:\"Edit Banner\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-auto\",children:/*#__PURE__*/_jsx(Link,{to:\"/dashboard/banner\",children:/*#__PURE__*/_jsx(CustomButton,{className:\"btn-primary border-0 rounded-circle circle__padding\",children:/*#__PURE__*/_jsx(Icon,{icon:chevronLeft,size:22})})})})]})}),/*#__PURE__*/_jsx(Card.Body,{children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[/*#__PURE__*/_jsxs(FormGroup,{children:[/*#__PURE__*/_jsx(Text,{children:/*#__PURE__*/_jsx(\"i\",{children:\"Select the type which you want to added.\"})}),/*#__PURE__*/_jsxs(\"select\",{name:\"type\",className:\"form-control shadow-none\",defaultValue:data.type,onChange:function onChange(event){setItem(_objectSpread(_objectSpread({},item),{},{value:null,type:event.target.value,error:null}));setLink(_objectSpread(_objectSpread({},link),{},{error:null}));},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Select Option --\"}),/*#__PURE__*/_jsx(\"option\",{value:\"brand\",children:\"Brand\"}),/*#__PURE__*/_jsx(\"option\",{value:\"vendor\",children:\"Vendor\"}),/*#__PURE__*/_jsx(\"option\",{value:\"product\",children:\"Product\"}),/*#__PURE__*/_jsx(\"option\",{value:\"category\",children:\"Category\"}),/*#__PURE__*/_jsx(\"option\",{value:\"sub-category\",children:\"Sub Category\"}),/*#__PURE__*/_jsx(\"option\",{value:\"leaf-category\",children:\"Leaf Category\"})]})]}),/*#__PURE__*/_jsxs(FormGroup,{children:[item.error?/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:/*#__PURE__*/_jsx(\"i\",{children:item.error})}):/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsxs(\"i\",{children:[\"Select the \",item.type,\" which you want to add.\"]})}),/*#__PURE__*/_jsx(SearchableSelect,{borderRadius:4,placeholder:item.type?\"Select \"+item.type:\"Select item\",search:function search(inputValue){return handleSearch({inputValue:inputValue,field:item.type});},values:function values(data){if(item.type===\"brand\"||item.type===\"vendor\"){setItem(_objectSpread(_objectSpread({},item),{},{value:data.value,error:null}));}else{setItem(_objectSpread(_objectSpread({},item),{},{value:data.slug,error:null}));}}})]}),/*#__PURE__*/_jsxs(FormGroup,{children:[link.error?/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:/*#__PURE__*/_jsx(\"i\",{children:link.error})}):/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"i\",{children:\"Add other links\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control shadow-none\",placeholder:\"www.example.com\",defaultValue:data.link||null,onChange:function onChange(event){return setLink({value:event.target.value,error:null});}})]}),/*#__PURE__*/_jsxs(FormGroup,{children:[webImage.error?/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:webImage.error}):/*#__PURE__*/_jsx(\"p\",{children:\"Web banner\"}),/*#__PURE__*/_jsx(SingleFileUploader,{width:250,height:100,limit:100,default:data.web,dataHandeller:function dataHandeller(data){return setWebImage({value:data.image,error:data.error||null});}})]}),/*#__PURE__*/_jsxs(FormGroup,{children:[mobileImage.error?/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:mobileImage.error}):/*#__PURE__*/_jsx(\"p\",{children:\"Mobile banner\"}),/*#__PURE__*/_jsx(SingleFileUploader,{width:200,height:80,limit:100,default:data.mobile,dataHandeller:function dataHandeller(data){return setMobileImage({value:data.image,error:data.error||null});}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-right\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn shadow-none\",disabled:changing,children:changing?'Saving ...':'Save Changes'})})]})})]})})})})});};export default Edit;","map":{"version":3,"sources":["D:/previous/src/pages/banner/Edit.js"],"names":["React","useCallback","useEffect","useState","Icon","Link","useParams","chevronLeft","Text","Card","Container","CustomButton","FormGroup","SearchableSelect","PreLoader","SingleFileUploader","Requests","Edit","id","data","setData","isLoading","setLoading","changing","setChanging","type","value","error","item","setItem","link","setLink","webImage","setWebImage","mobileImage","setMobileImage","headers","Authorization","localStorage","getItem","header","fetchData","Banner","Show","response","handleSearch","inputValue","field","Options","Brand","Vendor","Product","Category","SubCategory","LeafCategory","length","onSubmit","event","preventDefault","formData","FormData","append","Update","target","slug","web","image","mobile"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useState } from 'react'\nimport './style.scss'\nimport Icon from 'react-icons-kit'\nimport { Link, useParams } from 'react-router-dom'\nimport { chevronLeft } from 'react-icons-kit/feather'\nimport { Text } from '../../components/text'\nimport { Card } from '../../components/card/Index'\nimport { Container } from '../../components/container'\nimport { CustomButton } from '../../components/button'\nimport { FormGroup } from '../../components/formGroup'\nimport { SearchableSelect } from '../../components/select'\nimport { PreLoader } from '../../components/loading/Index'\nimport { SingleFileUploader } from '../../components/fileUploader/Index'\n\nimport Requests from '../../utils/Requests/Index'\n\nconst Edit = () => {\n    const { id } = useParams()\n    const [data, setData] = useState({})\n    const [isLoading, setLoading] = useState(true)\n    const [changing, setChanging] = useState(false)\n    const [item, setItem] = useState({ type: null, value: null, error: null })\n    const [link, setLink] = useState({ value: null, error: null })\n    const [webImage, setWebImage] = useState({ value: null, error: null })\n    const [mobileImage, setMobileImage] = useState({ value: null, error: null })\n    const [header] = useState({\n        headers: { Authorization: \"Bearer \" + localStorage.getItem('token') }\n    })\n\n    // Fetch data\n    const fetchData = useCallback(async () => {\n        const response = await Requests.Banner.Show(id, header)\n        if (response) {\n            setData(response.data)\n            setItem({ type: response.data.type })\n            setLink({ value: response.data.link })\n        }\n        setLoading(false)\n    }, [id, header])\n\n    useEffect(() => {\n        fetchData()\n    }, [id, fetchData])\n\n    // Handle search\n    const handleSearch = async ({ inputValue, field }) => {\n        let response\n\n        if (!field) response = { data: [] }\n\n        if (field === \"brand\") {\n            response = await Requests.Options.Brand(inputValue, header)\n        }\n\n        if (field === \"vendor\") {\n            response = await Requests.Options.Vendor(inputValue, header)\n        }\n\n        if (field === \"product\") {\n            response = await Requests.Options.Product(inputValue, header)\n        }\n\n        if (field === \"category\") {\n            response = await Requests.Options.Category(inputValue, header)\n        }\n\n        if (field === \"sub-category\") {\n            response = await Requests.Options.SubCategory(inputValue, header)\n        }\n\n        if (field === \"leaf-category\") {\n            response = await Requests.Options.LeafCategory(inputValue, header)\n        }\n\n        if (response.data && response.data.length) return response.data\n        return []\n    }\n\n    // Submit Form\n    const onSubmit = async (event) => {\n        event.preventDefault()\n        if (item.type && !item.value) return setItem({ ...item, error: item.type + \" is required.\" })\n        if (!link.value && !item.value) return setLink({ ...link, error: \"Link is required.\" })\n        if (!webImage.value) return setWebImage({ value: null, error: \"Web banner is required.\" })\n        if (!mobileImage.value) return setMobileImage({ value: null, error: \"Mobile banner is required.\" })\n\n        let formData = new FormData()\n        formData.append('type', item.type)\n        formData.append('item', item.value ? item.value : null)\n        formData.append('link', link.value)\n        formData.append('webBanner', webImage.value)\n        formData.append('mobileBanner', mobileImage.value)\n\n        setChanging(true)\n        await Requests.Banner.Update(id, formData, header)\n        setChanging(false)\n    }\n\n    if (isLoading) return <PreLoader />\n\n    return (\n        <div className=\"mb-4\">\n            <Container.Fluid>\n                <Container.Row>\n                    <Container.Column className=\"col-padding\">\n                        <Card.Simple className=\"border-0 shadow-sm\">\n                            <Card.Header className=\"p-3 p-lg-4 bg-white\">\n                                <div className=\"d-flex\">\n                                    <div><h6 className=\"mt-2 mb-0\">Edit Banner</h6></div>\n                                    <div className=\"ml-auto\">\n                                        <Link to=\"/dashboard/banner\">\n                                            <CustomButton className=\"btn-primary border-0 rounded-circle circle__padding\">\n                                                <Icon icon={chevronLeft} size={22} />\n                                            </CustomButton>\n                                        </Link>\n                                    </div>\n                                </div>\n                            </Card.Header>\n                            <Card.Body>\n                                <form onSubmit={onSubmit}>\n\n                                    {/* Type */}\n                                    <FormGroup>\n                                        <Text><i>Select the type which you want to added.</i></Text>\n\n                                        <select\n                                            name=\"type\"\n                                            className=\"form-control shadow-none\"\n                                            defaultValue={data.type}\n                                            onChange={event => {\n                                                setItem({ ...item, value: null, type: event.target.value, error: null })\n                                                setLink({ ...link, error: null })\n                                            }}\n                                        >\n                                            <option value=\"\">-- Select Option --</option>\n                                            <option value=\"brand\">Brand</option>\n                                            <option value=\"vendor\">Vendor</option>\n                                            <option value=\"product\">Product</option>\n                                            <option value=\"category\">Category</option>\n                                            <option value=\"sub-category\">Sub Category</option>\n                                            <option value=\"leaf-category\">Leaf Category</option>\n                                        </select>\n                                    </FormGroup>\n\n                                    {/* Item */}\n                                    <FormGroup>\n                                        {item.error ? <p className=\"text-danger\"><i>{item.error}</i></p> : <p><i>Select the {item.type} which you want to add.</i></p>}\n\n                                        <SearchableSelect\n                                            borderRadius={4}\n                                            placeholder={item.type ? \"Select \" + item.type : \"Select item\"}\n                                            search={inputValue => handleSearch({ inputValue, field: item.type })}\n                                            values={data => {\n                                                if (item.type === \"brand\" || item.type === \"vendor\") {\n                                                    setItem({ ...item, value: data.value, error: null })\n                                                } else {\n                                                    setItem({ ...item, value: data.slug, error: null })\n                                                }\n                                            }}\n                                        />\n                                    </FormGroup>\n\n                                    {/* Link */}\n                                    <FormGroup>\n                                        {link.error ? <p className=\"text-danger\"><i>{link.error}</i></p> : <p><i>Add other links</i></p>}\n\n                                        <input\n                                            type=\"text\"\n                                            className=\"form-control shadow-none\"\n                                            placeholder=\"www.example.com\"\n                                            defaultValue={data.link || null}\n                                            onChange={event => setLink({ value: event.target.value, error: null })}\n                                        />\n                                    </FormGroup>\n\n\n                                    {/* Web banner uploader */}\n                                    <FormGroup>\n                                        {webImage.error ? <p className=\"text-danger\">{webImage.error}</p> : <p>Web banner</p>}\n                                        <SingleFileUploader\n                                            width={250}\n                                            height={100}\n                                            limit={100}\n                                            default={data.web}\n                                            dataHandeller={data => setWebImage({ value: data.image, error: data.error || null })}\n                                        />\n                                    </FormGroup>\n\n                                    {/* Mobile banner uploader */}\n                                    <FormGroup>\n                                        {mobileImage.error ? <p className=\"text-danger\">{mobileImage.error}</p> : <p>Mobile banner</p>}\n                                        <SingleFileUploader\n                                            width={200}\n                                            height={80}\n                                            limit={100}\n                                            default={data.mobile}\n                                            dataHandeller={data => setMobileImage({ value: data.image, error: data.error || null })}\n                                        />\n                                    </FormGroup>\n\n\n                                    {/* Submit button */}\n                                    <div className=\"text-right\">\n                                        <button type=\"submit\" className=\"btn shadow-none\" disabled={changing}>\n                                            {changing ? 'Saving ...' : 'Save Changes'}\n                                        </button>\n                                    </div>\n                                </form>\n                            </Card.Body>\n                        </Card.Simple>\n                    </Container.Column>\n                </Container.Row>\n            </Container.Fluid>\n        </div>\n    );\n};\n\nexport default Edit;"]},"metadata":{},"sourceType":"module"}