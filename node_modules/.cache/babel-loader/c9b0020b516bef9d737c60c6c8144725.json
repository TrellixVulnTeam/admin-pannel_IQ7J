{"ast":null,"code":"import _slicedToArray from\"D:/previous/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import\"./style.scss\";import jwtDecode from\"jwt-decode\";import{Switch,Route}from\"react-router-dom\";import{routes}from\"../../routes/Index\";import Layout from\"../../components/layout/Index\";import FourOFour from\"../fourOfour/Index\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Index=function Index(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),permitted=_useState2[0],setPermitted=_useState2[1];console.log(\"ðŸš€ ~ file: Index.js ~ line 12 ~ Index ~ permitted\",permitted);useEffect(function(){var token=localStorage.getItem(\"token\");if(token||true){//   const decode = jwtDecode(token);\n//   const permissions = decode.permissions || [];\nvar permissions=[];// Filter permitted routes from given permissions\nif(routes&&routes.length){var isAll=permissions.find(function(item){return item===\"all\";})||true;if(isAll){console.log(\"ðŸš€ ~ file: Index.js ~ line 25 ~ useEffect ~ isAll\",isAll);return setPermitted(routes);}else{var permittedRoutes=routes.filter(function(_ref){var routeName=_ref.name;return permissions.some(function(x){return x===routeName;});});setPermitted(permittedRoutes);}}}},[]);return/*#__PURE__*/_jsxs(\"div\",{className:\"master\",children:[/*#__PURE__*/_jsx(Layout,{routes:permitted}),/*#__PURE__*/_jsx(\"div\",{className:\"main\",children:/*#__PURE__*/_jsxs(Switch,{children:[permitted&&permitted.map(function(item,i){return item.name&&item.path?/*#__PURE__*/_jsx(Route,{exact:item.exact,path:item.path,component:item.component},i):item.child&&item.child.length?item.child.map(function(child,j){return child.path?/*#__PURE__*/_jsx(Route,{exact:child.exact,path:child.path,component:child.component},j):child.child&&child.child.length?child.child.map(function(leaf,k){return/*#__PURE__*/_jsx(Route,{exact:leaf.exact,path:leaf.path,component:leaf.component},k);}):null;}):null;}),/*#__PURE__*/_jsx(Route,{path:\"*\",component:FourOFour})]})})]});};export default Index;","map":{"version":3,"sources":["D:/previous/src/pages/master/Index.js"],"names":["React","useEffect","useState","jwtDecode","Switch","Route","routes","Layout","FourOFour","Index","permitted","setPermitted","console","log","token","localStorage","getItem","permissions","length","isAll","find","item","permittedRoutes","filter","routeName","name","some","x","map","i","path","exact","component","child","j","leaf","k"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from \"react\";\nimport \"./style.scss\";\nimport jwtDecode from \"jwt-decode\";\nimport { Switch, Route } from \"react-router-dom\";\nimport { routes } from \"../../routes/Index\";\n\nimport Layout from \"../../components/layout/Index\";\nimport FourOFour from \"../fourOfour/Index\";\n\nconst Index = () => {\n  const [permitted, setPermitted] = useState([]);\n  console.log(\"ðŸš€ ~ file: Index.js ~ line 12 ~ Index ~ permitted\", permitted);\n\n  useEffect(() => {\n    const token = localStorage.getItem(\"token\");\n    if (token || true) {\n      //   const decode = jwtDecode(token);\n      //   const permissions = decode.permissions || [];\n      const permissions = [];\n\n      // Filter permitted routes from given permissions\n      if (routes && routes.length) {\n        const isAll = permissions.find((item) => item === \"all\") || true;\n\n        if (isAll) {\n          console.log(\n            \"ðŸš€ ~ file: Index.js ~ line 25 ~ useEffect ~ isAll\",\n            isAll\n          );\n          return setPermitted(routes);\n        } else {\n          const permittedRoutes = routes.filter(({ name: routeName }) =>\n            permissions.some((x) => x === routeName)\n          );\n          setPermitted(permittedRoutes);\n        }\n      }\n    }\n  }, []);\n\n  return (\n    <div className=\"master\">\n      <Layout routes={permitted} />\n      <div className=\"main\">\n        <Switch>\n          {permitted &&\n            permitted.map((item, i) =>\n              item.name && item.path ? (\n                <Route\n                  key={i}\n                  exact={item.exact}\n                  path={item.path}\n                  component={item.component}\n                />\n              ) : item.child && item.child.length ? (\n                item.child.map((child, j) =>\n                  child.path ? (\n                    <Route\n                      key={j}\n                      exact={child.exact}\n                      path={child.path}\n                      component={child.component}\n                    />\n                  ) : child.child && child.child.length ? (\n                    child.child.map((leaf, k) => (\n                      <Route\n                        key={k}\n                        exact={leaf.exact}\n                        path={leaf.path}\n                        component={leaf.component}\n                      />\n                    ))\n                  ) : null\n                )\n              ) : null\n            )}\n\n          {/* {permitted && permitted.map((item, i) =>\n                        item.name && item.path ?\n                            <Route\n                                key={i}\n                                exact={item.exact}\n                                path={item.path}\n                                component={item.component}\n                            />\n                            : item.child && item.child.length ? item.child.map((child, j) =>\n                                <Route\n                                    key={j}\n                                    exact={child.exact}\n                                    path={child.path}\n                                    component={child.component}\n                                />\n                            ) : null)\n                    } */}\n\n          <Route path=\"*\" component={FourOFour} />\n        </Switch>\n      </div>\n    </div>\n  );\n};\n\nexport default Index;\n"]},"metadata":{},"sourceType":"module"}