{"ast":null,"code":"var _jsxFileName = \"D:\\\\previous\\\\src\\\\pages\\\\reports\\\\buyerPurchase\\\\Index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useEffect, useState } from 'react';\nimport './style.scss';\nimport Requests from '../../../utils/Requests/Index';\nimport { dateFormate } from '../../../utils/Helpers';\nimport { DataTable } from '../../../components/table/Index';\nimport ExportCSV from '../../../components/exportCSV/Index';\nimport { RangeFilter } from '../../../components/rangeFilter/Index';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Index = () => {\n  _s();\n\n  const [isFilter, setFilter] = useState(false);\n  const [isLoading, setLoading] = useState(true);\n  const [limit, setLimit] = useState(10);\n  const [totalItems, setTotalItems] = useState(0);\n  const [data, setData] = useState([]);\n  const [sheetData, setSheetData] = useState([]);\n  const [searching, setSearching] = useState(false);\n  const [header] = useState({\n    headers: {\n      Authorization: \"Bearer \" + localStorage.getItem('token')\n    }\n  }); // Fetch data\n\n  const fetchData = useCallback(async page => {\n    setLoading(true);\n    const response = await Requests.BuyerPurchase.Index(page, limit, header);\n\n    if (response) {\n      let xlsxData = [];\n      setData(response.data);\n      setTotalItems(response.pagination ? response.pagination.items : 0);\n\n      if (response.data && response.data.length) {\n        for (let i = 0; i < response.data.length; i++) {\n          const element = response.data[i];\n          xlsxData.push({\n            name: element.name,\n            email: element.email,\n            phone: element.phone,\n            order_code: element.orderCode,\n            shipping_area: element.shippingArea,\n            delivery_address: element.deliveryAddress,\n            payment_method: element.paymentMethod,\n            sub_total_price: element.subTotalPrice,\n            total_price: element.totalPrice,\n            date: dateFormate(element.createdAt)\n          });\n        }\n\n        setSheetData(xlsxData);\n      }\n    }\n\n    setLoading(false);\n  }, [limit, header]);\n\n  const handlePageChange = page => fetchData(page);\n\n  const handleLimitChange = async (newLimit, page) => {\n    setLoading(true);\n    const response = await Requests.BuyerPurchase.Index(page, newLimit, header);\n    setData(response.data);\n    setLimit(newLimit);\n    setLoading(false);\n  };\n\n  useEffect(() => {\n    fetchData(1);\n  }, [header, fetchData]); // Filter items\n\n  const handleFilter = async data => {\n    setFilter(true);\n    const response = await Requests.BuyerPurchase.Filter(data, header);\n    setData(response.data);\n    setFilter(false);\n  }; // Handle search\n\n\n  const handleSearch = async data => {\n    setSearching(true);\n    const response = await Requests.BuyerPurchase.Search({\n      query: data.query\n    }, header);\n    if (response) setData(response.data);\n    setSearching(false);\n  };\n\n  const customStyles = {\n    rows: {\n      style: {\n        minHeight: '100px auto'\n      }\n    }\n  };\n  const columns = [{\n    name: 'Buyer',\n    grow: 2,\n    cell: row => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"py-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-capitalize mb-1 mb-1\",\n        children: row.name ? row.name : 'N/A'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 102,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-lowercase mb-1\",\n        children: row.email ? row.email : 'N/A'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"mb-0\",\n        children: row.phone ? row.phone : 'N/A'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 17\n    }, this)\n  }, {\n    name: 'O.Code',\n    sortable: true,\n    selector: row => row.orderCode\n  }, {\n    name: 'Addresses',\n    grow: 2,\n    cell: row => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"py-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-capitalize mb-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"text-muted\",\n          children: \"Shipping Area: \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 117,\n          columnNumber: 57\n        }, this), row.shippingArea]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-capitalize mb-0\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"text-muted\",\n          children: \"Deliver Address: \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 118,\n          columnNumber: 57\n        }, this), row.deliveryAddress]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 17\n    }, this)\n  }, {\n    name: 'Payment',\n    grow: 2,\n    cell: row => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"py-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-capitalize mb-1\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"text-muted\",\n          children: \"Sub-total: \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 57\n        }, this), row.subTotalPrice, \" tk.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 21\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        className: \"text-capitalize mb-0\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"text-muted\",\n          children: \"Total (+Deliver charge): \"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 127,\n          columnNumber: 57\n        }, this), row.totalPrice, \" tk.\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 127,\n        columnNumber: 21\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 125,\n      columnNumber: 17\n    }, this)\n  }, {\n    name: 'Created At',\n    sortable: true,\n    selector: row => dateFormate(row.createdAt)\n  }];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"report-index\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-fluid\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12 col-padding\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card border-0 shadow-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-header p-3 p-lg-4 bg-white\",\n              children: [/*#__PURE__*/_jsxDEV(\"h6\", {\n                className: \"mt-0 mb-3\",\n                children: \"Buyer purchases\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 144,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-xl-flex\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"d-md-flex pl-xl-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: /*#__PURE__*/_jsxDEV(RangeFilter, {\n                      loading: isFilter,\n                      filter: handleFilter\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 148,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 147,\n                    columnNumber: 41\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"text-right pt-2 pt-md-0 pl-2\",\n                    children: /*#__PURE__*/_jsxDEV(ExportCSV, {\n                      csvData: sheetData,\n                      fileName: 'Buyers_purchase_history'\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 154,\n                      columnNumber: 45\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 153,\n                    columnNumber: 41\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 146,\n                  columnNumber: 37\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 145,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 143,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-body p-0\",\n              children: /*#__PURE__*/_jsxDEV(DataTable, {\n                fixedHeader: true,\n                fixedHeaderScrollHeight: \"580px\",\n                customStyles: customStyles,\n                columns: columns,\n                data: data,\n                loading: isLoading,\n                totalRows: totalItems,\n                pagination: true,\n                paginationServer: true,\n                handlePerRowsChange: handleLimitChange,\n                handlePageChange: handlePageChange,\n                searchable: true,\n                search: handleSearch,\n                searching: searching,\n                clearSearch: () => fetchData(1)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 162,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 161,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 142,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 141,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 139,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 138,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Index, \"KPHzhynjjL5KF07Itu/e98b7yVE=\");\n\n_c = Index;\nexport default Index;\n\nvar _c;\n\n$RefreshReg$(_c, \"Index\");","map":{"version":3,"sources":["D:/previous/src/pages/reports/buyerPurchase/Index.js"],"names":["React","useCallback","useEffect","useState","Requests","dateFormate","DataTable","ExportCSV","RangeFilter","Index","isFilter","setFilter","isLoading","setLoading","limit","setLimit","totalItems","setTotalItems","data","setData","sheetData","setSheetData","searching","setSearching","header","headers","Authorization","localStorage","getItem","fetchData","page","response","BuyerPurchase","xlsxData","pagination","items","length","i","element","push","name","email","phone","order_code","orderCode","shipping_area","shippingArea","delivery_address","deliveryAddress","payment_method","paymentMethod","sub_total_price","subTotalPrice","total_price","totalPrice","date","createdAt","handlePageChange","handleLimitChange","newLimit","handleFilter","Filter","handleSearch","Search","query","customStyles","rows","style","minHeight","columns","grow","cell","row","sortable","selector"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useState } from 'react'\nimport './style.scss'\nimport Requests from '../../../utils/Requests/Index'\nimport { dateFormate } from '../../../utils/Helpers'\nimport { DataTable } from '../../../components/table/Index'\n\nimport ExportCSV from '../../../components/exportCSV/Index'\nimport { RangeFilter } from '../../../components/rangeFilter/Index'\n\nconst Index = () => {\n    const [isFilter, setFilter] = useState(false)\n    const [isLoading, setLoading] = useState(true)\n    const [limit, setLimit] = useState(10)\n    const [totalItems, setTotalItems] = useState(0)\n\n    const [data, setData] = useState([])\n    const [sheetData, setSheetData] = useState([])\n    const [searching, setSearching] = useState(false)\n\n    const [header] = useState({\n        headers: { Authorization: \"Bearer \" + localStorage.getItem('token') }\n    })\n\n    // Fetch data\n    const fetchData = useCallback(async (page) => {\n        setLoading(true)\n        const response = await Requests.BuyerPurchase.Index(page, limit, header)\n\n        if (response) {\n            let xlsxData = []\n            setData(response.data)\n            setTotalItems(response.pagination ? response.pagination.items : 0)\n\n            if (response.data && response.data.length) {\n                for (let i = 0; i < response.data.length; i++) {\n                    const element = response.data[i]\n                    xlsxData.push({\n                        name: element.name,\n                        email: element.email,\n                        phone: element.phone,\n                        order_code: element.orderCode,\n                        shipping_area: element.shippingArea,\n                        delivery_address: element.deliveryAddress,\n                        payment_method: element.paymentMethod,\n                        sub_total_price: element.subTotalPrice,\n                        total_price: element.totalPrice,\n                        date: dateFormate(element.createdAt)\n                    })\n                }\n                setSheetData(xlsxData)\n            }\n        }\n\n        setLoading(false)\n    }, [limit, header])\n\n    const handlePageChange = page => fetchData(page)\n\n    const handleLimitChange = async (newLimit, page) => {\n        setLoading(true)\n        const response = await Requests.BuyerPurchase.Index(page, newLimit, header)\n\n        setData(response.data)\n        setLimit(newLimit)\n        setLoading(false)\n    }\n\n    useEffect(() => {\n        fetchData(1)\n    }, [header, fetchData])\n\n    // Filter items\n    const handleFilter = async data => {\n        setFilter(true)\n        const response = await Requests.BuyerPurchase.Filter(data, header)\n        setData(response.data)\n        setFilter(false)\n    }\n\n    // Handle search\n    const handleSearch = async data => {\n        setSearching(true)\n        const response = await Requests.BuyerPurchase.Search({ query: data.query }, header)\n        if (response) setData(response.data)\n        setSearching(false)\n    }\n\n    const customStyles = {\n        rows: {\n            style: {\n                minHeight: '100px auto',\n            }\n        }\n    }\n\n    const columns = [\n        {\n            name: 'Buyer',\n            grow: 2,\n            cell: row =>\n                <div className=\"py-2\">\n                    <p className=\"text-capitalize mb-1 mb-1\">{row.name ? row.name : 'N/A'}</p>\n                    <p className=\"text-lowercase mb-1\">{row.email ? row.email : 'N/A'}</p>\n                    <p className=\"mb-0\">{row.phone ? row.phone : 'N/A'}</p>\n                </div>\n        },\n        {\n            name: 'O.Code',\n            sortable: true,\n            selector: row => row.orderCode\n        },\n        {\n            name: 'Addresses',\n            grow: 2,\n            cell: row =>\n                <div className=\"py-2\">\n                    <p className=\"text-capitalize mb-1\"><i className=\"text-muted\">Shipping Area: </i>{row.shippingArea}</p>\n                    <p className=\"text-capitalize mb-0\"><i className=\"text-muted\">Deliver Address: </i>{row.deliveryAddress}</p>\n                </div>\n        },\n        {\n            name: 'Payment',\n            grow: 2,\n            cell: row =>\n                <div className=\"py-2\">\n                    <p className=\"text-capitalize mb-1\"><i className=\"text-muted\">Sub-total: </i>{row.subTotalPrice} tk.</p>\n                    <p className=\"text-capitalize mb-0\"><i className=\"text-muted\">Total (+Deliver charge): </i>{row.totalPrice} tk.</p>\n                </div>\n        },\n        {\n            name: 'Created At',\n            sortable: true,\n            selector: row => dateFormate(row.createdAt)\n        }\n    ]\n\n    return (\n        <div className=\"report-index\">\n            <div className=\"container-fluid\">\n                <div className=\"row\">\n                    <div className=\"col-12 col-padding\">\n                        <div className=\"card border-0 shadow-sm\">\n                            <div className=\"card-header p-3 p-lg-4 bg-white\">\n                                <h6 className=\"mt-0 mb-3\">Buyer purchases</h6>\n                                <div className=\"d-xl-flex\">\n                                    <div className=\"d-md-flex pl-xl-2\">\n                                        <div>\n                                            <RangeFilter\n                                                loading={isFilter}\n                                                filter={handleFilter}\n                                            />\n                                        </div>\n                                        <div className=\"text-right pt-2 pt-md-0 pl-2\">\n                                            <ExportCSV csvData={sheetData} fileName={'Buyers_purchase_history'} />\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n\n                            {/* Data table component for show data */}\n                            <div className=\"card-body p-0\">\n                                <DataTable\n                                    fixedHeader\n                                    fixedHeaderScrollHeight=\"580px\"\n                                    customStyles={customStyles}\n                                    columns={columns}\n                                    data={data}\n                                    loading={isLoading}\n                                    totalRows={totalItems}\n                                    pagination={true}\n                                    paginationServer={true}\n                                    handlePerRowsChange={handleLimitChange}\n                                    handlePageChange={handlePageChange}\n                                    searchable\n                                    search={handleSearch}\n                                    searching={searching}\n                                    clearSearch={() => fetchData(1)}\n                                />\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default Index;"]},"metadata":{},"sourceType":"module"}