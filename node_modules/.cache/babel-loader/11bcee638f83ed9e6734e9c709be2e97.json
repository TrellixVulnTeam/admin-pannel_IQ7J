{"ast":null,"code":"import _objectSpread from\"D:/previous/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"D:/previous/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/previous/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\previous\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useEffect,useState}from'react';import'./style.scss';import Icon from'react-icons-kit';import{Link}from'react-router-dom';import{edit2}from'react-icons-kit/feather';import{DragDropContext,Droppable,Draggable}from'react-beautiful-dnd';import{PreLoader}from'../loading/Index';import Requests from'../../utils/Requests/Index';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Category=function Category(props){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),items=_useState2[0],setItems=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),isActive=_useState6[0],setActive=_useState6[1];var _useState7=useState({headers:{Authorization:\"Bearer \"+localStorage.getItem('token')}}),_useState8=_slicedToArray(_useState7,1),header=_useState8[0];useEffect(function(){if(props.items)setItems(props.items);},[props.items]);// Handle update index\nvar handleUpdate=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var updatedItems,i,element,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;updatedItems=[];if(items&&items.length){for(i=0;i<items.length;i++){element=items[i];updatedItems.push({_id:element._id,indexId:i});}}if(!(updatedItems&&updatedItems.length)){_context.next=9;break;}setLoading(true);_context.next=7;return Requests.Category.UpdateIndex(updatedItems,header);case 7:response=_context.sent;if(response&&response.status===201)setLoading(false);case 9:_context.next=14;break;case 11:_context.prev=11;_context.t0=_context[\"catch\"](0);if(_context.t0){setLoading(false);console.log(_context.t0);}case 14:case\"end\":return _context.stop();}}},_callee,null,[[0,11]]);}));return function handleUpdate(){return _ref.apply(this,arguments);};}();// Handle active\nvar handleActive=function handleActive(item){if(isActive&&isActive===item){setActive(null);}else{setActive(item);}};if(isLoading)return/*#__PURE__*/_jsx(PreLoader,{});return/*#__PURE__*/_jsx(\"div\",{className:\"category-items\",children:/*#__PURE__*/_jsx(\"div\",{className:\"parent-container\",children:/*#__PURE__*/_jsx(DragDropContext,{onDragEnd:function onDragEnd(param){var _param$destination;var srcIndex=param.source.index;var desIndex=(_param$destination=param.destination)===null||_param$destination===void 0?void 0:_param$destination.index;if(desIndex)items.splice(desIndex,0,items.splice(srcIndex,1)[0]);handleUpdate();},children:/*#__PURE__*/_jsx(Droppable,{droppableId:\"droppable-1\",children:function children(provided,snapshot){return/*#__PURE__*/_jsx(\"div\",_objectSpread(_objectSpread({ref:provided.innerRef},provided.droppableProps),{},{children:items&&items.map(function(item,i){return/*#__PURE__*/_jsx(Draggable,{draggableId:item._id,index:i,children:function children(provided,snapshot){return/*#__PURE__*/_jsxs(\"div\",_objectSpread(_objectSpread(_objectSpread({ref:provided.innerRef},provided.draggableProps),provided.dragHandleProps),{},{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"container-item shadow-sm d-flex item\",onClick:function onClick(){return handleActive(item.name);},children:[/*#__PURE__*/_jsx(\"div\",{className:\"image-container pr-3\",children:/*#__PURE__*/_jsx(\"img\",{src:item.image,className:\"img-fluid\",alt:\"...\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{children:item.name})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-auto\",children:/*#__PURE__*/_jsx(Link,{type:\"button\",to:\"/dashboard/category/Main/\".concat(item._id,\"/edit\"),className:\"btn btn-sm shadow-none table-edit-btn\",children:/*#__PURE__*/_jsx(Icon,{icon:edit2,size:20})})})]}),isActive&&isActive===item.name?/*#__PURE__*/_jsx(\"div\",{children:item.children&&item.children.map(function(firstChild,j){return/*#__PURE__*/_jsxs(\"div\",{className:\"children-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"container-item shadow-sm d-flex\",draggable:true,children:[/*#__PURE__*/_jsx(\"div\",{className:\"image-container pr-3\",children:/*#__PURE__*/_jsx(\"img\",{src:firstChild.image,className:\"img-fluid\",alt:\"...\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{children:firstChild.name})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-auto\",children:/*#__PURE__*/_jsx(Link,{type:\"button\",to:\"/dashboard/category/Sub/\".concat(firstChild._id,\"/edit\"),className:\"btn btn-sm shadow-none table-edit-btn\",children:/*#__PURE__*/_jsx(Icon,{icon:edit2,size:20})})})]}),firstChild.children&&firstChild.children.map(function(secondChild,k){return/*#__PURE__*/_jsx(\"div\",{className:\"children-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container-item shadow-sm d-flex\",draggable:true,children:[/*#__PURE__*/_jsx(\"div\",{className:\"image-container pr-3\",children:/*#__PURE__*/_jsx(\"img\",{src:secondChild.image,className:\"img-fluid\",alt:\"...\"})}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"p\",{children:secondChild.name})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-auto\",children:/*#__PURE__*/_jsx(Link,{type:\"button\",to:\"/dashboard/category/Leaf/\".concat(secondChild._id,\"/edit\"),className:\"btn btn-sm shadow-none table-edit-btn\",children:/*#__PURE__*/_jsx(Icon,{icon:edit2,size:20})})})]})},k);})]},j);})}):null]}));}},item.indexId);})}));}})})})});};export default Category;","map":{"version":3,"sources":["D:/previous/src/components/table/Category.js"],"names":["React","useEffect","useState","Icon","Link","edit2","DragDropContext","Droppable","Draggable","PreLoader","Requests","Category","props","items","setItems","isLoading","setLoading","isActive","setActive","headers","Authorization","localStorage","getItem","header","handleUpdate","updatedItems","length","i","element","push","_id","indexId","UpdateIndex","response","status","console","log","handleActive","item","param","srcIndex","source","index","desIndex","destination","splice","provided","snapshot","innerRef","droppableProps","map","draggableProps","dragHandleProps","name","image","children","firstChild","j","secondChild","k"],"mappings":"4YAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,CAA2BC,QAA3B,KAA2C,OAA3C,CACA,MAAO,cAAP,CACA,MAAOC,CAAAA,IAAP,KAAiB,iBAAjB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,KAAT,KAAsB,yBAAtB,CACA,OAASC,eAAT,CAA0BC,SAA1B,CAAqCC,SAArC,KAAsD,qBAAtD,CACA,OAASC,SAAT,KAA0B,kBAA1B,CAEA,MAAOC,CAAAA,QAAP,KAAqB,4BAArB,C,wFAGA,GAAMC,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAACC,KAAD,CAAW,CACxB,cAA0BV,QAAQ,CAAC,EAAD,CAAlC,wCAAOW,KAAP,eAAcC,QAAd,eACA,eAAgCZ,QAAQ,CAAC,KAAD,CAAxC,yCAAOa,SAAP,eAAkBC,UAAlB,eACA,eAA8Bd,QAAQ,CAAC,IAAD,CAAtC,yCAAOe,QAAP,eAAiBC,SAAjB,eACA,eAAiBhB,QAAQ,CAAC,CACtBiB,OAAO,CAAE,CAAEC,aAAa,CAAE,UAAYC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA7B,CADa,CAAD,CAAzB,yCAAOC,MAAP,eAIAtB,SAAS,CAAC,UAAM,CACZ,GAAIW,KAAK,CAACC,KAAV,CAAiBC,QAAQ,CAACF,KAAK,CAACC,KAAP,CAAR,CACpB,CAFQ,CAEN,CAACD,KAAK,CAACC,KAAP,CAFM,CAAT,CAIA;AACA,GAAMW,CAAAA,YAAY,0FAAG,uLAETC,YAFS,CAEM,EAFN,CAIb,GAAIZ,KAAK,EAAIA,KAAK,CAACa,MAAnB,CAA2B,CACvB,IAASC,CAAT,CAAa,CAAb,CAAgBA,CAAC,CAAGd,KAAK,CAACa,MAA1B,CAAkCC,CAAC,EAAnC,CAAuC,CAC7BC,OAD6B,CACnBf,KAAK,CAACc,CAAD,CADc,CAEnCF,YAAY,CAACI,IAAb,CAAkB,CACdC,GAAG,CAAEF,OAAO,CAACE,GADC,CAEdC,OAAO,CAAEJ,CAFK,CAAlB,EAIH,CACJ,CAZY,KAcTF,YAAY,EAAIA,YAAY,CAACC,MAdpB,0BAeTV,UAAU,CAAC,IAAD,CAAV,CAfS,sBAgBcN,CAAAA,QAAQ,CAACC,QAAT,CAAkBqB,WAAlB,CAA8BP,YAA9B,CAA4CF,MAA5C,CAhBd,QAgBHU,QAhBG,eAiBT,GAAIA,QAAQ,EAAIA,QAAQ,CAACC,MAAT,GAAoB,GAApC,CAAyClB,UAAU,CAAC,KAAD,CAAV,CAjBhC,wFAoBb,eAAW,CACPA,UAAU,CAAC,KAAD,CAAV,CACAmB,OAAO,CAACC,GAAR,cACH,CAvBY,qEAAH,kBAAZZ,CAAAA,YAAY,0CAAlB,CA2BA;AACA,GAAMa,CAAAA,YAAY,CAAG,QAAfA,CAAAA,YAAe,CAAAC,IAAI,CAAI,CACzB,GAAIrB,QAAQ,EAAIA,QAAQ,GAAKqB,IAA7B,CAAmC,CAC/BpB,SAAS,CAAC,IAAD,CAAT,CACH,CAFD,IAEO,CACHA,SAAS,CAACoB,IAAD,CAAT,CACH,CACJ,CAND,CAQA,GAAIvB,SAAJ,CAAe,mBAAO,KAAC,SAAD,IAAP,CAEf,mBACI,YAAK,SAAS,CAAC,gBAAf,uBACI,YAAK,SAAS,CAAC,kBAAf,uBACI,KAAC,eAAD,EACI,SAAS,CAAE,mBAACwB,KAAD,CAAW,wBAClB,GAAMC,CAAAA,QAAQ,CAAGD,KAAK,CAACE,MAAN,CAAaC,KAA9B,CACA,GAAMC,CAAAA,QAAQ,qBAAGJ,KAAK,CAACK,WAAT,6CAAG,mBAAmBF,KAApC,CAEA,GAAIC,QAAJ,CAAc9B,KAAK,CAACgC,MAAN,CAAaF,QAAb,CAAuB,CAAvB,CAA0B9B,KAAK,CAACgC,MAAN,CAAaL,QAAb,CAAuB,CAAvB,EAA0B,CAA1B,CAA1B,EACdhB,YAAY,GACf,CAPL,uBASI,KAAC,SAAD,EAAW,WAAW,CAAC,aAAvB,UACK,kBAACsB,QAAD,CAAWC,QAAX,qBACG,wCACI,GAAG,CAAED,QAAQ,CAACE,QADlB,EAEQF,QAAQ,CAACG,cAFjB,eAIKpC,KAAK,EAAIA,KAAK,CAACqC,GAAN,CAAU,SAACZ,IAAD,CAAOX,CAAP,qBAChB,KAAC,SAAD,EAEI,WAAW,CAAEW,IAAI,CAACR,GAFtB,CAGI,KAAK,CAAEH,CAHX,UAKK,kBAACmB,QAAD,CAAWC,QAAX,qBACG,uDACI,GAAG,CAAED,QAAQ,CAACE,QADlB,EAEQF,QAAQ,CAACK,cAFjB,EAGQL,QAAQ,CAACM,eAHjB,6BAMI,aACI,SAAS,CAAC,sCADd,CAEI,OAAO,CAAE,yBAAMf,CAAAA,YAAY,CAACC,IAAI,CAACe,IAAN,CAAlB,EAFb,wBAII,YAAK,SAAS,CAAC,sBAAf,uBACI,YAAK,GAAG,CAAEf,IAAI,CAACgB,KAAf,CAAsB,SAAS,CAAC,WAAhC,CAA4C,GAAG,CAAC,KAAhD,EADJ,EAJJ,cAOI,kCAAK,mBAAIhB,IAAI,CAACe,IAAT,EAAL,EAPJ,cAQI,YAAK,SAAS,CAAC,SAAf,uBACI,KAAC,IAAD,EACI,IAAI,CAAC,QADT,CAEI,EAAE,oCAA8Bf,IAAI,CAACR,GAAnC,SAFN,CAGI,SAAS,CAAC,uCAHd,uBAKI,KAAC,IAAD,EAAM,IAAI,CAAEzB,KAAZ,CAAmB,IAAI,CAAE,EAAzB,EALJ,EADJ,EARJ,GANJ,CA2BKY,QAAQ,EAAIA,QAAQ,GAAKqB,IAAI,CAACe,IAA9B,cACG,qBACKf,IAAI,CAACiB,QAAL,EAAiBjB,IAAI,CAACiB,QAAL,CAAcL,GAAd,CAAkB,SAACM,UAAD,CAAaC,CAAb,qBAChC,aAAK,SAAS,CAAC,oBAAf,wBACI,aAAK,SAAS,CAAC,iCAAf,CAAiD,SAAS,KAA1D,wBACI,YAAK,SAAS,CAAC,sBAAf,uBACI,YAAK,GAAG,CAAED,UAAU,CAACF,KAArB,CAA4B,SAAS,CAAC,WAAtC,CAAkD,GAAG,CAAC,KAAtD,EADJ,EADJ,cAII,kCAAK,mBAAIE,UAAU,CAACH,IAAf,EAAL,EAJJ,cAKI,YAAK,SAAS,CAAC,SAAf,uBACI,KAAC,IAAD,EACI,IAAI,CAAC,QADT,CAEI,EAAE,mCAA6BG,UAAU,CAAC1B,GAAxC,SAFN,CAGI,SAAS,CAAC,uCAHd,uBAKI,KAAC,IAAD,EAAM,IAAI,CAAEzB,KAAZ,CAAmB,IAAI,CAAE,EAAzB,EALJ,EADJ,EALJ,GADJ,CAmBKmD,UAAU,CAACD,QAAX,EAAuBC,UAAU,CAACD,QAAX,CAAoBL,GAApB,CAAwB,SAACQ,WAAD,CAAcC,CAAd,qBAC5C,YAAK,SAAS,CAAC,oBAAf,uBACI,aAAK,SAAS,CAAC,iCAAf,CAAiD,SAAS,KAA1D,wBACI,YAAK,SAAS,CAAC,sBAAf,uBACI,YAAK,GAAG,CAAED,WAAW,CAACJ,KAAtB,CAA6B,SAAS,CAAC,WAAvC,CAAmD,GAAG,CAAC,KAAvD,EADJ,EADJ,cAII,kCAAK,mBAAII,WAAW,CAACL,IAAhB,EAAL,EAJJ,cAKI,YAAK,SAAS,CAAC,SAAf,uBACI,KAAC,IAAD,EACI,IAAI,CAAC,QADT,CAEI,EAAE,oCAA8BK,WAAW,CAAC5B,GAA1C,SAFN,CAGI,SAAS,CAAC,uCAHd,uBAKI,KAAC,IAAD,EAAM,IAAI,CAAEzB,KAAZ,CAAmB,IAAI,CAAE,EAAzB,EALJ,EADJ,EALJ,GADJ,EAAyCsD,CAAzC,CAD4C,EAAxB,CAnB5B,GAAyCF,CAAzC,CADgC,EAAlB,CADtB,EADH,CA4CK,IAvEV,IADH,EALL,EACSnB,IAAI,CAACP,OADd,CADgB,EAAV,CAJd,GADH,EADL,EATJ,EADJ,EADJ,EADJ,CA6GH,CAhKD,CAkKA,cAAepB,CAAAA,QAAf","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport './style.scss'\nimport Icon from 'react-icons-kit'\nimport { Link } from 'react-router-dom'\nimport { edit2 } from 'react-icons-kit/feather'\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd'\nimport { PreLoader } from '../loading/Index'\n\nimport Requests from '../../utils/Requests/Index'\n\n\nconst Category = (props) => {\n    const [items, setItems] = useState([])\n    const [isLoading, setLoading] = useState(false)\n    const [isActive, setActive] = useState(null)\n    const [header] = useState({\n        headers: { Authorization: \"Bearer \" + localStorage.getItem('token') }\n    })\n\n    useEffect(() => {\n        if (props.items) setItems(props.items)\n    }, [props.items])\n\n    // Handle update index\n    const handleUpdate = async () => {\n        try {\n            let updatedItems = []\n\n            if (items && items.length) {\n                for (let i = 0; i < items.length; i++) {\n                    const element = items[i]\n                    updatedItems.push({\n                        _id: element._id,\n                        indexId: i\n                    })\n                }\n            }\n\n            if (updatedItems && updatedItems.length) {\n                setLoading(true)\n                const response = await Requests.Category.UpdateIndex(updatedItems, header)\n                if (response && response.status === 201) setLoading(false)\n            }\n        } catch (error) {\n            if (error) {\n                setLoading(false)\n                console.log(error)\n            }\n        }\n    }\n\n    // Handle active\n    const handleActive = item => {\n        if (isActive && isActive === item) {\n            setActive(null)\n        } else {\n            setActive(item)\n        }\n    }\n\n    if (isLoading) return <PreLoader />\n\n    return (\n        <div className=\"category-items\">\n            <div className=\"parent-container\">\n                <DragDropContext\n                    onDragEnd={(param) => {\n                        const srcIndex = param.source.index\n                        const desIndex = param.destination?.index\n\n                        if (desIndex) items.splice(desIndex, 0, items.splice(srcIndex, 1)[0])\n                        handleUpdate()\n                    }}\n                >\n                    <Droppable droppableId=\"droppable-1\">\n                        {(provided, snapshot) => (\n                            <div\n                                ref={provided.innerRef}\n                                {...provided.droppableProps}\n                            >\n                                {items && items.map((item, i) =>\n                                    <Draggable\n                                        key={item.indexId}\n                                        draggableId={item._id}\n                                        index={i}\n                                    >\n                                        {(provided, snapshot) => (\n                                            <div\n                                                ref={provided.innerRef}\n                                                {...provided.draggableProps}\n                                                {...provided.dragHandleProps}\n                                            >\n                                                {/* Parent Content */}\n                                                <div\n                                                    className=\"container-item shadow-sm d-flex item\"\n                                                    onClick={() => handleActive(item.name)}\n                                                >\n                                                    <div className=\"image-container pr-3\">\n                                                        <img src={item.image} className=\"img-fluid\" alt=\"...\" />\n                                                    </div>\n                                                    <div><p>{item.name}</p></div>\n                                                    <div className=\"ml-auto\">\n                                                        <Link\n                                                            type=\"button\"\n                                                            to={`/dashboard/category/Main/${item._id}/edit`}\n                                                            className=\"btn btn-sm shadow-none table-edit-btn\"\n                                                        >\n                                                            <Icon icon={edit2} size={20} />\n                                                        </Link>\n                                                    </div>\n                                                </div>\n\n                                                {/* Childrens */}\n\n                                                {isActive && isActive === item.name ?\n                                                    <div>\n                                                        {item.children && item.children.map((firstChild, j) =>\n                                                            <div className=\"children-container\" key={j}>\n                                                                <div className=\"container-item shadow-sm d-flex\" draggable>\n                                                                    <div className=\"image-container pr-3\">\n                                                                        <img src={firstChild.image} className=\"img-fluid\" alt=\"...\" />\n                                                                    </div>\n                                                                    <div><p>{firstChild.name}</p></div>\n                                                                    <div className=\"ml-auto\">\n                                                                        <Link\n                                                                            type=\"button\"\n                                                                            to={`/dashboard/category/Sub/${firstChild._id}/edit`}\n                                                                            className=\"btn btn-sm shadow-none table-edit-btn\"\n                                                                        >\n                                                                            <Icon icon={edit2} size={20} />\n                                                                        </Link>\n                                                                    </div>\n                                                                </div>\n\n\n                                                                {/* Second child */}\n                                                                {firstChild.children && firstChild.children.map((secondChild, k) =>\n                                                                    <div className=\"children-container\" key={k}>\n                                                                        <div className=\"container-item shadow-sm d-flex\" draggable>\n                                                                            <div className=\"image-container pr-3\">\n                                                                                <img src={secondChild.image} className=\"img-fluid\" alt=\"...\" />\n                                                                            </div>\n                                                                            <div><p>{secondChild.name}</p></div>\n                                                                            <div className=\"ml-auto\">\n                                                                                <Link\n                                                                                    type=\"button\"\n                                                                                    to={`/dashboard/category/Leaf/${secondChild._id}/edit`}\n                                                                                    className=\"btn btn-sm shadow-none table-edit-btn\"\n                                                                                >\n                                                                                    <Icon icon={edit2} size={20} />\n                                                                                </Link>\n                                                                            </div>\n                                                                        </div>\n                                                                    </div>\n                                                                )}\n                                                            </div>\n                                                        )}\n                                                    </div>\n                                                    : null}\n                                            </div>\n                                        )}\n                                    </Draggable>\n                                )}\n                            </div>\n                        )}\n                    </Droppable>\n                </DragDropContext>\n\n            </div>\n        </div>\n    );\n};\n\nexport default Category;"]},"metadata":{},"sourceType":"module"}