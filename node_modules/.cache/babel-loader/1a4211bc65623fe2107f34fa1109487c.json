{"ast":null,"code":"var _jsxFileName = \"D:\\\\previous\\\\src\\\\pages\\\\orders\\\\Create.js\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useEffect, useRef, useState } from 'react';\nimport './style.scss';\nimport Icon from 'react-icons-kit';\nimport CommaNumber from 'comma-number';\nimport { minus, plus } from 'react-icons-kit/feather';\nimport { SearchableSelect, SingleSelect } from '../../components/select';\nimport { districts } from '../../utils/location/districts';\nimport { Customer } from '../../components/form/order/Customer';\nimport { CouponApply } from '../../components/form/order/CouponApply';\nimport { toast, Slide } from 'react-toastify';\nimport Requests from '../../utils/Requests/Index';\nimport { useForm } from 'react-hook-form';\nimport { useHistory } from 'react-router-dom';\nimport { PaymentMethodForm } from '../../components/form/order/PaymentMethodForm';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\ntoast.configure({\n  autoClose: 1500,\n  transition: Slide,\n  position: \"top-right\",\n  hideProgressBar: false,\n  closeOnClick: true,\n  pauseOnHover: true,\n  draggable: true,\n  progress: undefined\n});\n\nconst Create = () => {\n  _s();\n\n  const selectedField = useRef();\n  const history = useHistory();\n  const {\n    register,\n    handleSubmit,\n    clearErrors,\n    setError,\n    errors\n  } = useForm();\n  const [placed, setPlaced] = useState(false);\n  const [loading, setLoading] = useState(false);\n  const [paymentMethod, setPaymentMethod] = useState(\"COD\");\n  const [selectedItems, setSelectedItems] = useState([]);\n  const [process, setProcess] = useState({\n    data: null,\n    loading: false\n  });\n  const [coupon, setCoupon] = useState({\n    loading: false,\n    message: {}\n  });\n  const [selectedCustomer, setSelectedCustomer] = useState(null);\n  const [selectedDivision, setSelectedDivision] = useState(null);\n  const [selectedDistrict, setSelectedDistrict] = useState(null);\n  const [selectedArea, setSelectedArea] = useState(null);\n  const [divisions, setDivisions] = useState([]);\n  const [districts, setDistricts] = useState([]);\n  const [areas, setAreas] = useState([]);\n  const [isCouponApplied, setIsCouponApplied] = useState(false);\n  const [subTotal, setSubTotal] = useState(null);\n  const [deliveryCharge, setDeliveryCharge] = useState(null);\n  const [total, setTotal] = useState(null);\n  const [header] = useState({\n    headers: {\n      Authorization: \"Bearer \" + localStorage.getItem(\"token\")\n    }\n  }); // Count total amount\n\n  const TotalAmount = (subTotal, dCharge) => {\n    return subTotal + dCharge;\n  }; // Handle product search from API\n\n\n  const handleProductSearch = async inputValue => {\n    let results = [];\n    const response = await Requests.Product.Search(inputValue, header);\n\n    if (response && response.data && response.data.length) {\n      for (let i = 0; i < response.data.length; i++) {\n        const element = response.data[i];\n        results.push({ ...element,\n          label: element.sku + ' - ' + element.name.slice(0, 40) + ' ...',\n          name: element.name.slice(0, 10) + ' ...',\n          quantity: 1,\n          value: element._id,\n          image: element.thumbnail\n        });\n      }\n    }\n\n    return results;\n  }; // Handle Selected products values\n\n\n  const handleSelectedProductsValues = data => setSelectedItems(data); // Increment Quantity\n\n\n  const incrementQuantity = key => {\n    let items = [...selectedItems];\n    let item = { ...items[key]\n    };\n    item.quantity += 1;\n    items[key] = item;\n    setSelectedItems(items);\n    setProcess({ ...process,\n      data: null\n    });\n    setCoupon({\n      loading: false,\n      message: {}\n    });\n  }; // Decrement Quantity\n\n\n  const decrementQuantity = key => {\n    let items = [...selectedItems];\n    let item = { ...items[key]\n    };\n    item.quantity -= 1;\n    items[key] = item;\n    setSelectedItems(items);\n    setProcess({ ...process,\n      data: null\n    });\n    setCoupon({\n      loading: false,\n      message: {}\n    });\n  };\n  /* fetch division */\n\n\n  const fetchDivision = useCallback(async () => {\n    const response = await Requests.Services.Shipping.MainShipping.DivisionList(header);\n    let items = [];\n\n    if (response && response.data) {\n      for (let i = 0; i < response.data.length; i++) {\n        const element = response.data[i];\n        items.push({\n          label: element.name,\n          value: element._id\n        });\n      }\n    }\n\n    setDivisions(items);\n  }, []);\n  /* fetch district */\n\n  const fetchDistrict = async id => {\n    const response = await Requests.Services.Shipping.MainShipping.DistrictList(id, header);\n    let items = [];\n\n    if (response && response.data) {\n      for (let i = 0; i < response.data.length; i++) {\n        const element = response.data[i];\n        items.push({\n          label: element.name,\n          value: element._id\n        });\n      }\n    }\n\n    setDistricts(items);\n  };\n  /* fetch area */\n\n\n  const fetchArea = async id => {\n    const response = await Requests.Services.Shipping.MainShipping.AreaList(id, header);\n    let items = [];\n\n    if (response && response.data) {\n      for (let i = 0; i < response.data.length; i++) {\n        const element = response.data[i];\n        items.push({\n          label: `${element.post_office} - ${element.post_code}`,\n          value: element._id\n        });\n      }\n    }\n\n    setAreas(items);\n  }; // Division\n\n\n  useEffect(() => {\n    fetchDivision();\n  }, [fetchDivision]); // Process Order\n\n  const processOrder = async data => {\n    let is_error = false;\n\n    if (!selectedDivision) {\n      setError(\"division\", {\n        type: \"manual\",\n        message: \"Division is required.\"\n      });\n      is_error = true;\n    }\n\n    if (!selectedDistrict) {\n      setError(\"district\", {\n        type: \"manual\",\n        message: \"District is required.\"\n      });\n      is_error = true;\n    }\n\n    if (!selectedArea) {\n      setError(\"area\", {\n        type: \"manual\",\n        message: \"Area is required.\"\n      });\n      is_error = true;\n    }\n\n    if (is_error) return;\n    let products = [];\n\n    if (selectedItems && selectedItems.length) {\n      for (let i = 0; i < selectedItems.length; i++) {\n        const element = selectedItems[i];\n        products.push({\n          quantity: element.quantity,\n          _id: element.value\n        });\n      }\n    }\n\n    const formData = {\n      products: [...products],\n      division: selectedDivision.value,\n      district: selectedDistrict.value,\n      area: selectedArea.value\n    };\n    setProcess({ ...process,\n      loading: true\n    });\n    const response = await Requests.Order.ProcessOrder(formData, header);\n    setProcess({\n      data: response,\n      loading: false\n    });\n    setSubTotal(response && response.subTotal ? response.subTotal : 0);\n    setDeliveryCharge(response && response.shippingCharge ? response.shippingCharge : 0);\n    setTotal(response && response.totalPrice ? response.totalPrice : 0);\n  }; // Handle coupon\n\n\n  const handleCoupon = async data => {\n    let products = [];\n\n    if (selectedItems && selectedItems.length) {\n      for (let i = 0; i < selectedItems.length; i++) {\n        const element = selectedItems[i];\n        products.push({ ...element,\n          quantity: element.quantity,\n          _id: element.value\n        });\n      }\n    }\n\n    const formData = { ...data,\n      products: products,\n      // shippingLocation: area.value,\n      processId: process.data.processId\n    };\n    setCoupon({ ...coupon,\n      loading: true\n    });\n    const response = await Requests.Order.ApplyCoupon(formData, header);\n\n    if (response && response.sucess) {\n      toast.success(response.message);\n      setIsCouponApplied(true);\n      setProcess({ ...process,\n        data: { ...process.data,\n          coupon: response.data && response.data.available_coupon ? response.data.available_coupon : null,\n          subTotal: response.data && response.data.subTotal ? response.data.subTotal : null,\n          shippingCharge: response.data && response.data.shippingCharge ? response.data.shippingCharge : null,\n          totalPrice: response.data && response.data.totalPrice ? response.data.totalPrice : null\n        }\n      });\n      setCoupon({ ...coupon,\n        loading: false,\n        message: {\n          type: \"success\",\n          value: response.message\n        }\n      });\n    } else {\n      setCoupon({ ...coupon,\n        loading: false\n      });\n    }\n  }; // Handle customer search from API\n\n\n  const handleCustomerSearch = async inputValue => {\n    let results = [];\n    const response = await Requests.Order.SearchCustomer(inputValue, header);\n\n    if (response && response.data && response.data.length) {\n      for (let i = 0; i < response.data.length; i++) {\n        const element = response.data[i];\n        results.push({\n          value: element._id,\n          label: element.name + \"-\" + element.phone,\n          name: element.name,\n          email: element.email,\n          phone: element.phone,\n          shippingArea: element.shippingAddress,\n          deliveryAddress: element.deliveryAddress,\n          postCode: element.postCode,\n          postOffice: element.postOffice,\n          upazila: element.upazila\n        });\n      }\n    }\n\n    return results;\n  };\n\n  const payment = async data => {\n    console.log(\"payment\", data);\n  }; // Place order\n\n\n  const placeOrder = async data => {\n    const formData = { ...data,\n      // shippingArea: area && area.value ? area.value : null,\n      // postCode: postCode && postCode.value ? postCode.value : null,\n      // postOffice: postOffice || null,\n      coupon: process.data && process.data.coupon && process.data.coupon._id ? process.data.coupon._id : null,\n      subTotal: subTotal || 0,\n      shippingCharge: deliveryCharge || 0,\n      totalPrice: total || 0,\n      // upazila: upzila || null,\n      isCouponApplied: isCouponApplied,\n      couponInfo: process.data && process.data.coupon ? process.data.coupon : null,\n      products: JSON.stringify(process.data && process.data.products ? process.data.products : null)\n    };\n    setPlaced(true);\n    const response = await Requests.Order.PlaceOrder(formData, header);\n\n    if (response) {\n      setSelectedItems([]);\n      history.push(\"/dashboard/order\");\n    }\n\n    setPlaced(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"order-create-container\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-fluid\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12 col-padding\",\n          children: /*#__PURE__*/_jsxDEV(SearchableSelect, {\n            isMulti: true,\n            placeholder: \"Search product by SKU\",\n            search: handleProductSearch,\n            values: handleSelectedProductsValues\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 329,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 328,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12 col-padding selected-products-container\",\n          children: selectedItems && selectedItems.map((item, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card border-0 p-2\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-body shadow-sm bg-white rounded text-center\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"img-container\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: item.image,\n                  className: \"img-fluid\",\n                  alt: \"...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 343,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 342,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: item.name\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 345,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex mt-2\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    children: [\"Quantity: \", item.quantity]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 348,\n                    columnNumber: 46\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 348,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"ml-auto pt-2\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn btn-sm shadow-none rounded-circle btn-desc\",\n                    disabled: item.quantity <= 1,\n                    onClick: () => decrementQuantity(i),\n                    children: /*#__PURE__*/_jsxDEV(Icon, {\n                      icon: minus,\n                      size: 15\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 354,\n                      columnNumber: 49\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 350,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    className: \"btn btn-sm shadow-none rounded-circle btn-inc ml-1\",\n                    onClick: () => incrementQuantity(i),\n                    children: /*#__PURE__*/_jsxDEV(Icon, {\n                      icon: plus,\n                      size: 15\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 359,\n                      columnNumber: 49\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 356,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 349,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 347,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 341,\n              columnNumber: 33\n            }, this)\n          }, i, false, {\n            fileName: _jsxFileName,\n            lineNumber: 340,\n            columnNumber: 29\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 338,\n          columnNumber: 21\n        }, this), selectedItems && selectedItems.length ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12\",\n          children: /*#__PURE__*/_jsxDEV(\"form\", {\n            onSubmit: handleSubmit(processOrder),\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"row\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-12 col-lg-6\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group mb-4\",\n                  children: [errors.division && errors.division.message ? /*#__PURE__*/_jsxDEV(\"small\", {\n                    className: \"text-danger\",\n                    children: errors.division && errors.division.message\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 377,\n                    columnNumber: 49\n                  }, this) : /*#__PURE__*/_jsxDEV(\"small\", {\n                    children: [\"Select division\", /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-danger\",\n                      children: \"*\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 378,\n                      columnNumber: 71\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 378,\n                    columnNumber: 49\n                  }, this), /*#__PURE__*/_jsxDEV(SingleSelect, {\n                    options: divisions,\n                    placeholder: 'division',\n                    borderRadius: 4,\n                    error: errors.division && errors.division.message,\n                    value: event => {\n                      setSelectedDivision(event);\n                      fetchDistrict(event.value);\n                      clearErrors(\"division\");\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 381,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 375,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 374,\n                columnNumber: 37\n              }, this), selectedDivision ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-12 col-lg-6\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group mb-4\",\n                  children: [errors.district && errors.district.message ? /*#__PURE__*/_jsxDEV(\"small\", {\n                    className: \"text-danger\",\n                    children: errors.district && errors.district.message\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 400,\n                    columnNumber: 53\n                  }, this) : /*#__PURE__*/_jsxDEV(\"small\", {\n                    children: [\"Select district\", /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-danger\",\n                      children: \"*\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 401,\n                      columnNumber: 75\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 401,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(SingleSelect, {\n                    options: districts,\n                    placeholder: 'district',\n                    borderRadius: 4,\n                    error: errors.district && errors.district.message,\n                    value: event => {\n                      setSelectedDistrict(event);\n                      fetchArea(event.value);\n                      clearErrors(\"district\");\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 404,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 398,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 397,\n                columnNumber: 41\n              }, this) : null, selectedDistrict ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-12 col-lg-6\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"form-group mb-4\",\n                  children: [errors.area && errors.area.message ? /*#__PURE__*/_jsxDEV(\"small\", {\n                    className: \"text-danger\",\n                    children: errors.area && errors.area.message\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 425,\n                    columnNumber: 53\n                  }, this) : /*#__PURE__*/_jsxDEV(\"small\", {\n                    children: [\"Select Area\", /*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"text-danger\",\n                      children: \"*\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 426,\n                      columnNumber: 71\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 426,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(SingleSelect, {\n                    options: areas,\n                    placeholder: 'area',\n                    borderRadius: 4,\n                    error: errors.area && errors.area.message,\n                    value: event => {\n                      setSelectedArea(event);\n                      clearErrors(\"area\");\n                    }\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 429,\n                    columnNumber: 49\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 423,\n                  columnNumber: 45\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 422,\n                columnNumber: 41\n              }, this) : null, /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-12 text-center py-3\",\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"btn shadow-none success-btn px-4 py-2\",\n                  disabled: process.loading // onClick={processOrder}\n                  ,\n                  children: process.loading ? \"Processing ...\" : \"Process Order\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 444,\n                  columnNumber: 41\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 443,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 372,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 371,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 370,\n          columnNumber: 25\n        }, this) : null, selectedItems && selectedItems.length && process.data ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12 py-3\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card border-0 shadow-sm\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-body p-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"form-group mb-4\",\n                    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                      children: \"Payment method\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 464,\n                      columnNumber: 49\n                    }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n                      name: \"paymentMethod\",\n                      className: \"form-control shadow-none\",\n                      defaultValue: \"COD\",\n                      onChange: e => setPaymentMethod(e.target.value),\n                      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"\",\n                        children: \"--- Select Option ---\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 472,\n                        columnNumber: 53\n                      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"COD\",\n                        children: \"COD\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 473,\n                        columnNumber: 53\n                      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"Paid\",\n                        children: \"Paid\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 474,\n                        columnNumber: 53\n                      }, this), /*#__PURE__*/_jsxDEV(\"option\", {\n                        value: \"Partial Paid\",\n                        children: \"Partial Paid\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 475,\n                        columnNumber: 53\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 466,\n                      columnNumber: 49\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 463,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 462,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(PaymentMethodForm, {\n                  loading: loading,\n                  paymentMethod: paymentMethod,\n                  value: data => payment(data)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 479,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 460,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-muted mb-1\",\n                    children: \"Sub-Total\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 487,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-muted mb-1\",\n                    children: \"Delivery charge \"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 488,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 486,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"ml-auto\",\n                  children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-muted mb-1\",\n                    children: [\": \\u09F3. \", CommaNumber(subTotal)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 492,\n                    columnNumber: 45\n                  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-muted mb-1\",\n                    children: [\": \\u09F3. \", CommaNumber(deliveryCharge)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 493,\n                    columnNumber: 45\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 491,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 485,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"hr\", {\n                className: \"my-2\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 496,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"mb-1\",\n                    children: \"Total\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 499,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 498,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"ml-auto\",\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"mb-1\",\n                    children: [\": \\u09F3. \", CommaNumber(total)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 503,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 501,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 497,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 506,\n                columnNumber: 37\n              }, this), /*#__PURE__*/_jsxDEV(CouponApply, {\n                loading: coupon.loading,\n                message: coupon.message,\n                value: handleCoupon\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 508,\n                columnNumber: 37\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 459,\n              columnNumber: 33\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 458,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 457,\n          columnNumber: 25\n        }, this) : null, selectedItems && selectedItems.length && process.data ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-12 py-3\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"card border-0 shadow-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-header rounded border-0 bg-white p-3 p-lg-4\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-md-flex\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"h5\", {\n                    className: \"mb-0\",\n                    children: \"Customer Information\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 525,\n                    columnNumber: 46\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 525,\n                  columnNumber: 41\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"ml-md-auto pt-3 pt-md-0\",\n                  style: {\n                    width: 250\n                  },\n                  children: /*#__PURE__*/_jsxDEV(SearchableSelect, {\n                    placeholder: \"Search customer\",\n                    search: handleCustomerSearch,\n                    values: data => setSelectedCustomer(data)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 527,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 526,\n                  columnNumber: 41\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 524,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 523,\n              columnNumber: 33\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"card-body border-top p-3 p-lg-4\",\n              children: /*#__PURE__*/_jsxDEV(Customer, {\n                loading: placed,\n                data: selectedCustomer,\n                value: data => placeOrder(data)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 536,\n                columnNumber: 37\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 535,\n              columnNumber: 33\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 522,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 521,\n          columnNumber: 25\n        }, this) : null]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 325,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 324,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 323,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Create, \"AtvlEyrgn6/vvB4abZDJTDhV6oA=\", false, function () {\n  return [useHistory, useForm];\n});\n\n_c = Create;\nexport default Create;\n\nvar _c;\n\n$RefreshReg$(_c, \"Create\");","map":{"version":3,"sources":["D:/previous/src/pages/orders/Create.js"],"names":["React","useCallback","useEffect","useRef","useState","Icon","CommaNumber","minus","plus","SearchableSelect","SingleSelect","districts","Customer","CouponApply","toast","Slide","Requests","useForm","useHistory","PaymentMethodForm","configure","autoClose","transition","position","hideProgressBar","closeOnClick","pauseOnHover","draggable","progress","undefined","Create","selectedField","history","register","handleSubmit","clearErrors","setError","errors","placed","setPlaced","loading","setLoading","paymentMethod","setPaymentMethod","selectedItems","setSelectedItems","process","setProcess","data","coupon","setCoupon","message","selectedCustomer","setSelectedCustomer","selectedDivision","setSelectedDivision","selectedDistrict","setSelectedDistrict","selectedArea","setSelectedArea","divisions","setDivisions","setDistricts","areas","setAreas","isCouponApplied","setIsCouponApplied","subTotal","setSubTotal","deliveryCharge","setDeliveryCharge","total","setTotal","header","headers","Authorization","localStorage","getItem","TotalAmount","dCharge","handleProductSearch","inputValue","results","response","Product","Search","length","i","element","push","label","sku","name","slice","quantity","value","_id","image","thumbnail","handleSelectedProductsValues","incrementQuantity","key","items","item","decrementQuantity","fetchDivision","Services","Shipping","MainShipping","DivisionList","fetchDistrict","id","DistrictList","fetchArea","AreaList","post_office","post_code","processOrder","is_error","type","products","formData","division","district","area","Order","ProcessOrder","shippingCharge","totalPrice","handleCoupon","processId","ApplyCoupon","sucess","success","available_coupon","handleCustomerSearch","SearchCustomer","phone","email","shippingArea","shippingAddress","deliveryAddress","postCode","postOffice","upazila","payment","console","log","placeOrder","couponInfo","JSON","stringify","PlaceOrder","map","event","e","target","width"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useRef, useState } from 'react'\nimport './style.scss'\nimport Icon from 'react-icons-kit'\nimport CommaNumber from 'comma-number'\nimport { minus, plus } from 'react-icons-kit/feather'\nimport { SearchableSelect, SingleSelect } from '../../components/select'\nimport { districts } from '../../utils/location/districts'\nimport { Customer } from '../../components/form/order/Customer'\nimport { CouponApply } from '../../components/form/order/CouponApply'\nimport { toast, Slide } from 'react-toastify'\nimport Requests from '../../utils/Requests/Index'\nimport { useForm } from 'react-hook-form'\nimport { useHistory } from 'react-router-dom'\nimport { PaymentMethodForm } from '../../components/form/order/PaymentMethodForm'\n\ntoast.configure({\n    autoClose: 1500,\n    transition: Slide,\n    position: \"top-right\",\n    hideProgressBar: false,\n    closeOnClick: true,\n    pauseOnHover: true,\n    draggable: true,\n    progress: undefined,\n})\n\nconst Create = () => {\n    const selectedField = useRef()\n    const history = useHistory()\n    const { register, handleSubmit, clearErrors, setError, errors } = useForm()\n    const [placed, setPlaced] = useState(false)\n    const [loading, setLoading] = useState(false)\n    const [paymentMethod, setPaymentMethod] = useState(\"COD\")\n    const [selectedItems, setSelectedItems] = useState([])\n    const [process, setProcess] = useState({ data: null, loading: false })\n    const [coupon, setCoupon] = useState({ loading: false, message: {} })\n    const [selectedCustomer, setSelectedCustomer] = useState(null)\n    const [selectedDivision, setSelectedDivision] = useState(null)\n    const [selectedDistrict, setSelectedDistrict] = useState(null)\n    const [selectedArea, setSelectedArea] = useState(null)\n    const [divisions, setDivisions] = useState([])\n    const [districts, setDistricts] = useState([])\n    const [areas, setAreas] = useState([])\n    const [isCouponApplied, setIsCouponApplied] = useState(false)\n    const [subTotal, setSubTotal] = useState(null)\n    const [deliveryCharge, setDeliveryCharge] = useState(null)\n    const [total, setTotal] = useState(null)\n    const [header] = useState({\n        headers: { Authorization: \"Bearer \" + localStorage.getItem(\"token\") }\n    })\n\n    // Count total amount\n    const TotalAmount = (subTotal, dCharge) => {\n        return subTotal + dCharge\n    }\n\n    // Handle product search from API\n    const handleProductSearch = async (inputValue) => {\n        let results = []\n        const response = await Requests.Product.Search(inputValue, header)\n\n        if (response && response.data && response.data.length) {\n            for (let i = 0; i < response.data.length; i++) {\n                const element = response.data[i]\n                results.push({\n                    ...element,\n                    label: element.sku + ' - ' + element.name.slice(0, 40) + ' ...',\n                    name: element.name.slice(0, 10) + ' ...',\n                    quantity: 1,\n                    value: element._id,\n                    image: element.thumbnail\n                })\n            }\n        }\n        return results\n    }\n\n    // Handle Selected products values\n    const handleSelectedProductsValues = data => setSelectedItems(data)\n\n    // Increment Quantity\n    const incrementQuantity = key => {\n        let items = [...selectedItems]\n        let item = { ...items[key] }\n        item.quantity += 1\n\n        items[key] = item\n        setSelectedItems(items)\n        setProcess({ ...process, data: null })\n        setCoupon({ loading: false, message: {} })\n    }\n\n    // Decrement Quantity\n    const decrementQuantity = key => {\n        let items = [...selectedItems]\n        let item = { ...items[key] }\n        item.quantity -= 1\n\n        items[key] = item\n        setSelectedItems(items)\n        setProcess({ ...process, data: null })\n        setCoupon({ loading: false, message: {} })\n    }\n\n    /* fetch division */\n    const fetchDivision = useCallback(async () => {\n        const response = await Requests.Services.Shipping.MainShipping.DivisionList(header)\n        let items = []\n        if (response && response.data) {\n            for (let i = 0; i < response.data.length; i++) {\n                const element = response.data[i]\n                items.push({\n                    label: element.name,\n                    value: element._id,\n                })\n            }\n        }\n        setDivisions(items)\n    }, [])\n\n    /* fetch district */\n    const fetchDistrict = async (id) => {\n        const response = await Requests.Services.Shipping.MainShipping.DistrictList(id, header)\n        let items = []\n        if (response && response.data) {\n            for (let i = 0; i < response.data.length; i++) {\n                const element = response.data[i]\n                items.push({\n                    label: element.name,\n                    value: element._id,\n                })\n            }\n        }\n        setDistricts(items)\n    }\n\n    /* fetch area */\n    const fetchArea = async (id) => {\n        const response = await Requests.Services.Shipping.MainShipping.AreaList(id, header)\n        let items = []\n        if (response && response.data) {\n            for (let i = 0; i < response.data.length; i++) {\n                const element = response.data[i]\n                items.push({\n                    label: `${element.post_office} - ${element.post_code}`,\n                    value: element._id,\n                })\n            }\n        }\n        setAreas(items)\n    }\n\n    // Division\n    useEffect(() => {\n        fetchDivision()\n    }, [fetchDivision])\n\n    // Process Order\n    const processOrder = async (data) => {\n\n        let is_error = false\n\n        if (!selectedDivision) {\n            setError(\"division\", {\n                type: \"manual\",\n                message: \"Division is required.\"\n            })\n            is_error = true\n        }\n        if (!selectedDistrict) {\n            setError(\"district\", {\n                type: \"manual\",\n                message: \"District is required.\"\n            })\n            is_error = true\n        }\n        if (!selectedArea) {\n            setError(\"area\", {\n                type: \"manual\",\n                message: \"Area is required.\"\n            })\n            is_error = true\n        }\n\n        if (is_error) return\n\n        let products = []\n\n        if (selectedItems && selectedItems.length) {\n            for (let i = 0; i < selectedItems.length; i++) {\n                const element = selectedItems[i]\n                products.push({\n                    quantity: element.quantity,\n                    _id: element.value\n                })\n            }\n        }\n\n        const formData = {\n            products: [...products],\n            division: selectedDivision.value,\n            district: selectedDistrict.value,\n            area: selectedArea.value\n        }\n\n        setProcess({ ...process, loading: true })\n        const response = await Requests.Order.ProcessOrder(formData, header)\n        setProcess({ data: response, loading: false })\n        setSubTotal(response && response.subTotal ? response.subTotal : 0)\n        setDeliveryCharge(response && response.shippingCharge ? response.shippingCharge : 0)\n        setTotal(response && response.totalPrice ? response.totalPrice : 0)\n\n    }\n\n    // Handle coupon\n    const handleCoupon = async (data) => {\n\n        let products = []\n\n        if (selectedItems && selectedItems.length) {\n            for (let i = 0; i < selectedItems.length; i++) {\n                const element = selectedItems[i]\n                products.push({\n                    ...element,\n                    quantity: element.quantity,\n                    _id: element.value\n                })\n            }\n        }\n        const formData = {\n            ...data,\n            products: products,\n            // shippingLocation: area.value,\n            processId: process.data.processId\n        }\n\n        setCoupon({ ...coupon, loading: true })\n        const response = await Requests.Order.ApplyCoupon(formData, header)\n\n        if (response && response.sucess) {\n            toast.success(response.message)\n            setIsCouponApplied(true)\n            setProcess({\n                ...process, data: {\n                    ...process.data,\n                    coupon: response.data && response.data.available_coupon ? response.data.available_coupon : null,\n                    subTotal: response.data && response.data.subTotal ? response.data.subTotal : null,\n                    shippingCharge: response.data && response.data.shippingCharge ? response.data.shippingCharge : null,\n                    totalPrice: response.data && response.data.totalPrice ? response.data.totalPrice : null\n                }\n            })\n            setCoupon({ ...coupon, loading: false, message: { type: \"success\", value: response.message } })\n\n        } else {\n            setCoupon({ ...coupon, loading: false })\n        }\n\n    }\n\n    // Handle customer search from API\n    const handleCustomerSearch = async (inputValue) => {\n        let results = []\n        const response = await Requests.Order.SearchCustomer(inputValue, header)\n\n        if (response && response.data && response.data.length) {\n            for (let i = 0; i < response.data.length; i++) {\n                const element = response.data[i]\n                results.push({\n                    value: element._id,\n                    label: element.name + \"-\" + element.phone,\n                    name: element.name,\n                    email: element.email,\n                    phone: element.phone,\n                    shippingArea: element.shippingAddress,\n                    deliveryAddress: element.deliveryAddress,\n                    postCode: element.postCode,\n                    postOffice: element.postOffice,\n                    upazila: element.upazila\n                })\n            }\n        }\n\n        return results\n    }\n\n    const payment = async data => {\n\n        console.log(\"payment\", data);\n\n\n\n    }\n\n    // Place order\n    const placeOrder = async data => {\n\n        const formData = {\n            ...data,\n            // shippingArea: area && area.value ? area.value : null,\n            // postCode: postCode && postCode.value ? postCode.value : null,\n            // postOffice: postOffice || null,\n            coupon: process.data && process.data.coupon && process.data.coupon._id ? process.data.coupon._id : null,\n            subTotal: subTotal || 0,\n            shippingCharge: deliveryCharge || 0,\n            totalPrice: total || 0,\n            // upazila: upzila || null,\n            isCouponApplied: isCouponApplied,\n            couponInfo: process.data && process.data.coupon ? process.data.coupon : null,\n            products: JSON.stringify(process.data && process.data.products ? process.data.products : null)\n        }\n\n        setPlaced(true)\n        const response = await Requests.Order.PlaceOrder(formData, header)\n        if (response) {\n            setSelectedItems([])\n            history.push(\"/dashboard/order\")\n        }\n        setPlaced(false)\n    }\n\n\n    return (\n        <div className=\"order-create-container\">\n            <div className=\"container-fluid\">\n                <div className=\"row\">\n\n                    {/* Header & search container */}\n                    <div className=\"col-12 col-padding\">\n                        <SearchableSelect\n                            isMulti={true}\n                            placeholder=\"Search product by SKU\"\n                            search={handleProductSearch}\n                            values={handleSelectedProductsValues}\n                        />\n                    </div>\n\n                    {/* Selected items container */}\n                    <div className=\"col-12 col-padding selected-products-container\">\n                        {selectedItems && selectedItems.map((item, i) =>\n                            <div className=\"card border-0 p-2\" key={i}>\n                                <div className=\"card-body shadow-sm bg-white rounded text-center\">\n                                    <div className=\"img-container\">\n                                        <img src={item.image} className=\"img-fluid\" alt=\"...\" />\n                                    </div>\n                                    <p>{item.name}</p>\n\n                                    <div className=\"d-flex mt-2\">\n                                        <div><p>Quantity: {item.quantity}</p></div>\n                                        <div className=\"ml-auto pt-2\">\n                                            <button className=\"btn btn-sm shadow-none rounded-circle btn-desc\"\n                                                disabled={item.quantity <= 1}\n                                                onClick={() => decrementQuantity(i)}\n                                            >\n                                                <Icon icon={minus} size={15} />\n                                            </button>\n                                            <button className=\"btn btn-sm shadow-none rounded-circle btn-inc ml-1\"\n                                                onClick={() => incrementQuantity(i)}\n                                            >\n                                                <Icon icon={plus} size={15} />\n                                            </button>\n                                        </div>\n                                    </div>\n                                </div>\n                            </div>\n                        )}\n                    </div>\n\n                    {/* Process Order Button */}\n                    {selectedItems && selectedItems.length ?\n                        <div className='col-12'>\n                            <form onSubmit={handleSubmit(processOrder)}>\n                                <div className='row'>\n                                    {/* Division */}\n                                    <div className=\"col-12 col-lg-6\">\n                                        <div className=\"form-group mb-4\">\n                                            {errors.division && errors.division.message ?\n                                                <small className=\"text-danger\">{errors.division && errors.division.message}</small> :\n                                                <small>Select division<span className=\"text-danger\">*</span></small>\n                                            }\n\n                                            <SingleSelect\n                                                options={divisions}\n                                                placeholder={'division'}\n                                                borderRadius={4}\n                                                error={errors.division && errors.division.message}\n                                                value={(event) => {\n                                                    setSelectedDivision(event)\n                                                    fetchDistrict(event.value)\n                                                    clearErrors(\"division\")\n                                                }}\n                                            />\n                                        </div>\n                                    </div>\n\n                                    {/* District */}\n                                    {selectedDivision ?\n                                        <div className=\"col-12 col-lg-6\">\n                                            <div className=\"form-group mb-4\">\n                                                {errors.district && errors.district.message ?\n                                                    <small className=\"text-danger\">{errors.district && errors.district.message}</small> :\n                                                    <small>Select district<span className=\"text-danger\">*</span></small>\n                                                }\n\n                                                <SingleSelect\n                                                    options={districts}\n                                                    placeholder={'district'}\n                                                    borderRadius={4}\n                                                    error={errors.district && errors.district.message}\n                                                    value={(event) => {\n                                                        setSelectedDistrict(event)\n                                                        fetchArea(event.value)\n                                                        clearErrors(\"district\")\n                                                    }}\n                                                />\n                                            </div>\n                                        </div>\n                                        : null}\n\n\n                                    {/* Area */}\n                                    {selectedDistrict ?\n                                        <div className=\"col-12 col-lg-6\">\n                                            <div className=\"form-group mb-4\">\n                                                {errors.area && errors.area.message ?\n                                                    <small className=\"text-danger\">{errors.area && errors.area.message}</small> :\n                                                    <small>Select Area<span className=\"text-danger\">*</span></small>\n                                                }\n\n                                                <SingleSelect\n                                                    options={areas}\n                                                    placeholder={'area'}\n                                                    borderRadius={4}\n                                                    error={errors.area && errors.area.message}\n                                                    value={(event) => {\n                                                        setSelectedArea(event)\n                                                        clearErrors(\"area\")\n                                                    }}\n                                                />\n                                            </div>\n                                        </div>\n                                        : null}\n\n                                    <div className=\"col-12 text-center py-3\">\n                                        <button className=\"btn shadow-none success-btn px-4 py-2\"\n                                            disabled={process.loading}\n                                        // onClick={processOrder}\n                                        >{process.loading ? \"Processing ...\" : \"Process Order\"}</button>\n                                    </div>\n                                </div>\n                            </form>\n                        </div>\n                        : null\n                    }\n\n                    {/* Processing price */}\n                    {selectedItems && selectedItems.length && process.data ?\n                        <div className=\"col-12 py-3\">\n                            <div className=\"card border-0 shadow-sm\">\n                                <div className=\"card-body p-4\">\n                                    <div>\n                                        {/* Payment method */}\n                                        <div>\n                                            <div className=\"form-group mb-4\">\n                                                <p>Payment method</p>\n\n                                                <select\n                                                    name=\"paymentMethod\"\n                                                    className=\"form-control shadow-none\"\n                                                    defaultValue=\"COD\"\n                                                    onChange={(e) => setPaymentMethod(e.target.value)}\n                                                >\n                                                    <option value=\"\">--- Select Option ---</option>\n                                                    <option value=\"COD\">COD</option>\n                                                    <option value=\"Paid\">Paid</option>\n                                                    <option value=\"Partial Paid\">Partial Paid</option>\n                                                </select>\n                                            </div>\n                                        </div>\n                                        <PaymentMethodForm\n                                            loading={loading}\n                                            paymentMethod={paymentMethod}\n                                            value={data => payment(data)}\n                                        />\n                                    </div>\n                                    <div className=\"d-flex\">\n                                        <div>\n                                            <p className=\"text-muted mb-1\">Sub-Total</p>\n                                            <p className=\"text-muted mb-1\">Delivery charge </p>\n\n                                        </div>\n                                        <div className=\"ml-auto\">\n                                            <p className=\"text-muted mb-1\">: ৳. {CommaNumber(subTotal)}</p>\n                                            <p className=\"text-muted mb-1\">: ৳. {CommaNumber(deliveryCharge)}</p>\n                                        </div>\n                                    </div>\n                                    <hr className=\"my-2\" />\n                                    <div className=\"d-flex\">\n                                        <div>\n                                            <p className=\"mb-1\">Total</p>\n                                        </div>\n                                        <div className=\"ml-auto\">\n\n                                            <p className=\"mb-1\">: ৳. {CommaNumber(total)}</p>\n                                        </div>\n                                    </div>\n                                    <br />\n\n                                    <CouponApply\n                                        loading={coupon.loading}\n                                        message={coupon.message}\n                                        value={handleCoupon}\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        : null\n                    }\n\n                    {/* Customer selection */}\n                    {selectedItems && selectedItems.length && process.data ?\n                        <div className=\"col-12 py-3\">\n                            <div className=\"card border-0 shadow-sm\">\n                                <div className=\"card-header rounded border-0 bg-white p-3 p-lg-4\">\n                                    <div className=\"d-md-flex\">\n                                        <div><h5 className=\"mb-0\">Customer Information</h5></div>\n                                        <div className=\"ml-md-auto pt-3 pt-md-0\" style={{ width: 250 }}>\n                                            <SearchableSelect\n                                                placeholder=\"Search customer\"\n                                                search={handleCustomerSearch}\n                                                values={data => setSelectedCustomer(data)}\n                                            />\n                                        </div>\n                                    </div>\n                                </div>\n                                <div className=\"card-body border-top p-3 p-lg-4\">\n                                    <Customer\n                                        loading={placed}\n                                        data={selectedCustomer}\n                                        value={data => placeOrder(data)}\n                                    />\n                                </div>\n                            </div>\n                        </div>\n                        : null\n                    }\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default Create;\n"]},"metadata":{},"sourceType":"module"}