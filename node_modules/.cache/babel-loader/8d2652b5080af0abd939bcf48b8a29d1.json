{"ast":null,"code":"import _asyncToGenerator from\"D:/previous/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/previous/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\previous\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useCallback,useEffect,useState}from'react';import'./style.scss';import'react-toastify/dist/ReactToastify.css';import Icon from'react-icons-kit';import{toast}from'react-toastify';import{Link,useParams}from'react-router-dom';import{useForm}from'react-hook-form';import{chevronLeft}from'react-icons-kit/feather';import Requests from'../../utils/Requests/Index';import{PreLoader}from'../../components/loading/Index';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";toast.configure({autoClose:2000});var Edit=function Edit(){var _useParams=useParams(),id=_useParams.id;var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.errors;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),customer=_useState2[0],setCustomer=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isUpdate=_useState6[0],setUpdate=_useState6[1];var _useState7=useState({headers:{Authorization:\"Bearer \"+localStorage.getItem('token')}}),_useState8=_slicedToArray(_useState7,1),header=_useState8[0];// Fetch data\nvar fetchData=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Requests.Customer.Show(id,header);case 2:data=_context.sent;if(data)setCustomer(data);setLoading(false);case 5:case\"end\":return _context.stop();}}},_callee);})),[id,header]);useEffect(function(){fetchData();},[id,header,fetchData]);// Submit Form\nvar onSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;setUpdate(true);_context2.next=4;return Requests.Customer.Update(id,data,header);case 4:setUpdate(false);_context2.next=10;break;case 7:_context2.prev=7;_context2.t0=_context2[\"catch\"](0);if(_context2.t0)console.log(_context2.t0);case 10:case\"end\":return _context2.stop();}}},_callee2,null,[[0,7]]);}));return function onSubmit(_x){return _ref2.apply(this,arguments);};}();if(isLoading)return/*#__PURE__*/_jsx(PreLoader,{});return/*#__PURE__*/_jsx(\"div\",{className:\"store-customer pb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-padding\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card border-0 shadow-sm\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header p-3 p-lg-4 bg-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h6\",{className:\"mb-0\",children:\"Create Customer\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-auto\",children:/*#__PURE__*/_jsx(Link,{to:\"/dashboard/customer\",type:\"button\",className:\"btn shadow-none rounded-circle\",children:/*#__PURE__*/_jsx(Icon,{icon:chevronLeft,size:22})})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body p-4\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[errors.name&&errors.name.message?/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:errors.name&&errors.name.message}):/*#__PURE__*/_jsx(\"p\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",defaultValue:customer?customer.name:null,className:\"form-control shadow-none\",placeholder:\"Enter customer name\",ref:register({required:\"Name is required\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[errors.email&&errors.email.message?/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:errors.email&&errors.email.message}):/*#__PURE__*/_jsx(\"p\",{children:\"E-mail\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"email\",defaultValue:customer?customer.email:null,className:\"form-control shadow-none\",placeholder:\"Enter e-mail\",ref:register({required:\"E-mail is required\",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,message:\"Invalid email address\"}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[errors.phone&&errors.phone.message?/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:errors.phone&&errors.phone.message}):/*#__PURE__*/_jsx(\"p\",{children:\"Phone\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"phone\",defaultValue:customer?customer.phone:null,className:\"form-control shadow-none\",placeholder:\"Enter phone number\",ref:register({required:\"Phone is required\",pattern:{value:/^(?:\\+88|01)?\\d+$/,message:\"Phone number is not valid.\"}})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-right\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn shadow-none\",disabled:isUpdate,children:isUpdate?'Updating...':'Update'})})]})})]})})})})});};export default Edit;","map":{"version":3,"sources":["D:/previous/src/pages/customer/Edit.js"],"names":["React","useCallback","useEffect","useState","Icon","toast","Link","useParams","useForm","chevronLeft","Requests","PreLoader","configure","autoClose","Edit","id","register","handleSubmit","errors","customer","setCustomer","isLoading","setLoading","isUpdate","setUpdate","headers","Authorization","localStorage","getItem","header","fetchData","Customer","Show","data","onSubmit","Update","console","log","name","message","required","email","pattern","value","phone"],"mappings":"4SAAA,MAAOA,CAAAA,KAAP,EAAgBC,WAAhB,CAA6BC,SAA7B,CAAwCC,QAAxC,KAAwD,OAAxD,CACA,MAAO,cAAP,CACA,MAAO,uCAAP,CACA,MAAOC,CAAAA,IAAP,KAAiB,iBAAjB,CACA,OAASC,KAAT,KAAsB,gBAAtB,CACA,OAASC,IAAT,CAAeC,SAAf,KAAgC,kBAAhC,CACA,OAASC,OAAT,KAAwB,iBAAxB,CACA,OAASC,WAAT,KAA4B,yBAA5B,CACA,MAAOC,CAAAA,QAAP,KAAqB,4BAArB,CAEA,OAASC,SAAT,KAA0B,gCAA1B,C,wFAEAN,KAAK,CAACO,SAAN,CAAgB,CAAEC,SAAS,CAAE,IAAb,CAAhB,EACA,GAAMC,CAAAA,IAAI,CAAG,QAAPA,CAAAA,IAAO,EAAM,CACf,eAAeP,SAAS,EAAxB,CAAQQ,EAAR,YAAQA,EAAR,CACA,aAA2CP,OAAO,EAAlD,CAAQQ,QAAR,UAAQA,QAAR,CAAkBC,YAAlB,UAAkBA,YAAlB,CAAgCC,MAAhC,UAAgCA,MAAhC,CACA,cAAgCf,QAAQ,CAAC,EAAD,CAAxC,wCAAOgB,QAAP,eAAiBC,WAAjB,eACA,eAAgCjB,QAAQ,CAAC,IAAD,CAAxC,yCAAOkB,SAAP,eAAkBC,UAAlB,eACA,eAA8BnB,QAAQ,CAAC,KAAD,CAAtC,yCAAOoB,QAAP,eAAiBC,SAAjB,eACA,eAAiBrB,QAAQ,CAAC,CACtBsB,OAAO,CAAE,CAAEC,aAAa,CAAE,UAAYC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA7B,CADa,CAAD,CAAzB,yCAAOC,MAAP,eAIA;AACA,GAAMC,CAAAA,SAAS,CAAG7B,WAAW,sEAAC,kKACPS,CAAAA,QAAQ,CAACqB,QAAT,CAAkBC,IAAlB,CAAuBjB,EAAvB,CAA2Bc,MAA3B,CADO,QACpBI,IADoB,eAE1B,GAAIA,IAAJ,CAAUb,WAAW,CAACa,IAAD,CAAX,CACVX,UAAU,CAAC,KAAD,CAAV,CAH0B,sDAAD,GAI1B,CAACP,EAAD,CAAKc,MAAL,CAJ0B,CAA7B,CAMA3B,SAAS,CAAC,UAAM,CACZ4B,SAAS,GACZ,CAFQ,CAEN,CAACf,EAAD,CAAKc,MAAL,CAAaC,SAAb,CAFM,CAAT,CAIA;AACA,GAAMI,CAAAA,QAAQ,2FAAG,kBAAOD,IAAP,uIAETT,SAAS,CAAC,IAAD,CAAT,CAFS,uBAGHd,CAAAA,QAAQ,CAACqB,QAAT,CAAkBI,MAAlB,CAAyBpB,EAAzB,CAA6BkB,IAA7B,CAAmCJ,MAAnC,CAHG,QAITL,SAAS,CAAC,KAAD,CAAT,CAJS,mFAMT,gBAAWY,OAAO,CAACC,GAAR,eANF,sEAAH,kBAARH,CAAAA,QAAQ,6CAAd,CAUA,GAAIb,SAAJ,CAAe,mBAAO,KAAC,SAAD,IAAP,CAEf,mBACI,YAAK,SAAS,CAAC,qBAAf,uBACI,YAAK,SAAS,CAAC,iBAAf,uBACI,YAAK,SAAS,CAAC,KAAf,uBACI,YAAK,SAAS,CAAC,oBAAf,uBACI,aAAK,SAAS,CAAC,yBAAf,wBACI,YAAK,SAAS,CAAC,iCAAf,uBACI,aAAK,SAAS,CAAC,QAAf,wBACI,kCAAK,WAAI,SAAS,CAAC,MAAd,6BAAL,EADJ,cAEI,YAAK,SAAS,CAAC,SAAf,uBACI,KAAC,IAAD,EACI,EAAE,CAAC,qBADP,CAEI,IAAI,CAAC,QAFT,CAGI,SAAS,CAAC,gCAHd,uBAKI,KAAC,IAAD,EAAM,IAAI,CAAEZ,WAAZ,CAAyB,IAAI,CAAE,EAA/B,EALJ,EADJ,EAFJ,GADJ,EADJ,cAeI,YAAK,SAAS,CAAC,eAAf,uBACI,cAAM,QAAQ,CAAEQ,YAAY,CAACiB,QAAD,CAA5B,wBAGI,aAAK,SAAS,CAAC,iBAAf,WACKhB,MAAM,CAACoB,IAAP,EAAepB,MAAM,CAACoB,IAAP,CAAYC,OAA3B,cACG,UAAG,SAAS,CAAC,aAAb,UAA4BrB,MAAM,CAACoB,IAAP,EAAepB,MAAM,CAACoB,IAAP,CAAYC,OAAvD,EADH,cAEG,2BAHR,cAKI,cACI,IAAI,CAAC,MADT,CAEI,IAAI,CAAC,MAFT,CAGI,YAAY,CAAEpB,QAAQ,CAAGA,QAAQ,CAACmB,IAAZ,CAAmB,IAH7C,CAII,SAAS,CAAC,0BAJd,CAKI,WAAW,CAAC,qBALhB,CAMI,GAAG,CAAEtB,QAAQ,CAAC,CACVwB,QAAQ,CAAE,kBADA,CAAD,CANjB,EALJ,GAHJ,cAqBI,aAAK,SAAS,CAAC,iBAAf,WACKtB,MAAM,CAACuB,KAAP,EAAgBvB,MAAM,CAACuB,KAAP,CAAaF,OAA7B,cACG,UAAG,SAAS,CAAC,aAAb,UAA4BrB,MAAM,CAACuB,KAAP,EAAgBvB,MAAM,CAACuB,KAAP,CAAaF,OAAzD,EADH,cAEG,6BAHR,cAMI,cACI,IAAI,CAAC,MADT,CAEI,IAAI,CAAC,OAFT,CAGI,YAAY,CAAEpB,QAAQ,CAAGA,QAAQ,CAACsB,KAAZ,CAAoB,IAH9C,CAII,SAAS,CAAC,0BAJd,CAKI,WAAW,CAAC,cALhB,CAMI,GAAG,CAAEzB,QAAQ,CAAC,CACVwB,QAAQ,CAAE,oBADA,CAEVE,OAAO,CAAE,CACLC,KAAK,CAAE,0CADF,CAELJ,OAAO,CAAE,uBAFJ,CAFC,CAAD,CANjB,EANJ,GArBJ,cA4CI,aAAK,SAAS,CAAC,iBAAf,WACKrB,MAAM,CAAC0B,KAAP,EAAgB1B,MAAM,CAAC0B,KAAP,CAAaL,OAA7B,cACG,UAAG,SAAS,CAAC,aAAb,UAA4BrB,MAAM,CAAC0B,KAAP,EAAgB1B,MAAM,CAAC0B,KAAP,CAAaL,OAAzD,EADH,cAEG,4BAHR,cAKI,cACI,IAAI,CAAC,MADT,CAEI,IAAI,CAAC,OAFT,CAGI,YAAY,CAAEpB,QAAQ,CAAGA,QAAQ,CAACyB,KAAZ,CAAoB,IAH9C,CAII,SAAS,CAAC,0BAJd,CAKI,WAAW,CAAC,oBALhB,CAMI,GAAG,CAAE5B,QAAQ,CAAC,CACVwB,QAAQ,CAAE,mBADA,CAEVE,OAAO,CAAE,CACLC,KAAK,CAAE,mBADF,CAELJ,OAAO,CAAE,4BAFJ,CAFC,CAAD,CANjB,EALJ,GA5CJ,cAiEI,YAAK,SAAS,CAAC,YAAf,uBACI,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,iBAAhC,CAAkD,QAAQ,CAAEhB,QAA5D,UACKA,QAAQ,CAAG,aAAH,CAAmB,QADhC,EADJ,EAjEJ,GADJ,EAfJ,GADJ,EADJ,EADJ,EADJ,EADJ,CAoGH,CAtID,CAwIA,cAAeT,CAAAA,IAAf","sourcesContent":["import React, { useCallback, useEffect, useState } from 'react'\nimport './style.scss'\nimport 'react-toastify/dist/ReactToastify.css'\nimport Icon from 'react-icons-kit'\nimport { toast } from 'react-toastify'\nimport { Link, useParams } from 'react-router-dom'\nimport { useForm } from 'react-hook-form'\nimport { chevronLeft } from 'react-icons-kit/feather'\nimport Requests from '../../utils/Requests/Index'\n\nimport { PreLoader } from '../../components/loading/Index'\n\ntoast.configure({ autoClose: 2000 })\nconst Edit = () => {\n    const { id } = useParams()\n    const { register, handleSubmit, errors } = useForm()\n    const [customer, setCustomer] = useState({})\n    const [isLoading, setLoading] = useState(true)\n    const [isUpdate, setUpdate] = useState(false)\n    const [header] = useState({\n        headers: { Authorization: \"Bearer \" + localStorage.getItem('token') }\n    })\n\n    // Fetch data\n    const fetchData = useCallback(async () => {\n        const data = await Requests.Customer.Show(id, header)\n        if (data) setCustomer(data)\n        setLoading(false)\n    }, [id, header])\n\n    useEffect(() => {\n        fetchData()\n    }, [id, header, fetchData])\n\n    // Submit Form\n    const onSubmit = async (data) => {\n        try {\n            setUpdate(true)\n            await Requests.Customer.Update(id, data, header)\n            setUpdate(false)\n        } catch (error) {\n            if (error) console.log(error)\n        }\n    }\n\n    if (isLoading) return <PreLoader />\n\n    return (\n        <div className=\"store-customer pb-4\">\n            <div className=\"container-fluid\">\n                <div className=\"row\">\n                    <div className=\"col-12 col-padding\">\n                        <div className=\"card border-0 shadow-sm\">\n                            <div className=\"card-header p-3 p-lg-4 bg-white\">\n                                <div className=\"d-flex\">\n                                    <div><h6 className=\"mb-0\">Create Customer</h6></div>\n                                    <div className=\"ml-auto\">\n                                        <Link\n                                            to=\"/dashboard/customer\"\n                                            type=\"button\"\n                                            className=\"btn shadow-none rounded-circle\"\n                                        >\n                                            <Icon icon={chevronLeft} size={22} />\n                                        </Link>\n                                    </div>\n                                </div>\n                            </div>\n                            <div className=\"card-body p-4\">\n                                <form onSubmit={handleSubmit(onSubmit)}>\n\n                                    {/* Name */}\n                                    <div className=\"form-group mb-4\">\n                                        {errors.name && errors.name.message ? (\n                                            <p className=\"text-danger\">{errors.name && errors.name.message}</p>\n                                        ) : <p>Name</p>}\n\n                                        <input\n                                            type=\"text\"\n                                            name=\"name\"\n                                            defaultValue={customer ? customer.name : null}\n                                            className=\"form-control shadow-none\"\n                                            placeholder=\"Enter customer name\"\n                                            ref={register({\n                                                required: \"Name is required\"\n                                            })}\n                                        />\n                                    </div>\n\n                                    {/* E-mail */}\n                                    <div className=\"form-group mb-4\">\n                                        {errors.email && errors.email.message ? (\n                                            <p className=\"text-danger\">{errors.email && errors.email.message}</p>\n                                        ) : <p>E-mail</p>\n                                        }\n\n                                        <input\n                                            type=\"text\"\n                                            name=\"email\"\n                                            defaultValue={customer ? customer.email : null}\n                                            className=\"form-control shadow-none\"\n                                            placeholder=\"Enter e-mail\"\n                                            ref={register({\n                                                required: \"E-mail is required\",\n                                                pattern: {\n                                                    value: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,\n                                                    message: \"Invalid email address\"\n                                                }\n                                            })}\n                                        />\n                                    </div>\n\n                                    {/* Phone */}\n                                    <div className=\"form-group mb-4\">\n                                        {errors.phone && errors.phone.message ? (\n                                            <p className=\"text-danger\">{errors.phone && errors.phone.message}</p>\n                                        ) : <p>Phone</p>}\n\n                                        <input\n                                            type=\"text\"\n                                            name=\"phone\"\n                                            defaultValue={customer ? customer.phone : null}\n                                            className=\"form-control shadow-none\"\n                                            placeholder=\"Enter phone number\"\n                                            ref={register({\n                                                required: \"Phone is required\",\n                                                pattern: {\n                                                    value: /^(?:\\+88|01)?\\d+$/,\n                                                    message: \"Phone number is not valid.\"\n                                                }\n                                            })}\n                                        />\n                                    </div>\n\n                                    <div className=\"text-right\">\n                                        <button type=\"submit\" className=\"btn shadow-none\" disabled={isUpdate}>\n                                            {isUpdate ? 'Updating...' : 'Update'}\n                                        </button>\n                                    </div>\n\n                                </form>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default Edit;\n"]},"metadata":{},"sourceType":"module"}