{"ast":null,"code":"import _asyncToGenerator from\"D:/previous/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/previous/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\previous\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useCallback,useEffect,useState}from'react';import'./style.scss';import{dateFormate}from'../../../utils/Helpers';import{DataTable}from'../../../components/table/Index';import Requests from'../../../utils/Requests/Index';import ExportCSV from'../../../components/exportCSV/Index';import{RangeFilter}from'../../../components/rangeFilter/Index';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Index=function Index(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isFilter=_useState2[0],setFilter=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(10),_useState6=_slicedToArray(_useState5,2),limit=_useState6[0],setLimit=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),totalItems=_useState8[0],setTotalItems=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),data=_useState10[0],setData=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),sheetData=_useState12[0],setSheetData=_useState12[1];var _useState13=useState({headers:{Authorization:\"Bearer \"+localStorage.getItem('token')}}),_useState14=_slicedToArray(_useState13,1),header=_useState14[0];// Fetch data\nvar fetchData=useCallback(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(page){var response,xlsxData,i,element;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);_context.next=3;return Requests.Buyer.Index(page,limit,header);case 3:response=_context.sent;if(response){xlsxData=[];setData(response.data);setTotalItems(response.pagination?response.pagination.items:0);if(response.data&&response.data.length){for(i=0;i<response.data.length;i++){element=response.data[i];xlsxData.push({name:element.name,email:element.email,phone:element.phone,date:dateFormate(element.createdAt)});}setSheetData(xlsxData);}}setLoading(false);case 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}(),[limit,header]);var handlePageChange=function handlePageChange(page){return fetchData(page);};var handleLimitChange=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(newLimit,page){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setLoading(true);_context2.next=3;return Requests.Buyer.Index(page,newLimit,header);case 3:response=_context2.sent;setData(response.data);setLimit(newLimit);setLoading(false);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function handleLimitChange(_x2,_x3){return _ref2.apply(this,arguments);};}();useEffect(function(){fetchData(1);},[header,fetchData]);// FIlter items\nvar handleFilter=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(data){var response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setFilter(true);_context3.next=3;return Requests.Buyer.Filter(data,header);case 3:response=_context3.sent;if(response){setData(response.data);setFilter(false);}case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function handleFilter(_x4){return _ref3.apply(this,arguments);};}();var columns=[{name:'Name',sortable:true,selector:function selector(row){return row.name?row.name:\"N/A\";}},{name:'E-mail',sortable:true,selector:function selector(row){return row.email?row.email:\"N/A\";}},{name:'Phone',sortable:true,selector:function selector(row){return row.phone?row.phone:\"N/A\";}},{name:'Created At',grow:1,sortable:true,selector:function selector(row){return dateFormate(row.createdAt);}}];return/*#__PURE__*/_jsx(\"div\",{className:\"report-index\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-padding\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card border-0 shadow-sm\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card-header p-3 p-lg-4 bg-white\",children:[/*#__PURE__*/_jsx(\"h6\",{className:\"mt-0 mb-3\",children:\"Buyer's List\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"d-md-flex\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(RangeFilter,{loading:isFilter,filter:handleFilter})}),/*#__PURE__*/_jsx(\"div\",{className:\"text-right pt-2 pt-md-0 pl-2\",children:/*#__PURE__*/_jsx(ExportCSV,{csvData:sheetData,fileName:'Registered_buyers'})})]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body p-0\",children:/*#__PURE__*/_jsx(DataTable,{fixedHeader:true,fixedHeaderScrollHeight:\"580px\",columns:columns,data:data,loading:isLoading,totalRows:totalItems,pagination:true,paginationServer:true,handlePerRowsChange:handleLimitChange,handlePageChange:handlePageChange})})]})})})})});};export default Index;","map":{"version":3,"sources":["D:/previous/src/pages/reports/buyerRegistration/Index.js"],"names":["React","useCallback","useEffect","useState","dateFormate","DataTable","Requests","ExportCSV","RangeFilter","Index","isFilter","setFilter","isLoading","setLoading","limit","setLimit","totalItems","setTotalItems","data","setData","sheetData","setSheetData","headers","Authorization","localStorage","getItem","header","fetchData","page","Buyer","response","xlsxData","pagination","items","length","i","element","push","name","email","phone","date","createdAt","handlePageChange","handleLimitChange","newLimit","handleFilter","Filter","columns","sortable","selector","row","grow"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useState } from 'react'\nimport './style.scss'\nimport { dateFormate } from '../../../utils/Helpers'\nimport { DataTable } from '../../../components/table/Index'\n\nimport Requests from '../../../utils/Requests/Index'\nimport ExportCSV from '../../../components/exportCSV/Index'\nimport { RangeFilter } from '../../../components/rangeFilter/Index'\n\nconst Index = () => {\n    const [isFilter, setFilter] = useState(false)\n    const [isLoading, setLoading] = useState(true)\n    const [limit, setLimit] = useState(10)\n    const [totalItems, setTotalItems] = useState(0)\n\n    const [data, setData] = useState([])\n    const [sheetData, setSheetData] = useState([])\n    const [header] = useState({\n        headers: { Authorization: \"Bearer \" + localStorage.getItem('token') }\n    })\n\n    // Fetch data\n    const fetchData = useCallback(async (page) => {\n        setLoading(true)\n        const response = await Requests.Buyer.Index(page, limit, header)\n\n        if (response) {\n            let xlsxData = []\n            setData(response.data)\n            setTotalItems(response.pagination ? response.pagination.items : 0)\n\n            if (response.data && response.data.length) {\n                for (let i = 0; i < response.data.length; i++) {\n                    const element = response.data[i]\n                    xlsxData.push({\n                        name: element.name,\n                        email: element.email,\n                        phone: element.phone,\n                        date: dateFormate(element.createdAt)\n                    })\n                }\n                setSheetData(xlsxData)\n            }\n        }\n\n        setLoading(false)\n    }, [limit, header])\n\n    const handlePageChange = page => fetchData(page)\n\n    const handleLimitChange = async (newLimit, page) => {\n        setLoading(true)\n        const response = await Requests.Buyer.Index(page, newLimit, header)\n\n        setData(response.data)\n        setLimit(newLimit)\n        setLoading(false)\n    }\n\n    useEffect(() => {\n        fetchData(1)\n    }, [header, fetchData])\n\n    // FIlter items\n    const handleFilter = async data => {\n        setFilter(true)\n        const response = await Requests.Buyer.Filter(data, header)\n\n        if (response) {\n            setData(response.data)\n            setFilter(false)\n        }\n    }\n\n    const columns = [\n        {\n            name: 'Name',\n            sortable: true,\n            selector: row => row.name ? row.name : \"N/A\"\n        },\n        {\n            name: 'E-mail',\n            sortable: true,\n            selector: row => row.email ? row.email : \"N/A\"\n        },\n        {\n            name: 'Phone',\n            sortable: true,\n            selector: row => row.phone ? row.phone : \"N/A\"\n        },\n        {\n            name: 'Created At',\n            grow: 1,\n            sortable: true,\n            selector: row => dateFormate(row.createdAt)\n        }\n    ]\n\n\n    return (\n        <div className=\"report-index\">\n            <div className=\"container-fluid\">\n                <div className=\"row\">\n                    <div className=\"col-12 col-padding\">\n                        <div className=\"card border-0 shadow-sm\">\n                            <div className=\"card-header p-3 p-lg-4 bg-white\">\n                                <h6 className=\"mt-0 mb-3\">Buyer's List</h6>\n                                <div className=\"d-md-flex\">\n                                    <div>\n                                        <RangeFilter\n                                            loading={isFilter}\n                                            filter={handleFilter}\n                                        />\n                                    </div>\n                                    <div className=\"text-right pt-2 pt-md-0 pl-2\">\n                                        <ExportCSV csvData={sheetData} fileName={'Registered_buyers'} />\n                                    </div>\n                                </div>\n                            </div>\n\n                            {/* Data table component for show data */}\n                            <div className=\"card-body p-0\">\n                                <DataTable\n                                    fixedHeader\n                                    fixedHeaderScrollHeight=\"580px\"\n                                    columns={columns}\n                                    data={data}\n                                    loading={isLoading}\n                                    totalRows={totalItems}\n                                    pagination={true}\n                                    paginationServer={true}\n                                    handlePerRowsChange={handleLimitChange}\n                                    handlePageChange={handlePageChange}\n                                />\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default Index;"]},"metadata":{},"sourceType":"module"}