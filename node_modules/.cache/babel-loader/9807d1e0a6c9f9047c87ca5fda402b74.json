{"ast":null,"code":"import _asyncToGenerator from\"D:/previous/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/previous/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\previous\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useCallback,useEffect,useState}from'react';import'./style.scss';import{DataTable}from'../../../components/table/Index';import Requests from'../../../utils/Requests/Index';import ExportCSV from'../../../components/exportCSV/Index';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Index=function Index(){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(10),_useState4=_slicedToArray(_useState3,2),limit=_useState4[0],setLimit=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),totalItems=_useState6[0],setTotalItems=_useState6[1];var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),data=_useState8[0],setData=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),sheetData=_useState10[0],setSheetData=_useState10[1];var _useState11=useState({headers:{Authorization:\"Bearer \"+localStorage.getItem('token')}}),_useState12=_slicedToArray(_useState11,1),header=_useState12[0];// Fetch data\nvar fetchData=useCallback(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(page){var response,xlsxData,i,element;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);_context.next=3;return Requests.PerformedCategory.Index(page,limit,header);case 3:response=_context.sent;if(response){xlsxData=[];setData(response.data);setTotalItems(response.pagination?response.pagination.items:0);if(response.data&&response.data.length){for(i=0;i<response.data.length;i++){element=response.data[i];xlsxData.push({name:element.name,salesTime:element.salesTime,salesQuantity:element.salesQuantity});}setSheetData(xlsxData);}}setLoading(false);case 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}(),[limit,header]);var handlePageChange=function handlePageChange(page){return fetchData(page);};var handleLimitChange=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(newLimit,page){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setLoading(true);_context2.next=3;return Requests.PerformedCategory.Index(page,newLimit,header);case 3:response=_context2.sent;setData(response.data);setLimit(newLimit);setLoading(false);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function handleLimitChange(_x2,_x3){return _ref2.apply(this,arguments);};}();useEffect(function(){fetchData(1);},[header,fetchData]);var columns=[{name:'Name',grow:1,sortable:true,selector:function selector(row){return row.name;}},{name:'Sales Time',sortable:true,selector:function selector(row){return row.salesTime;}},{name:'Sales Qunt.',sortable:true,selector:function selector(row){return row.salesQuantity;}}];return/*#__PURE__*/_jsx(\"div\",{className:\"report-index\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-padding\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card border-0 shadow-sm\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header p-3 p-lg-4 bg-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h6\",{className:\"mt-2 mb-0\",children:\"Best performed category\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-auto\",children:/*#__PURE__*/_jsx(ExportCSV,{csvData:sheetData,fileName:'Best_performed_category'})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body p-0\",children:/*#__PURE__*/_jsx(DataTable,{fixedHeader:true,fixedHeaderScrollHeight:\"580px\",columns:columns,data:data,loading:isLoading,totalRows:totalItems,pagination:true,paginationServer:true,handlePerRowsChange:handleLimitChange,handlePageChange:handlePageChange})})]})})})})});};export default Index;","map":{"version":3,"sources":["D:/previous/src/pages/reports/bestCategory/Index.js"],"names":["React","useCallback","useEffect","useState","DataTable","Requests","ExportCSV","Index","isLoading","setLoading","limit","setLimit","totalItems","setTotalItems","data","setData","sheetData","setSheetData","headers","Authorization","localStorage","getItem","header","fetchData","page","PerformedCategory","response","xlsxData","pagination","items","length","i","element","push","name","salesTime","salesQuantity","handlePageChange","handleLimitChange","newLimit","columns","grow","sortable","selector","row"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useState } from 'react'\nimport './style.scss'\nimport { DataTable } from '../../../components/table/Index'\nimport Requests from '../../../utils/Requests/Index'\nimport ExportCSV from '../../../components/exportCSV/Index'\n\nconst Index = () => {\n    const [isLoading, setLoading] = useState(true)\n    const [limit, setLimit] = useState(10)\n    const [totalItems, setTotalItems] = useState(0)\n\n    const [data, setData] = useState([])\n    const [sheetData, setSheetData] = useState([])\n    const [header] = useState({\n        headers: { Authorization: \"Bearer \" + localStorage.getItem('token') }\n    })\n\n    // Fetch data\n    const fetchData = useCallback(async (page) => {\n        setLoading(true)\n        const response = await Requests.PerformedCategory.Index(page, limit, header)\n\n        if (response) {\n            let xlsxData = []\n            setData(response.data)\n            setTotalItems(response.pagination ? response.pagination.items : 0)\n\n            if (response.data && response.data.length) {\n                for (let i = 0; i < response.data.length; i++) {\n                    const element = response.data[i]\n                    xlsxData.push({\n                        name: element.name,\n                        salesTime: element.salesTime,\n                        salesQuantity: element.salesQuantity\n                    })\n                }\n                setSheetData(xlsxData)\n            }\n        }\n\n        setLoading(false)\n    }, [limit, header])\n\n    const handlePageChange = page => fetchData(page)\n\n    const handleLimitChange = async (newLimit, page) => {\n        setLoading(true)\n        const response = await Requests.PerformedCategory.Index(page, newLimit, header)\n\n        setData(response.data)\n        setLimit(newLimit)\n        setLoading(false)\n    }\n\n    useEffect(() => {\n        fetchData(1)\n    }, [header, fetchData])\n\n    const columns = [\n        {\n            name: 'Name',\n            grow: 1,\n            sortable: true,\n            selector: row => row.name\n        },\n        {\n            name: 'Sales Time',\n            sortable: true,\n            selector: row => row.salesTime\n        },\n        {\n            name: 'Sales Qunt.',\n            sortable: true,\n            selector: row => row.salesQuantity\n        }\n    ]\n\n    return (\n        <div className=\"report-index\">\n            <div className=\"container-fluid\">\n                <div className=\"row\">\n                    <div className=\"col-12 col-padding\">\n                        <div className=\"card border-0 shadow-sm\">\n                            <div className=\"card-header p-3 p-lg-4 bg-white\">\n                                <div className=\"d-flex\">\n                                    <div><h6 className=\"mt-2 mb-0\">Best performed category</h6></div>\n                                    <div className=\"ml-auto\">\n                                        <ExportCSV csvData={sheetData} fileName={'Best_performed_category'} />\n                                    </div>\n                                </div>\n                            </div>\n\n                            {/* Data table component for show data */}\n                            <div className=\"card-body p-0\">\n                                <DataTable\n                                    fixedHeader\n                                    fixedHeaderScrollHeight=\"580px\"\n                                    columns={columns}\n                                    data={data}\n                                    loading={isLoading}\n                                    totalRows={totalItems}\n                                    pagination={true}\n                                    paginationServer={true}\n                                    handlePerRowsChange={handleLimitChange}\n                                    handlePageChange={handlePageChange}\n                                />\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n};\n\nexport default Index;"]},"metadata":{},"sourceType":"module"}