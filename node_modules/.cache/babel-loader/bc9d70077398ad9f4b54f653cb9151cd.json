{"ast":null,"code":"import _objectSpread from\"D:/previous/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"D:/previous/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/previous/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\previous\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useCallback,useEffect,useState}from'react';import'./style.scss';import _ from'lodash';import Icon from'react-icons-kit';import{Link}from'react-router-dom';import{useForm}from'react-hook-form';import{chevronLeft}from'react-icons-kit/feather';import{SingleSelect}from'../../components/select';import Requests from'../../utils/Requests/Index';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Create=function Create(){var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,setError=_useForm.setError,clearErrors=_useForm.clearErrors,errors=_useForm.errors;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setLoading=_useState2[1];var _useState3=useState({value:null,options:[]}),_useState4=_slicedToArray(_useState3,2),roles=_useState4[0],setRoles=_useState4[1];var _useState5=useState({headers:{Authorization:\"Bearer \"+localStorage.getItem('token')}}),_useState6=_slicedToArray(_useState5,1),header=_useState6[0];// Fetch Data\nvar fetchData=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var options,response,i,element;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;options=[];_context.next=4;return Requests.Role.Index(header);case 4:response=_context.sent;if(response&&response.status){if(response.data&&response.data.length){for(i=0;i<response.data.length;i++){element=response.data[i];options.push({label:_.capitalize(element.role),value:element._id});}}}setRoles(function(exRoles){return _objectSpread(_objectSpread({},exRoles),{},{options:options});});_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);if(_context.t0)console.log(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);})),[header]);useEffect(function(){fetchData();},[header,fetchData]);// Handle role\nvar handleRole=function handleRole(event){setRoles(function(exRoles){return _objectSpread(_objectSpread({},exRoles),{},{value:event.value});});clearErrors([\"role\"]);};// Submit Form\nvar onSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data){var formData;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(roles.value){_context2.next=2;break;}return _context2.abrupt(\"return\",setError(\"role\",{type:\"manual\",message:\"Role is required!\"}));case 2:formData=_objectSpread(_objectSpread({},data),{},{role:roles.value});setLoading(true);_context2.next=6;return Requests.Admin.Store(formData,header);case 6:setLoading(false);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function onSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"admin-create pb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-padding\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card border-0 shadow-sm\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header p-3 p-lg-4 bg-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h6\",{className:\"mb-0\",children:\"Create Admin\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-auto\",children:/*#__PURE__*/_jsx(Link,{to:\"/dashboard/admin\",type:\"button\",className:\"btn shadow-none rounded-circle\",children:/*#__PURE__*/_jsx(Icon,{icon:chevronLeft,size:22})})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body p-4\",children:/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit(onSubmit),children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-lg-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[errors.name&&errors.name.message?/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:errors.name&&errors.name.message}):/*#__PURE__*/_jsx(\"p\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",className:\"form-control shadow-none\",placeholder:\"Enter name\",ref:register({required:\"Name is required\",minLength:{value:5,message:\"Minimun length 5 character\"}})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-lg-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[errors.email&&errors.email.message?/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:errors.email&&errors.email.message}):/*#__PURE__*/_jsx(\"p\",{children:\"E-mail\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"email\",className:\"form-control shadow-none\",placeholder:\"Enter e-mail\",ref:register({required:\"E-mail is required\",pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,message:\"Invalid email address\"}})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[errors.phone&&errors.phone.message?/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:errors.phone&&errors.phone.message}):/*#__PURE__*/_jsx(\"p\",{children:\"Phone\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"phone\",className:\"form-control shadow-none\",placeholder:\"Enter phone number\",ref:register({required:\"Phone number required\",pattern:{value:/^(?:\\+88|01)?\\d+$/,message:\"Phone number is not valid.\"}})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[errors.presentAddress&&errors.presentAddress.message?/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:errors.presentAddress&&errors.presentAddress.message}):/*#__PURE__*/_jsx(\"p\",{children:\"Present address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"presentAddress\",className:\"form-control shadow-none\",placeholder:\"Enter present address\",ref:register({required:\"Present address is required\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[errors.permanentAddress&&errors.permanentAddress.message?/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:errors.permanentAddress&&errors.permanentAddress.message}):/*#__PURE__*/_jsx(\"p\",{children:\"Permanent address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"permanentAddress\",className:\"form-control shadow-none\",placeholder:\"Enter permanent address\",ref:register({required:\"Permanent address is required\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-lg-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[errors.role&&errors.role.message?/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:errors.role&&errors.role.message}):/*#__PURE__*/_jsx(\"p\",{children:\"Role\"}),/*#__PURE__*/_jsx(SingleSelect,{placeholder:\"role\",options:roles.options,value:function value(data){return handleRole(data);}})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-lg-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[errors.password&&errors.password.message?/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:errors.password&&errors.password.message}):/*#__PURE__*/_jsx(\"p\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",name:\"password\",className:\"form-control shadow-none\",placeholder:\"Enter password\",ref:register({required:\"Please enter password\",minLength:{value:8,message:\"Minimun length 8 character\"}})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 text-right\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn shadow-none\",disabled:isLoading,children:isLoading?/*#__PURE__*/_jsx(\"span\",{children:\"Submitting...\"}):/*#__PURE__*/_jsx(\"span\",{children:\"Submit\"})})})]})})})]})})})})});};export default Create;","map":{"version":3,"sources":["D:/previous/src/pages/admin/Create.js"],"names":["React","useCallback","useEffect","useState","_","Icon","Link","useForm","chevronLeft","SingleSelect","Requests","Create","register","handleSubmit","setError","clearErrors","errors","isLoading","setLoading","value","options","roles","setRoles","headers","Authorization","localStorage","getItem","header","fetchData","Role","Index","response","status","data","length","i","element","push","label","capitalize","role","_id","exRoles","console","log","handleRole","event","onSubmit","type","message","formData","Admin","Store","name","required","minLength","email","pattern","phone","presentAddress","permanentAddress","password"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useState } from 'react'\nimport './style.scss'\nimport _ from 'lodash'\nimport Icon from 'react-icons-kit'\nimport { Link } from 'react-router-dom'\nimport { useForm } from 'react-hook-form'\nimport { chevronLeft } from 'react-icons-kit/feather'\n\nimport { SingleSelect } from '../../components/select'\nimport Requests from '../../utils/Requests/Index'\n\nconst Create = () => {\n    const { register, handleSubmit, setError, clearErrors, errors } = useForm()\n    const [isLoading, setLoading] = useState(false)\n    const [roles, setRoles] = useState({ value: null, options: [] })\n    const [header] = useState({\n        headers: { Authorization: \"Bearer \" + localStorage.getItem('token') }\n    })\n\n    // Fetch Data\n    const fetchData = useCallback(async () => {\n        try {\n            let options = []\n\n            const response = await Requests.Role.Index(header)\n            if (response && response.status) {\n                if (response.data && response.data.length) {\n                    for (let i = 0; i < response.data.length; i++) {\n                        const element = response.data[i]\n                        options.push({ label: _.capitalize(element.role), value: element._id })\n                    }\n                }\n            }\n\n            setRoles(exRoles => ({ ...exRoles, options: options }))\n        } catch (error) {\n            if (error) console.log(error)\n        }\n    }, [header])\n\n    useEffect(() => {\n        fetchData()\n    }, [header, fetchData])\n\n    // Handle role\n    const handleRole = event => {\n        setRoles(exRoles => ({ ...exRoles, value: event.value }))\n        clearErrors([\"role\"])\n    }\n\n    // Submit Form\n    const onSubmit = async (data) => {\n\n        if (!roles.value) {\n            return setError(\"role\", {\n                type: \"manual\",\n                message: \"Role is required!\"\n            })\n        }\n\n        let formData = { ...data, role: roles.value }\n\n        setLoading(true)\n        await Requests.Admin.Store(formData, header)\n        setLoading(false)\n    }\n\n\n    return (\n        <div className=\"admin-create pb-4\">\n            <div className=\"container-fluid\">\n                <div className=\"row\">\n                    <div className=\"col-12 col-padding\">\n                        <div className=\"card border-0 shadow-sm\">\n                            <div className=\"card-header p-3 p-lg-4 bg-white\">\n                                <div className=\"d-flex\">\n                                    <div><h6 className=\"mb-0\">Create Admin</h6></div>\n                                    <div className=\"ml-auto\">\n                                        <Link\n                                            to=\"/dashboard/admin\"\n                                            type=\"button\"\n                                            className=\"btn shadow-none rounded-circle\"\n                                        >\n                                            <Icon icon={chevronLeft} size={22} />\n                                        </Link>\n                                    </div>\n                                </div>\n                            </div>\n                            <div className=\"card-body p-4\">\n                                <form onSubmit={handleSubmit(onSubmit)}>\n\n                                    <div className=\"row\">\n\n                                        {/* Name */}\n                                        <div className=\"col-12 col-lg-6\">\n                                            <div className=\"form-group mb-4\">\n                                                {errors.name && errors.name.message ? (\n                                                    <p className=\"text-danger\">{errors.name && errors.name.message}</p>\n                                                ) : <p>Name</p>}\n\n                                                <input\n                                                    type=\"text\"\n                                                    name=\"name\"\n                                                    className=\"form-control shadow-none\"\n                                                    placeholder=\"Enter name\"\n                                                    ref={register({\n                                                        required: \"Name is required\",\n                                                        minLength: {\n                                                            value: 5,\n                                                            message: \"Minimun length 5 character\"\n                                                        }\n                                                    })}\n                                                />\n                                            </div>\n                                        </div>\n\n                                        {/* E-mail */}\n                                        <div className=\"col-12 col-lg-6\">\n                                            <div className=\"form-group mb-4\">\n                                                {errors.email && errors.email.message ? (\n                                                    <p className=\"text-danger\">{errors.email && errors.email.message}</p>\n                                                ) : <p>E-mail</p>}\n\n                                                <input\n                                                    type=\"text\"\n                                                    name=\"email\"\n                                                    className=\"form-control shadow-none\"\n                                                    placeholder=\"Enter e-mail\"\n                                                    ref={register({\n                                                        required: \"E-mail is required\",\n                                                        pattern: {\n                                                            value: /^[A-Z0-9._%+-]+@[A-Z0-9.-]+\\.[A-Z]{2,}$/i,\n                                                            message: \"Invalid email address\"\n                                                        }\n                                                    })}\n                                                />\n                                            </div>\n                                        </div>\n\n                                        {/* Phone */}\n                                        <div className=\"col-12\">\n                                            <div className=\"form-group mb-4\">\n                                                {errors.phone && errors.phone.message ? (\n                                                    <p className=\"text-danger\">{errors.phone && errors.phone.message}</p>\n                                                ) : <p>Phone</p>}\n\n                                                <input\n                                                    type=\"text\"\n                                                    name=\"phone\"\n                                                    className=\"form-control shadow-none\"\n                                                    placeholder=\"Enter phone number\"\n                                                    ref={register({\n                                                        required: \"Phone number required\",\n                                                        pattern: {\n                                                            value: /^(?:\\+88|01)?\\d+$/,\n                                                            message: \"Phone number is not valid.\"\n                                                        }\n                                                    })}\n                                                />\n                                            </div>\n                                        </div>\n\n                                        {/* Present address */}\n                                        <div className=\"col-12\">\n                                            <div className=\"form-group mb-4\">\n                                                {errors.presentAddress && errors.presentAddress.message ? (\n                                                    <p className=\"text-danger\">{errors.presentAddress && errors.presentAddress.message}</p>\n                                                ) : <p>Present address</p>}\n\n                                                <input\n                                                    type=\"text\"\n                                                    name=\"presentAddress\"\n                                                    className=\"form-control shadow-none\"\n                                                    placeholder=\"Enter present address\"\n                                                    ref={register({\n                                                        required: \"Present address is required\"\n                                                    })}\n                                                />\n                                            </div>\n                                        </div>\n\n                                        {/* permanent address */}\n                                        <div className=\"col-12\">\n                                            <div className=\"form-group mb-4\">\n                                                {errors.permanentAddress && errors.permanentAddress.message ? (\n                                                    <p className=\"text-danger\">{errors.permanentAddress && errors.permanentAddress.message}</p>\n                                                ) : <p>Permanent address</p>}\n\n                                                <input\n                                                    type=\"text\"\n                                                    name=\"permanentAddress\"\n                                                    className=\"form-control shadow-none\"\n                                                    placeholder=\"Enter permanent address\"\n                                                    ref={register({\n                                                        required: \"Permanent address is required\"\n                                                    })}\n                                                />\n                                            </div>\n                                        </div>\n\n\n                                        {/* Role */}\n                                        <div className=\"col-12 col-lg-6\">\n                                            <div className=\"form-group mb-4\">\n                                                {errors.role && errors.role.message ?\n                                                    <p className=\"text-danger\">{errors.role && errors.role.message}</p>\n                                                    : <p>Role</p>}\n\n                                                <SingleSelect\n                                                    placeholder=\"role\"\n                                                    options={roles.options}\n                                                    value={data => handleRole(data)}\n                                                />\n                                            </div>\n                                        </div>\n\n\n                                        {/* Password */}\n                                        <div className=\"col-12 col-lg-6\">\n                                            <div className=\"form-group mb-4\">\n                                                {errors.password && errors.password.message ? (\n                                                    <p className=\"text-danger\">{errors.password && errors.password.message}</p>\n                                                ) : <p>Password</p>\n                                                }\n\n                                                <input\n                                                    type=\"password\"\n                                                    name=\"password\"\n                                                    className=\"form-control shadow-none\"\n                                                    placeholder=\"Enter password\"\n                                                    ref={register({\n                                                        required: \"Please enter password\",\n                                                        minLength: {\n                                                            value: 8,\n                                                            message: \"Minimun length 8 character\"\n                                                        }\n                                                    })}\n                                                />\n                                            </div>\n                                        </div>\n\n                                        <div className=\"col-12 text-right\">\n                                            <button type=\"submit\" className=\"btn shadow-none\" disabled={isLoading}>\n                                                {isLoading ? <span>Submitting...</span> : <span>Submit</span>}\n                                            </button>\n                                        </div>\n\n                                    </div>\n                                </form>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n        </div>\n    );\n};\n\nexport default Create;\n"]},"metadata":{},"sourceType":"module"}