{"ast":null,"code":"import _objectSpread from\"D:/previous/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"D:/previous/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/previous/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\previous\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState}from'react';import'./style.scss';import Icon from'react-icons-kit';import{Link}from'react-router-dom';import{chevronLeft}from'react-icons-kit/feather';import{SearchableSelect}from'../../components/select';import{SingleFileUploader}from'../../components/fileUploader/Index';import Requests from'../../utils/Requests/Index';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Create=function Create(){var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setLoading=_useState2[1];var _useState3=useState({type:null,value:null,error:null}),_useState4=_slicedToArray(_useState3,2),item=_useState4[0],setItem=_useState4[1];var _useState5=useState({value:null,error:null}),_useState6=_slicedToArray(_useState5,2),link=_useState6[0],setLink=_useState6[1];var _useState7=useState({value:null,error:null}),_useState8=_slicedToArray(_useState7,2),webImage=_useState8[0],setWebImage=_useState8[1];var _useState9=useState({value:null,error:null}),_useState10=_slicedToArray(_useState9,2),mobileImage=_useState10[0],setMobileImage=_useState10[1];var _useState11=useState({headers:{Authorization:\"Bearer \"+localStorage.getItem('token')}}),_useState12=_slicedToArray(_useState11,1),header=_useState12[0];// Handle search\nvar handleSearch=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref){var inputValue,field,response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:inputValue=_ref.inputValue,field=_ref.field;if(!field)response={data:[]};if(!(field===\"brand\")){_context.next=6;break;}_context.next=5;return Requests.Options.Brand(inputValue,header);case 5:response=_context.sent;case 6:if(!(field===\"vendor\")){_context.next=10;break;}_context.next=9;return Requests.Options.Vendor(inputValue,header);case 9:response=_context.sent;case 10:if(!(field===\"product\")){_context.next=14;break;}_context.next=13;return Requests.Options.Product(inputValue,header);case 13:response=_context.sent;case 14:if(!(field===\"category\")){_context.next=18;break;}_context.next=17;return Requests.Options.Category(inputValue,header);case 17:response=_context.sent;case 18:if(!(field===\"sub-category\")){_context.next=22;break;}_context.next=21;return Requests.Options.SubCategory(inputValue,header);case 21:response=_context.sent;case 22:if(!(field===\"leaf-category\")){_context.next=26;break;}_context.next=25;return Requests.Options.LeafCategory(inputValue,header);case 25:response=_context.sent;case 26:if(!(response.data&&response.data.length)){_context.next=28;break;}return _context.abrupt(\"return\",response.data);case 28:return _context.abrupt(\"return\",[]);case 29:case\"end\":return _context.stop();}}},_callee);}));return function handleSearch(_x){return _ref2.apply(this,arguments);};}();// Submit Form\nvar onSubmit=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var formData;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:event.preventDefault();if(!(item.type&&!item.value)){_context2.next=3;break;}return _context2.abrupt(\"return\",setItem(_objectSpread(_objectSpread({},item),{},{error:item.type+\" is required.\"})));case 3:if(!(!link.value&&!item.value)){_context2.next=5;break;}return _context2.abrupt(\"return\",setLink(_objectSpread(_objectSpread({},link),{},{error:\"Link is required.\"})));case 5:if(webImage.value){_context2.next=7;break;}return _context2.abrupt(\"return\",setWebImage({value:null,error:\"Web banner is required.\"}));case 7:if(mobileImage.value){_context2.next=9;break;}return _context2.abrupt(\"return\",setMobileImage({value:null,error:\"Mobile banner is required.\"}));case 9:formData=new FormData();formData.append('type',item.type);formData.append('item',item.value?item.value:null);formData.append('link',link.value);formData.append('webBanner',webImage.value);formData.append('mobileBanner',mobileImage.value);setLoading(true);_context2.next=18;return Requests.Banner.Store(formData,header);case 18:setLoading(false);case 19:case\"end\":return _context2.stop();}}},_callee2);}));return function onSubmit(_x2){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"store-banner pb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-padding\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card border-0 shadow-sm\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header p-3 p-lg-4 bg-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h6\",{className:\"mb-0\",children:\"Store Banner\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-auto\",children:/*#__PURE__*/_jsx(Link,{to:\"/dashboard/banner\",type:\"button\",className:\"btn shadow-none rounded-circle\",children:/*#__PURE__*/_jsx(Icon,{icon:chevronLeft,size:22})})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body p-4\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"i\",{children:\"Select the type which you want to added.\"})}),/*#__PURE__*/_jsxs(\"select\",{name:\"type\",className:\"form-control shadow-none\",onChange:function onChange(event){setItem(_objectSpread(_objectSpread({},item),{},{value:null,type:event.target.value,error:null}));setLink(_objectSpread(_objectSpread({},link),{},{error:null}));},children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"-- Select Option --\"}),/*#__PURE__*/_jsx(\"option\",{value:\"brand\",children:\"Brand\"}),/*#__PURE__*/_jsx(\"option\",{value:\"vendor\",children:\"Vendor\"}),/*#__PURE__*/_jsx(\"option\",{value:\"product\",children:\"Product\"}),/*#__PURE__*/_jsx(\"option\",{value:\"category\",children:\"Category\"}),/*#__PURE__*/_jsx(\"option\",{value:\"sub-category\",children:\"Sub Category\"}),/*#__PURE__*/_jsx(\"option\",{value:\"leaf-category\",children:\"Leaf Category\"})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[item.error?/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:/*#__PURE__*/_jsx(\"i\",{children:item.error})}):/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsxs(\"i\",{children:[\"Select the \",item.type,\" which you want to add.\"]})}),/*#__PURE__*/_jsx(SearchableSelect,{borderRadius:4,placeholder:item.type?\"Select \"+item.type:\"Select item\",search:function search(inputValue){return handleSearch({inputValue:inputValue,field:item.type});},values:function values(data){if(item.type===\"brand\"||item.type===\"vendor\"){setItem(_objectSpread(_objectSpread({},item),{},{value:data.value,error:null}));}else{setItem(_objectSpread(_objectSpread({},item),{},{value:data.slug,error:null}));}}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[link.error?/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:/*#__PURE__*/_jsx(\"i\",{children:link.error})}):/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"i\",{children:\"Add other links\"})}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"form-control shadow-none\",placeholder:\"www.example.com\",onChange:function onChange(event){return setLink({value:event.target.value,error:null});}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4 mr-sm-2\",children:[webImage.error?/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:webImage.error}):/*#__PURE__*/_jsx(\"p\",{children:\"Web banner\"}),/*#__PURE__*/_jsx(SingleFileUploader,{width:250,height:100,limit:100,dataHandeller:function dataHandeller(data){return setWebImage({value:data.image,error:data.error||null});}})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[mobileImage.error?/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:mobileImage.error}):/*#__PURE__*/_jsx(\"p\",{children:\"Mobile banner\"}),/*#__PURE__*/_jsx(SingleFileUploader,{width:200,height:80,limit:100,dataHandeller:function dataHandeller(data){return setMobileImage({value:data.image,error:data.error||null});}})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-right\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn shadow-none\",disabled:isLoading,children:isLoading?'Creating ...':'Create'})})]})})]})})})})});};export default Create;","map":{"version":3,"sources":["D:/previous/src/pages/banner/Create.js"],"names":["React","useState","Icon","Link","chevronLeft","SearchableSelect","SingleFileUploader","Requests","Create","isLoading","setLoading","type","value","error","item","setItem","link","setLink","webImage","setWebImage","mobileImage","setMobileImage","headers","Authorization","localStorage","getItem","header","handleSearch","inputValue","field","response","data","Options","Brand","Vendor","Product","Category","SubCategory","LeafCategory","length","onSubmit","event","preventDefault","formData","FormData","append","Banner","Store","target","slug","image"],"mappings":"4YAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,KAAgC,OAAhC,CACA,MAAO,cAAP,CACA,MAAOC,CAAAA,IAAP,KAAiB,iBAAjB,CACA,OAASC,IAAT,KAAqB,kBAArB,CACA,OAASC,WAAT,KAA4B,yBAA5B,CACA,OAASC,gBAAT,KAAiC,yBAAjC,CACA,OAASC,kBAAT,KAAmC,qCAAnC,CAEA,MAAOC,CAAAA,QAAP,KAAqB,4BAArB,C,wFAEA,GAAMC,CAAAA,MAAM,CAAG,QAATA,CAAAA,MAAS,EAAM,CACjB,cAAgCP,QAAQ,CAAC,KAAD,CAAxC,wCAAOQ,SAAP,eAAkBC,UAAlB,eACA,eAAwBT,QAAQ,CAAC,CAAEU,IAAI,CAAE,IAAR,CAAcC,KAAK,CAAE,IAArB,CAA2BC,KAAK,CAAE,IAAlC,CAAD,CAAhC,yCAAOC,IAAP,eAAaC,OAAb,eACA,eAAwBd,QAAQ,CAAC,CAAEW,KAAK,CAAE,IAAT,CAAeC,KAAK,CAAE,IAAtB,CAAD,CAAhC,yCAAOG,IAAP,eAAaC,OAAb,eACA,eAAgChB,QAAQ,CAAC,CAAEW,KAAK,CAAE,IAAT,CAAeC,KAAK,CAAE,IAAtB,CAAD,CAAxC,yCAAOK,QAAP,eAAiBC,WAAjB,eACA,eAAsClB,QAAQ,CAAC,CAAEW,KAAK,CAAE,IAAT,CAAeC,KAAK,CAAE,IAAtB,CAAD,CAA9C,0CAAOO,WAAP,gBAAoBC,cAApB,gBACA,gBAAiBpB,QAAQ,CAAC,CACtBqB,OAAO,CAAE,CAAEC,aAAa,CAAE,UAAYC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA7B,CADa,CAAD,CAAzB,2CAAOC,MAAP,gBAIA;AACA,GAAMC,CAAAA,YAAY,2FAAG,qKAASC,UAAT,MAASA,UAAT,CAAqBC,KAArB,MAAqBA,KAArB,CAGjB,GAAI,CAACA,KAAL,CAAYC,QAAQ,CAAG,CAAEC,IAAI,CAAE,EAAR,CAAX,CAHK,KAKbF,KAAK,GAAK,OALG,gDAMItB,CAAAA,QAAQ,CAACyB,OAAT,CAAiBC,KAAjB,CAAuBL,UAAvB,CAAmCF,MAAnC,CANJ,QAMbI,QANa,2BASbD,KAAK,GAAK,QATG,iDAUItB,CAAAA,QAAQ,CAACyB,OAAT,CAAiBE,MAAjB,CAAwBN,UAAxB,CAAoCF,MAApC,CAVJ,QAUbI,QAVa,4BAabD,KAAK,GAAK,SAbG,kDAcItB,CAAAA,QAAQ,CAACyB,OAAT,CAAiBG,OAAjB,CAAyBP,UAAzB,CAAqCF,MAArC,CAdJ,SAcbI,QAda,4BAiBbD,KAAK,GAAK,UAjBG,kDAkBItB,CAAAA,QAAQ,CAACyB,OAAT,CAAiBI,QAAjB,CAA0BR,UAA1B,CAAsCF,MAAtC,CAlBJ,SAkBbI,QAlBa,4BAqBbD,KAAK,GAAK,cArBG,kDAsBItB,CAAAA,QAAQ,CAACyB,OAAT,CAAiBK,WAAjB,CAA6BT,UAA7B,CAAyCF,MAAzC,CAtBJ,SAsBbI,QAtBa,4BAyBbD,KAAK,GAAK,eAzBG,kDA0BItB,CAAAA,QAAQ,CAACyB,OAAT,CAAiBM,YAAjB,CAA8BV,UAA9B,CAA0CF,MAA1C,CA1BJ,SA0BbI,QA1Ba,4BA6BbA,QAAQ,CAACC,IAAT,EAAiBD,QAAQ,CAACC,IAAT,CAAcQ,MA7BlB,2DA6BiCT,QAAQ,CAACC,IA7B1C,0CA8BV,EA9BU,yDAAH,kBAAZJ,CAAAA,YAAY,6CAAlB,CAiCA;AACA,GAAMa,CAAAA,QAAQ,2FAAG,kBAAOC,KAAP,mIACbA,KAAK,CAACC,cAAN,GADa,KAET5B,IAAI,CAACH,IAAL,EAAa,CAACG,IAAI,CAACF,KAFV,4DAEwBG,OAAO,gCAAMD,IAAN,MAAYD,KAAK,CAAEC,IAAI,CAACH,IAAL,CAAY,eAA/B,GAF/B,cAGT,CAACK,IAAI,CAACJ,KAAN,EAAe,CAACE,IAAI,CAACF,KAHZ,4DAG0BK,OAAO,gCAAMD,IAAN,MAAYH,KAAK,CAAE,mBAAnB,GAHjC,YAIRK,QAAQ,CAACN,KAJD,2DAIeO,WAAW,CAAC,CAAEP,KAAK,CAAE,IAAT,CAAeC,KAAK,CAAE,yBAAtB,CAAD,CAJ1B,YAKRO,WAAW,CAACR,KALJ,2DAKkBS,cAAc,CAAC,CAAET,KAAK,CAAE,IAAT,CAAeC,KAAK,CAAE,4BAAtB,CAAD,CALhC,SAOT8B,QAPS,CAOE,GAAIC,CAAAA,QAAJ,EAPF,CAQbD,QAAQ,CAACE,MAAT,CAAgB,MAAhB,CAAwB/B,IAAI,CAACH,IAA7B,EACAgC,QAAQ,CAACE,MAAT,CAAgB,MAAhB,CAAwB/B,IAAI,CAACF,KAAL,CAAaE,IAAI,CAACF,KAAlB,CAA0B,IAAlD,EACA+B,QAAQ,CAACE,MAAT,CAAgB,MAAhB,CAAwB7B,IAAI,CAACJ,KAA7B,EACA+B,QAAQ,CAACE,MAAT,CAAgB,WAAhB,CAA6B3B,QAAQ,CAACN,KAAtC,EACA+B,QAAQ,CAACE,MAAT,CAAgB,cAAhB,CAAgCzB,WAAW,CAACR,KAA5C,EAEAF,UAAU,CAAC,IAAD,CAAV,CAda,wBAePH,CAAAA,QAAQ,CAACuC,MAAT,CAAgBC,KAAhB,CAAsBJ,QAAtB,CAAgCjB,MAAhC,CAfO,SAgBbhB,UAAU,CAAC,KAAD,CAAV,CAhBa,yDAAH,kBAAR8B,CAAAA,QAAQ,8CAAd,CAmBA,mBACI,YAAK,SAAS,CAAC,mBAAf,uBACI,YAAK,SAAS,CAAC,iBAAf,uBACI,YAAK,SAAS,CAAC,KAAf,uBACI,YAAK,SAAS,CAAC,oBAAf,uBACI,aAAK,SAAS,CAAC,yBAAf,wBACI,YAAK,SAAS,CAAC,iCAAf,uBACI,aAAK,SAAS,CAAC,QAAf,wBACI,kCAAK,WAAI,SAAS,CAAC,MAAd,0BAAL,EADJ,cAEI,YAAK,SAAS,CAAC,SAAf,uBACI,KAAC,IAAD,EACI,EAAE,CAAC,mBADP,CAEI,IAAI,CAAC,QAFT,CAGI,SAAS,CAAC,gCAHd,uBAKI,KAAC,IAAD,EAAM,IAAI,CAAEpC,WAAZ,CAAyB,IAAI,CAAE,EAA/B,EALJ,EADJ,EAFJ,GADJ,EADJ,cAeI,YAAK,SAAS,CAAC,eAAf,uBACI,cAAM,QAAQ,CAAEoC,QAAhB,wBAGI,aAAK,SAAS,CAAC,iBAAf,wBACI,gCAAG,+DAAH,EADJ,cAGI,gBACI,IAAI,CAAC,MADT,CAEI,SAAS,CAAC,0BAFd,CAGI,QAAQ,CAAE,kBAAAC,KAAK,CAAI,CACf1B,OAAO,gCAAMD,IAAN,MAAYF,KAAK,CAAE,IAAnB,CAAyBD,IAAI,CAAE8B,KAAK,CAACO,MAAN,CAAapC,KAA5C,CAAmDC,KAAK,CAAE,IAA1D,GAAP,CACAI,OAAO,gCAAMD,IAAN,MAAYH,KAAK,CAAE,IAAnB,GAAP,CACH,CANL,wBAQI,eAAQ,KAAK,CAAC,EAAd,iCARJ,cASI,eAAQ,KAAK,CAAC,OAAd,mBATJ,cAUI,eAAQ,KAAK,CAAC,QAAd,oBAVJ,cAWI,eAAQ,KAAK,CAAC,SAAd,qBAXJ,cAYI,eAAQ,KAAK,CAAC,UAAd,sBAZJ,cAaI,eAAQ,KAAK,CAAC,cAAd,0BAbJ,cAcI,eAAQ,KAAK,CAAC,eAAd,2BAdJ,GAHJ,GAHJ,cAyBI,aAAK,SAAS,CAAC,iBAAf,WACKC,IAAI,CAACD,KAAL,cAAa,UAAG,SAAS,CAAC,aAAb,uBAA2B,mBAAIC,IAAI,CAACD,KAAT,EAA3B,EAAb,cAAkE,gCAAG,mCAAeC,IAAI,CAACH,IAApB,6BAAH,EADvE,cAGI,KAAC,gBAAD,EACI,YAAY,CAAE,CADlB,CAEI,WAAW,CAAEG,IAAI,CAACH,IAAL,CAAY,UAAYG,IAAI,CAACH,IAA7B,CAAoC,aAFrD,CAGI,MAAM,CAAE,gBAAAiB,UAAU,QAAID,CAAAA,YAAY,CAAC,CAAEC,UAAU,CAAVA,UAAF,CAAcC,KAAK,CAAEf,IAAI,CAACH,IAA1B,CAAD,CAAhB,EAHtB,CAII,MAAM,CAAE,gBAAAoB,IAAI,CAAI,CACZ,GAAIjB,IAAI,CAACH,IAAL,GAAc,OAAd,EAAyBG,IAAI,CAACH,IAAL,GAAc,QAA3C,CAAqD,CACjDI,OAAO,gCAAMD,IAAN,MAAYF,KAAK,CAAEmB,IAAI,CAACnB,KAAxB,CAA+BC,KAAK,CAAE,IAAtC,GAAP,CACH,CAFD,IAEO,CACHE,OAAO,gCAAMD,IAAN,MAAYF,KAAK,CAAEmB,IAAI,CAACkB,IAAxB,CAA8BpC,KAAK,CAAE,IAArC,GAAP,CACH,CACJ,CAVL,EAHJ,GAzBJ,cA2CI,aAAK,SAAS,CAAC,iBAAf,WACKG,IAAI,CAACH,KAAL,cAAa,UAAG,SAAS,CAAC,aAAb,uBAA2B,mBAAIG,IAAI,CAACH,KAAT,EAA3B,EAAb,cAAkE,gCAAG,sCAAH,EADvE,cAGI,cACI,IAAI,CAAC,MADT,CAEI,SAAS,CAAC,0BAFd,CAGI,WAAW,CAAC,iBAHhB,CAII,QAAQ,CAAE,kBAAA4B,KAAK,QAAIxB,CAAAA,OAAO,CAAC,CAAEL,KAAK,CAAE6B,KAAK,CAACO,MAAN,CAAapC,KAAtB,CAA6BC,KAAK,CAAE,IAApC,CAAD,CAAX,EAJnB,EAHJ,GA3CJ,cAwDI,aAAK,SAAS,CAAC,yBAAf,WACKK,QAAQ,CAACL,KAAT,cAAiB,UAAG,SAAS,CAAC,aAAb,UAA4BK,QAAQ,CAACL,KAArC,EAAjB,cAAmE,iCADxE,cAEI,KAAC,kBAAD,EACI,KAAK,CAAE,GADX,CAEI,MAAM,CAAE,GAFZ,CAGI,KAAK,CAAE,GAHX,CAII,aAAa,CAAE,uBAAAkB,IAAI,QAAIZ,CAAAA,WAAW,CAAC,CAAEP,KAAK,CAAEmB,IAAI,CAACmB,KAAd,CAAqBrC,KAAK,CAAEkB,IAAI,CAAClB,KAAL,EAAc,IAA1C,CAAD,CAAf,EAJvB,EAFJ,GAxDJ,cAmEI,aAAK,SAAS,CAAC,iBAAf,WACKO,WAAW,CAACP,KAAZ,cAAoB,UAAG,SAAS,CAAC,aAAb,UAA4BO,WAAW,CAACP,KAAxC,EAApB,cAAyE,oCAD9E,cAEI,KAAC,kBAAD,EACI,KAAK,CAAE,GADX,CAEI,MAAM,CAAE,EAFZ,CAGI,KAAK,CAAE,GAHX,CAII,aAAa,CAAE,uBAAAkB,IAAI,QAAIV,CAAAA,cAAc,CAAC,CAAET,KAAK,CAAEmB,IAAI,CAACmB,KAAd,CAAqBrC,KAAK,CAAEkB,IAAI,CAAClB,KAAL,EAAc,IAA1C,CAAD,CAAlB,EAJvB,EAFJ,GAnEJ,cA+EI,YAAK,SAAS,CAAC,YAAf,uBACI,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,iBAAhC,CAAkD,QAAQ,CAAEJ,SAA5D,UACKA,SAAS,CAAG,cAAH,CAAoB,QADlC,EADJ,EA/EJ,GADJ,EAfJ,GADJ,EADJ,EADJ,EADJ,EADJ,CAkHH,CAlLD,CAoLA,cAAeD,CAAAA,MAAf","sourcesContent":["import React, { useState } from 'react'\nimport './style.scss'\nimport Icon from 'react-icons-kit'\nimport { Link } from 'react-router-dom'\nimport { chevronLeft } from 'react-icons-kit/feather'\nimport { SearchableSelect } from '../../components/select'\nimport { SingleFileUploader } from '../../components/fileUploader/Index'\n\nimport Requests from '../../utils/Requests/Index'\n\nconst Create = () => {\n    const [isLoading, setLoading] = useState(false)\n    const [item, setItem] = useState({ type: null, value: null, error: null })\n    const [link, setLink] = useState({ value: null, error: null })\n    const [webImage, setWebImage] = useState({ value: null, error: null })\n    const [mobileImage, setMobileImage] = useState({ value: null, error: null })\n    const [header] = useState({\n        headers: { Authorization: \"Bearer \" + localStorage.getItem('token') }\n    })\n\n    // Handle search\n    const handleSearch = async ({ inputValue, field }) => {\n        let response\n\n        if (!field) response = { data: [] }\n\n        if (field === \"brand\") {\n            response = await Requests.Options.Brand(inputValue, header)\n        }\n\n        if (field === \"vendor\") {\n            response = await Requests.Options.Vendor(inputValue, header)\n        }\n\n        if (field === \"product\") {\n            response = await Requests.Options.Product(inputValue, header)\n        }\n\n        if (field === \"category\") {\n            response = await Requests.Options.Category(inputValue, header)\n        }\n\n        if (field === \"sub-category\") {\n            response = await Requests.Options.SubCategory(inputValue, header)\n        }\n\n        if (field === \"leaf-category\") {\n            response = await Requests.Options.LeafCategory(inputValue, header)\n        }\n\n        if (response.data && response.data.length) return response.data\n        return []\n    }\n\n    // Submit Form\n    const onSubmit = async (event) => {\n        event.preventDefault()\n        if (item.type && !item.value) return setItem({ ...item, error: item.type + \" is required.\" })\n        if (!link.value && !item.value) return setLink({ ...link, error: \"Link is required.\" })\n        if (!webImage.value) return setWebImage({ value: null, error: \"Web banner is required.\" })\n        if (!mobileImage.value) return setMobileImage({ value: null, error: \"Mobile banner is required.\" })\n\n        let formData = new FormData()\n        formData.append('type', item.type)\n        formData.append('item', item.value ? item.value : null)\n        formData.append('link', link.value)\n        formData.append('webBanner', webImage.value)\n        formData.append('mobileBanner', mobileImage.value)\n\n        setLoading(true)\n        await Requests.Banner.Store(formData, header)\n        setLoading(false)\n    }\n\n    return (\n        <div className=\"store-banner pb-4\">\n            <div className=\"container-fluid\">\n                <div className=\"row\">\n                    <div className=\"col-12 col-padding\">\n                        <div className=\"card border-0 shadow-sm\">\n                            <div className=\"card-header p-3 p-lg-4 bg-white\">\n                                <div className=\"d-flex\">\n                                    <div><h6 className=\"mb-0\">Store Banner</h6></div>\n                                    <div className=\"ml-auto\">\n                                        <Link\n                                            to=\"/dashboard/banner\"\n                                            type=\"button\"\n                                            className=\"btn shadow-none rounded-circle\"\n                                        >\n                                            <Icon icon={chevronLeft} size={22} />\n                                        </Link>\n                                    </div>\n                                </div>\n                            </div>\n                            <div className=\"card-body p-4\">\n                                <form onSubmit={onSubmit}>\n\n                                    {/* Type */}\n                                    <div className=\"form-group mb-4\">\n                                        <p><i>Select the type which you want to added.</i></p>\n\n                                        <select\n                                            name=\"type\"\n                                            className=\"form-control shadow-none\"\n                                            onChange={event => {\n                                                setItem({ ...item, value: null, type: event.target.value, error: null })\n                                                setLink({ ...link, error: null })\n                                            }}\n                                        >\n                                            <option value=\"\">-- Select Option --</option>\n                                            <option value=\"brand\">Brand</option>\n                                            <option value=\"vendor\">Vendor</option>\n                                            <option value=\"product\">Product</option>\n                                            <option value=\"category\">Category</option>\n                                            <option value=\"sub-category\">Sub Category</option>\n                                            <option value=\"leaf-category\">Leaf Category</option>\n                                        </select>\n                                    </div>\n\n                                    {/* Item */}\n                                    <div className=\"form-group mb-4\">\n                                        {item.error ? <p className=\"text-danger\"><i>{item.error}</i></p> : <p><i>Select the {item.type} which you want to add.</i></p>}\n\n                                        <SearchableSelect\n                                            borderRadius={4}\n                                            placeholder={item.type ? \"Select \" + item.type : \"Select item\"}\n                                            search={inputValue => handleSearch({ inputValue, field: item.type })}\n                                            values={data => {\n                                                if (item.type === \"brand\" || item.type === \"vendor\") {\n                                                    setItem({ ...item, value: data.value, error: null })\n                                                } else {\n                                                    setItem({ ...item, value: data.slug, error: null })\n                                                }\n                                            }}\n                                        />\n                                    </div>\n\n                                    {/* Link */}\n                                    <div className=\"form-group mb-4\">\n                                        {link.error ? <p className=\"text-danger\"><i>{link.error}</i></p> : <p><i>Add other links</i></p>}\n\n                                        <input\n                                            type=\"text\"\n                                            className=\"form-control shadow-none\"\n                                            placeholder=\"www.example.com\"\n                                            onChange={event => setLink({ value: event.target.value, error: null })}\n                                        />\n                                    </div>\n\n\n                                    {/* Web banner uploader */}\n                                    <div className=\"form-group mb-4 mr-sm-2\">\n                                        {webImage.error ? <p className=\"text-danger\">{webImage.error}</p> : <p>Web banner</p>}\n                                        <SingleFileUploader\n                                            width={250}\n                                            height={100}\n                                            limit={100}\n                                            dataHandeller={data => setWebImage({ value: data.image, error: data.error || null })}\n                                        />\n                                    </div>\n\n                                    {/* Mobile banner uploader */}\n                                    <div className=\"form-group mb-4\">\n                                        {mobileImage.error ? <p className=\"text-danger\">{mobileImage.error}</p> : <p>Mobile banner</p>}\n                                        <SingleFileUploader\n                                            width={200}\n                                            height={80}\n                                            limit={100}\n                                            dataHandeller={data => setMobileImage({ value: data.image, error: data.error || null })}\n                                        />\n                                    </div>\n\n\n                                    {/* Submit button */}\n                                    <div className=\"text-right\">\n                                        <button type=\"submit\" className=\"btn shadow-none\" disabled={isLoading}>\n                                            {isLoading ? 'Creating ...' : 'Create'}\n                                        </button>\n                                    </div>\n\n                                </form>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default Create;\n"]},"metadata":{},"sourceType":"module"}