{"ast":null,"code":"import _objectSpread from\"D:/previous/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"D:/previous/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/previous/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\previous\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useCallback,useEffect,useState}from'react';import Icon from'react-icons-kit';import{Link}from'react-router-dom';import{plus,edit2,trash2}from'react-icons-kit/feather';import Requests from'../../../utils/Requests/Index';import{Container}from'../../../components/container';import{Card}from'../../../components/card/Index';import{DeleteModal}from'../../../components/modal/Delete';import{DataTable}from'../../../components/table/Index';import{CustomButton}from'../../../components/button';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Index=function Index(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(10),_useState4=_slicedToArray(_useState3,2),limit=_useState4[0],setLimit=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),totalItems=_useState6[0],setTotalItems=_useState6[1];var _useState7=useState(true),_useState8=_slicedToArray(_useState7,2),isLoading=_useState8[0],setLoading=_useState8[1];var _useState9=useState({value:null,show:false,loading:false}),_useState10=_slicedToArray(_useState9,2),isDelete=_useState10[0],setDelete=_useState10[1];var _useState11=useState({headers:{Authorization:\"Bearer \"+localStorage.getItem('token')}}),_useState12=_slicedToArray(_useState11,1),header=_useState12[0];// Fetch data\nvar fetchData=useCallback(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(page){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);_context.next=3;return Requests.University.CategoryIndex(page,limit,header);case 3:response=_context.sent;if(response){setData(response.data);setTotalItems(response.pagination?response.pagination.items:0);}setLoading(false);case 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}(),[limit,header]);useEffect(function(){fetchData(1);},[header,fetchData]);// handle pagination\nvar handlePageChange=function handlePageChange(page){return fetchData(page);};// handle limit\nvar handleLimitChange=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(newLimit,page){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setLoading(true);_context2.next=3;return Requests.University.CategoryIndex(page,newLimit,header);case 3:response=_context2.sent;setData(response.data);setLimit(newLimit);setLoading(false);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function handleLimitChange(_x2,_x3){return _ref2.apply(this,arguments);};}();var columns=[{name:'Image',grow:0,minWidth:\"150px\",cell:function cell(row){return/*#__PURE__*/_jsx(\"img\",{src:row.image,height:40,className:\"img-fluid\",alt:row.name});}},{name:'Name',selector:function selector(row){return row.name;},sortable:true},{name:'Action',grow:0,minWidth:'150px',cell:function cell(row){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/dashboard/university/category/\".concat(row._id,\"/edit\"),children:/*#__PURE__*/_jsx(CustomButton,{style:{padding:\"6px 10px\"},className:\"btn-success rounded-circle border-0 mr-1\",children:/*#__PURE__*/_jsx(Icon,{icon:edit2,size:16})})}),/*#__PURE__*/_jsx(CustomButton,{style:{padding:\"6px 10px\"},className:\"btn-danger rounded-circle border-0\",onClick:function onClick(){return setDelete({value:row,show:true});},children:/*#__PURE__*/_jsx(Icon,{icon:trash2,size:16})})]});}}];// Handle delete\nvar handleDelete=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setDelete(_objectSpread(_objectSpread({},isDelete),{},{loading:true}));_context3.next=3;return Requests.University.CategoryDelete(isDelete.value._id,header);case 3:fetchData();setDelete(_objectSpread(_objectSpread({},isDelete),{},{show:false,loading:false}));case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function handleDelete(){return _ref3.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"pb-4\",children:[/*#__PURE__*/_jsx(Container.Fluid,{children:/*#__PURE__*/_jsx(Container.Row,{children:/*#__PURE__*/_jsx(Container.Column,{className:\"col-padding\",children:/*#__PURE__*/_jsxs(Card.Simple,{className:\"border-0\",children:[/*#__PURE__*/_jsx(Card.Header,{className:\"bg-white border-0 p-3 p-lg-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h6\",{className:\"mb-0\",children:\"Eazybest University Category List\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-auto\",children:/*#__PURE__*/_jsx(Link,{to:\"/dashboard/university/category/create\",children:/*#__PURE__*/_jsx(CustomButton,{className:\"btn-primary border-0 rounded-circle circle__padding\",children:/*#__PURE__*/_jsx(Icon,{icon:plus,size:22})})})})]})}),/*#__PURE__*/_jsx(Card.Body,{className:\"p-0\",children:/*#__PURE__*/_jsx(DataTable,{fixedHeader:true,fixedHeaderScrollHeight:\"580px\",columns:columns,data:data,loading:isLoading,totalRows:totalItems,pagination:true,paginationServer:true,handlePerRowsChange:handleLimitChange,handlePageChange:handlePageChange})})]})})})}),/*#__PURE__*/_jsx(DeleteModal,{show:isDelete.show,loading:isDelete.loading,message:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h6\",{children:\"Want to delete this category ?\"}),/*#__PURE__*/_jsx(\"img\",{src:isDelete.value?isDelete.value.image:null,className:\"img-fluid\",height:150,alt:\"Category banner\"})]}),onHide:function onHide(){return setDelete({value:null,show:false,loading:false});},doDelete:handleDelete})]});};export default Index;","map":{"version":3,"sources":["D:/previous/src/pages/university/category/Index.js"],"names":["React","useCallback","useEffect","useState","Icon","Link","plus","edit2","trash2","Requests","Container","Card","DeleteModal","DataTable","CustomButton","Index","data","setData","limit","setLimit","totalItems","setTotalItems","isLoading","setLoading","value","show","loading","isDelete","setDelete","headers","Authorization","localStorage","getItem","header","fetchData","page","University","CategoryIndex","response","pagination","items","handlePageChange","handleLimitChange","newLimit","columns","name","grow","minWidth","cell","row","image","selector","sortable","_id","padding","handleDelete","CategoryDelete"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useState } from 'react'\nimport Icon from 'react-icons-kit'\nimport { Link } from 'react-router-dom'\nimport { plus, edit2, trash2 } from 'react-icons-kit/feather'\nimport Requests from '../../../utils/Requests/Index'\n\nimport { Container } from '../../../components/container'\nimport { Card } from '../../../components/card/Index'\nimport { DeleteModal } from '../../../components/modal/Delete'\nimport { DataTable } from '../../../components/table/Index'\nimport { CustomButton } from '../../../components/button'\n\n\nconst Index = () => {\n    const [data, setData] = useState([])\n    const [limit, setLimit] = useState(10)\n    const [totalItems, setTotalItems] = useState(0)\n    const [isLoading, setLoading] = useState(true)\n\n    const [isDelete, setDelete] = useState({ value: null, show: false, loading: false })\n    const [header] = useState({\n        headers: { Authorization: \"Bearer \" + localStorage.getItem('token') }\n    })\n\n    // Fetch data\n    const fetchData = useCallback(async (page) => {\n        setLoading(true)\n        const response = await Requests.University.CategoryIndex(page, limit, header)\n\n        if (response) {\n            setData(response.data)\n            setTotalItems(response.pagination ? response.pagination.items : 0)\n        }\n        setLoading(false)\n    }, [limit, header])\n\n    useEffect(() => {\n        fetchData(1)\n    }, [header, fetchData])\n\n    // handle pagination\n    const handlePageChange = page => fetchData(page)\n\n    // handle limit\n    const handleLimitChange = async (newLimit, page) => {\n        setLoading(true)\n        const response = await Requests.University.CategoryIndex(page, newLimit, header)\n\n        setData(response.data)\n        setLimit(newLimit)\n        setLoading(false)\n    }\n\n    const columns = [\n        {\n            name: 'Image',\n            grow: 0,\n            minWidth: \"150px\",\n            cell: row => <img\n                src={row.image}\n                height={40}\n                className=\"img-fluid\"\n                alt={row.name}\n            />\n        },\n        {\n            name: 'Name',\n            selector: row => row.name,\n            sortable: true\n        },\n        {\n            name: 'Action',\n            grow: 0,\n            minWidth: '150px',\n            cell: row =>\n                <div>\n                    <Link to={`/dashboard/university/category/${row._id}/edit`}>\n                        <CustomButton\n                            style={{ padding: \"6px 10px\" }}\n                            className=\"btn-success rounded-circle border-0 mr-1\"\n                        ><Icon icon={edit2} size={16} />\n                        </CustomButton>\n                    </Link>\n\n                    <CustomButton\n                        style={{ padding: \"6px 10px\" }}\n                        className=\"btn-danger rounded-circle border-0\"\n                        onClick={() => setDelete({ value: row, show: true })}\n                    ><Icon icon={trash2} size={16} />\n                    </CustomButton>\n                </div>\n        }\n    ]\n\n    // Handle delete\n    const handleDelete = async () => {\n        setDelete({ ...isDelete, loading: true })\n\n        await Requests.University.CategoryDelete(isDelete.value._id, header)\n        fetchData()\n        setDelete({ ...isDelete, show: false, loading: false })\n    }\n\n    return (\n        <div className=\"pb-4\">\n            <Container.Fluid>\n                <Container.Row>\n                    <Container.Column className=\"col-padding\">\n                        <Card.Simple className=\"border-0\">\n                            <Card.Header className=\"bg-white border-0 p-3 p-lg-4\">\n                                <div className=\"d-flex\">\n                                    <div><h6 className=\"mb-0\">Eazybest University Category List</h6></div>\n                                    <div className=\"ml-auto\">\n                                        <Link to=\"/dashboard/university/category/create\">\n                                            <CustomButton className=\"btn-primary border-0 rounded-circle circle__padding\">\n                                                <Icon icon={plus} size={22} />\n                                            </CustomButton>\n                                        </Link>\n                                    </div>\n                                </div>\n                            </Card.Header>\n\n                            <Card.Body className=\"p-0\">\n                                <DataTable\n                                    fixedHeader\n                                    fixedHeaderScrollHeight=\"580px\"\n                                    columns={columns}\n                                    data={data}\n                                    loading={isLoading}\n                                    totalRows={totalItems}\n                                    pagination={true}\n                                    paginationServer={true}\n                                    handlePerRowsChange={handleLimitChange}\n                                    handlePageChange={handlePageChange}\n                                />\n                            </Card.Body>\n                        </Card.Simple>\n                    </Container.Column>\n                </Container.Row>\n            </Container.Fluid>\n\n            {/* Delete confirmation */}\n            <DeleteModal\n                show={isDelete.show}\n                loading={isDelete.loading}\n                message={\n                    <div>\n                        <h6>Want to delete this category ?</h6>\n                        <img src={isDelete.value ? isDelete.value.image : null} className=\"img-fluid\" height={150} alt=\"Category banner\" />\n                    </div>\n                }\n                onHide={() => setDelete({ value: null, show: false, loading: false })}\n                doDelete={handleDelete}\n            />\n        </div>\n    );\n}\n\nexport default Index;\n"]},"metadata":{},"sourceType":"module"}