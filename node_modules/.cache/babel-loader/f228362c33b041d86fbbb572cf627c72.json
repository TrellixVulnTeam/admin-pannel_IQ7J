{"ast":null,"code":"var _jsxFileName = \"D:\\\\previous\\\\src\\\\pages\\\\ratingsReviews\\\\Index.js\",\n    _s = $RefreshSig$();\n\nimport React, { useCallback, useEffect, useState } from 'react';\nimport Icon from 'react-icons-kit';\nimport { trash2, checkCircle, alertTriangle, x } from 'react-icons-kit/feather';\nimport { CustomButton } from '../../components/button';\nimport { DataTable } from '../../components/table/Index';\nimport { DeleteModal } from '../../components/modal/Delete';\nimport { Container } from '../../components/container';\nimport { Card } from '../../components/card/Index';\nimport { SearchableSelect, SingleSelect } from '../../components/select';\nimport Requests from '../../utils/Requests/Index';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Index = () => {\n  _s();\n\n  const [isLoading, setLoading] = useState(true);\n  const [limit, setLimit] = useState(10);\n  const [totalItems, setTotalItems] = useState(0);\n  const [data, setData] = useState([]); // const [isUpdate, setUpdate] = useState(null)\n\n  const [closeFilter, setCloseFilter] = useState(false);\n  const [isDelete, setDelete] = useState({\n    value: null,\n    show: false,\n    loading: false\n  });\n  const [header] = useState({\n    headers: {\n      Authorization: \"Bearer \" + localStorage.getItem('token')\n    }\n  }); // Fetch data\n\n  const fetchData = useCallback(async page => {\n    setLoading(true);\n    const response = await Requests.RatingReview.Index(page, limit, header);\n\n    if (response) {\n      setData(response.data);\n      setTotalItems(response.pagination ? response.pagination.items : 0);\n    }\n\n    setLoading(false);\n  }, [limit, header]); // handle page change\n\n  const handlePageChange = page => fetchData(page); // handle limit change\n\n\n  const handleLimitChange = async (newLimit, page) => {\n    setLoading(true);\n    const response = await Requests.RatingReview.Index(page, newLimit, header);\n    setData(response.data);\n    setLimit(newLimit);\n    setLoading(false);\n  };\n\n  useEffect(() => {\n    fetchData(1);\n  }, [header, fetchData]); // handle update\n  // const handleUpdate = async (id, status) => {\n  //     setUpdate(id)\n  //     await Requests.RatingReview.Update(id, status, header)\n  //     fetchData(1)\n  //     setUpdate(null)\n  // }\n  // Handle delete\n\n  const handleDelete = async () => {\n    setDelete({ ...isDelete,\n      loading: true\n    });\n    await Requests.RatingReview.Delete(isDelete.value._id, header);\n    fetchData();\n    setDelete({ ...isDelete,\n      show: false,\n      loading: false\n    });\n  }; // Handle search item\n\n\n  const handleSearchItem = async _ref => {\n    let {\n      inputValue,\n      field\n    } = _ref;\n    let response;\n    if (!field) response = {\n      data: []\n    };\n\n    if (field === \"customer\") {\n      response = await Requests.Options.Customer(inputValue, header);\n    }\n\n    if (field === \"product\") {\n      response = await Requests.Options.Product(inputValue, header);\n    }\n\n    if (response.data && response.data.length) return response.data;\n    return [];\n  }; // Handle filter\n\n\n  const handleFilter = async (value, field) => {\n    setLoading(true);\n    const response = await Requests.RatingReview.FilterItems(value, field, header);\n    if (response) setData(response.data);\n    setLoading(false);\n  };\n\n  const columns = [{\n    name: 'Customer',\n    width: \"200px\",\n    selector: row => row.user,\n    sortable: true\n  }, {\n    name: '',\n    grow: 0,\n    cell: row => /*#__PURE__*/_jsxDEV(\"img\", {\n      height: 40,\n      width: 50,\n      alt: \"Product\",\n      src: row.product.thumbnail\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 116,\n      columnNumber: 26\n    }, this)\n  }, {\n    name: 'Product',\n    grow: 0,\n    selector: row => row.product.name,\n    sortable: true\n  }, {\n    name: 'Rating',\n    grow: 0,\n    selector: row => row.rating,\n    sortable: true\n  }, {\n    name: 'Type',\n    grow: 0,\n    sortable: true,\n    cell: row => row.type === \"Unverified\" ? /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"text-danger\",\n      children: row.type\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 21\n    }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"text-success\",\n      children: row.type\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 23\n    }, this)\n  }, {\n    name: 'Review',\n    grow: 1,\n    selector: row => row.review,\n    sortable: true\n  }, {\n    name: 'Status',\n    grow: 0,\n    cell: row => row.status === \"Pending\" ? /*#__PURE__*/_jsxDEV(Icon, {\n      icon: alertTriangle,\n      className: \"text-danger\",\n      children: row.status\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 150,\n      columnNumber: 21\n    }, this) : /*#__PURE__*/_jsxDEV(Icon, {\n      icon: checkCircle,\n      className: \"text-success\",\n      children: row.status\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 151,\n      columnNumber: 23\n    }, this)\n  }, {\n    name: 'Action',\n    grow: 0,\n    minWidth: '80px',\n    cell: row => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(CustomButton, {\n        style: {\n          padding: \"6px 10px\"\n        },\n        className: \"btn-danger rounded-circle border-0\",\n        onClick: () => setDelete({\n          value: row,\n          show: true\n        }),\n        children: /*#__PURE__*/_jsxDEV(Icon, {\n          icon: trash2,\n          size: 16\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 22\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 158,\n      columnNumber: 17\n    }, this)\n  }];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"pb-4\",\n    children: [/*#__PURE__*/_jsxDEV(Container.Fluid, {\n      children: /*#__PURE__*/_jsxDEV(Container.Row, {\n        children: /*#__PURE__*/_jsxDEV(Container.Column, {\n          className: \"col-padding\",\n          children: /*#__PURE__*/_jsxDEV(Card.Simple, {\n            className: \"border-0\",\n            children: [/*#__PURE__*/_jsxDEV(Card.Header, {\n              className: \"bg-white border-0 p-3 p-lg-4\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"d-flex mb-3\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"h6\", {\n                    className: \"mb-0\",\n                    children: \"Ratings & Reviews\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 195,\n                    columnNumber: 42\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 195,\n                  columnNumber: 37\n                }, this), closeFilter ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"ml-auto\",\n                  children: /*#__PURE__*/_jsxDEV(CustomButton, {\n                    className: \"btn-danger border-0 rounded-circle circle__padding ml-1\",\n                    onClick: () => {\n                      fetchData(1);\n                      setCloseFilter(false);\n                    },\n                    children: /*#__PURE__*/_jsxDEV(Icon, {\n                      icon: x,\n                      size: 22\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 206,\n                      columnNumber: 49\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 199,\n                    columnNumber: 45\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 197,\n                  columnNumber: 41\n                }, this) : null]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 33\n              }, this), /*#__PURE__*/_jsxDEV(Container.Row, {\n                className: \"px-2\",\n                children: [/*#__PURE__*/_jsxDEV(Container.Column, {\n                  className: \"col-sm-6 col-md-4 px-1 mb-2\",\n                  children: /*#__PURE__*/_jsxDEV(SingleSelect, {\n                    placeholder: \"rating\",\n                    borderRadius: 25,\n                    options: [{\n                      label: 5,\n                      value: 5\n                    }, {\n                      label: 4,\n                      value: 4\n                    }, {\n                      label: 3,\n                      value: 3\n                    }, {\n                      label: 2,\n                      value: 2\n                    }, {\n                      label: 1,\n                      value: 1\n                    }],\n                    value: event => handleFilter(event.value, \"rating\")\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 218,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 217,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Container.Column, {\n                  className: \"col-sm-6 col-md-4 px-1 mb-2\",\n                  children: /*#__PURE__*/_jsxDEV(SingleSelect, {\n                    placeholder: \"type\",\n                    borderRadius: 25,\n                    options: [{\n                      label: \"Verified\",\n                      value: \"Verified\"\n                    }, {\n                      label: \"Unverified\",\n                      value: \"Unverified\"\n                    }],\n                    value: event => handleFilter(event.value, \"type\")\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 234,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 233,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Container.Column, {\n                  className: \"col-sm-6 col-md-4 px-1 mb-2\",\n                  children: /*#__PURE__*/_jsxDEV(SingleSelect, {\n                    placeholder: \"status\",\n                    borderRadius: 25,\n                    options: [{\n                      label: \"Pending\",\n                      value: \"Pending\"\n                    }, {\n                      label: \"Approved\",\n                      value: \"Approved\"\n                    }],\n                    value: event => handleFilter(event.value, \"status\")\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 247,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 246,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Container.Column, {\n                  className: \"col-sm-6 px-1 mb-2\",\n                  children: /*#__PURE__*/_jsxDEV(SearchableSelect, {\n                    placeholder: \"Type customer ...\",\n                    borderRadius: 25,\n                    search: inputValue => handleSearchItem({\n                      inputValue,\n                      field: \"customer\"\n                    }),\n                    values: data => handleFilter(data.value, \"customer\")\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 260,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 259,\n                  columnNumber: 37\n                }, this), /*#__PURE__*/_jsxDEV(Container.Column, {\n                  className: \"col-sm-6 px-1 mb-2\",\n                  children: /*#__PURE__*/_jsxDEV(SearchableSelect, {\n                    placeholder: \"Type product ...\",\n                    borderRadius: 25,\n                    search: inputValue => handleSearchItem({\n                      inputValue,\n                      field: \"product\"\n                    }),\n                    values: data => handleFilter(data.value, \"product\")\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 270,\n                    columnNumber: 41\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 269,\n                  columnNumber: 37\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 214,\n                columnNumber: 33\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 191,\n              columnNumber: 29\n            }, this), /*#__PURE__*/_jsxDEV(Card.Body, {\n              className: \"p-0\",\n              children: /*#__PURE__*/_jsxDEV(DataTable, {\n                fixedHeader: true,\n                fixedHeaderScrollHeight: \"580px\",\n                columns: columns,\n                data: data,\n                loading: isLoading,\n                totalRows: totalItems,\n                pagination: true,\n                paginationServer: true,\n                handlePerRowsChange: handleLimitChange,\n                handlePageChange: handlePageChange\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 280,\n                columnNumber: 33\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 29\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 189,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(DeleteModal, {\n      show: isDelete.show,\n      loading: isDelete.loading,\n      message: /*#__PURE__*/_jsxDEV(\"h6\", {\n        children: \"Want to delete this Review ?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 26\n      }, this),\n      onHide: () => setDelete({\n        value: null,\n        show: false,\n        loading: false\n      }),\n      doDelete: handleDelete\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 299,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 186,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Index, \"8/bgZwB/1BcGCNeZlbLmw2ws16o=\");\n\n_c = Index;\nexport default Index;\n\nvar _c;\n\n$RefreshReg$(_c, \"Index\");","map":{"version":3,"sources":["D:/previous/src/pages/ratingsReviews/Index.js"],"names":["React","useCallback","useEffect","useState","Icon","trash2","checkCircle","alertTriangle","x","CustomButton","DataTable","DeleteModal","Container","Card","SearchableSelect","SingleSelect","Requests","Index","isLoading","setLoading","limit","setLimit","totalItems","setTotalItems","data","setData","closeFilter","setCloseFilter","isDelete","setDelete","value","show","loading","header","headers","Authorization","localStorage","getItem","fetchData","page","response","RatingReview","pagination","items","handlePageChange","handleLimitChange","newLimit","handleDelete","Delete","_id","handleSearchItem","inputValue","field","Options","Customer","Product","length","handleFilter","FilterItems","columns","name","width","selector","row","user","sortable","grow","cell","product","thumbnail","rating","type","review","status","minWidth","padding","label","event"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useState } from 'react'\nimport Icon from 'react-icons-kit'\nimport {\n    trash2,\n    checkCircle,\n    alertTriangle,\n    x\n} from 'react-icons-kit/feather'\n\nimport { CustomButton } from '../../components/button'\nimport { DataTable } from '../../components/table/Index'\nimport { DeleteModal } from '../../components/modal/Delete'\nimport { Container } from '../../components/container'\nimport { Card } from '../../components/card/Index'\nimport { SearchableSelect, SingleSelect } from '../../components/select'\n\nimport Requests from '../../utils/Requests/Index'\n\n\nconst Index = () => {\n    const [isLoading, setLoading] = useState(true)\n    const [limit, setLimit] = useState(10)\n    const [totalItems, setTotalItems] = useState(0)\n\n    const [data, setData] = useState([])\n    // const [isUpdate, setUpdate] = useState(null)\n    const [closeFilter, setCloseFilter] = useState(false)\n    const [isDelete, setDelete] = useState({ value: null, show: false, loading: false })\n    const [header] = useState({\n        headers: { Authorization: \"Bearer \" + localStorage.getItem('token') }\n    })\n\n    // Fetch data\n    const fetchData = useCallback(async (page) => {\n        setLoading(true)\n        const response = await Requests.RatingReview.Index(page, limit, header)\n\n        if (response) {\n            setData(response.data)\n            setTotalItems(response.pagination ? response.pagination.items : 0)\n        }\n\n        setLoading(false)\n    }, [limit, header])\n\n    // handle page change\n    const handlePageChange = page => fetchData(page)\n\n    // handle limit change\n    const handleLimitChange = async (newLimit, page) => {\n        setLoading(true)\n        const response = await Requests.RatingReview.Index(page, newLimit, header)\n\n        setData(response.data)\n        setLimit(newLimit)\n        setLoading(false)\n    }\n\n    useEffect(() => {\n        fetchData(1)\n    }, [header, fetchData])\n\n    // handle update\n    // const handleUpdate = async (id, status) => {\n    //     setUpdate(id)\n    //     await Requests.RatingReview.Update(id, status, header)\n    //     fetchData(1)\n    //     setUpdate(null)\n    // }\n\n    // Handle delete\n    const handleDelete = async () => {\n        setDelete({ ...isDelete, loading: true })\n\n        await Requests.RatingReview.Delete(isDelete.value._id, header)\n        fetchData()\n        setDelete({ ...isDelete, show: false, loading: false })\n    }\n\n    // Handle search item\n    const handleSearchItem = async ({ inputValue, field }) => {\n        let response\n\n        if (!field) response = { data: [] }\n\n        if (field === \"customer\") {\n            response = await Requests.Options.Customer(inputValue, header)\n        }\n\n        if (field === \"product\") {\n            response = await Requests.Options.Product(inputValue, header)\n        }\n\n        if (response.data && response.data.length) return response.data\n        return []\n    }\n\n    // Handle filter\n    const handleFilter = async (value, field) => {\n        setLoading(true)\n        const response = await Requests.RatingReview.FilterItems(value, field, header)\n        if (response) setData(response.data)\n        setLoading(false)\n    }\n\n    const columns = [\n        {\n            name: 'Customer',\n            width: \"200px\",\n            selector: row => row.user,\n            sortable: true\n        },\n        {\n            name: '',\n            grow: 0,\n            cell: row => <img height={40} width={50} alt={\"Product\"} src={row.product.thumbnail} />\n        },\n        {\n            name: 'Product',\n            grow: 0,\n            selector: row => row.product.name,\n            sortable: true\n        },\n        {\n            name: 'Rating',\n            grow: 0,\n            selector: row => row.rating,\n            sortable: true\n        },\n        {\n            name: 'Type',\n            grow: 0,\n            sortable: true,\n            cell: row =>\n                row.type === \"Unverified\" ?\n                    <span className=\"text-danger\">{row.type}</span>\n                    : <span className=\"text-success\">{row.type}</span>\n        },\n        {\n            name: 'Review',\n            grow: 1,\n            selector: row => row.review,\n            sortable: true\n        },\n        {\n            name: 'Status',\n            grow: 0,\n            cell: row =>\n                row.status === \"Pending\" ?\n                    <Icon icon={alertTriangle} className=\"text-danger\">{row.status}</Icon>\n                    : <Icon icon={checkCircle} className=\"text-success\">{row.status}</Icon>\n        },\n        {\n            name: 'Action',\n            grow: 0,\n            minWidth: '80px',\n            cell: row =>\n                <div>\n                    {/* {row.status === 'Pending' ?\n                        <CustomButton\n                            style={{ padding: \"6px 10px\", fontSize: 14, fontWeight: 600 }}\n                            className=\"btn-success rounded border-0 mr-2\"\n                            onClick={() => handleUpdate(row._id, 'Approved')}\n                            disabled={isUpdate && isUpdate === row._id}\n                        >{isUpdate && isUpdate === row._id ? 'Loading...' : 'Approve'}</CustomButton>\n                        :\n                        <CustomButton\n                            style={{ padding: \"6px 10px\", fontSize: 14, fontWeight: 600 }}\n                            className=\"btn-danger rounded border-0 mr-2\"\n                            onClick={() => handleUpdate(row._id, 'Pending')}\n                            disabled={isUpdate && isUpdate === row._id}\n                        >{isUpdate && isUpdate === row._id ? 'Loading...' : 'Remove'}</CustomButton>\n                    } */}\n\n                    <CustomButton\n                        style={{ padding: \"6px 10px\" }}\n                        className=\"btn-danger rounded-circle border-0\"\n                        onClick={() => setDelete({ value: row, show: true })}\n                    ><Icon icon={trash2} size={16} />\n                    </CustomButton>\n                </div>\n        }\n    ]\n\n    return (\n        <div className=\"pb-4\">\n            <Container.Fluid>\n                <Container.Row>\n                    <Container.Column className=\"col-padding\">\n                        <Card.Simple className=\"border-0\">\n                            <Card.Header className=\"bg-white border-0 p-3 p-lg-4\">\n\n                                {/* title container */}\n                                <div className=\"d-flex mb-3\">\n                                    <div><h6 className=\"mb-0\">Ratings & Reviews</h6></div>\n                                    {closeFilter ?\n                                        <div className=\"ml-auto\">\n\n                                            <CustomButton\n                                                className=\"btn-danger border-0 rounded-circle circle__padding ml-1\"\n                                                onClick={() => {\n                                                    fetchData(1)\n                                                    setCloseFilter(false)\n                                                }}\n                                            >\n                                                <Icon icon={x} size={22} />\n                                            </CustomButton>\n                                        </div>\n                                        : null\n                                    }\n                                </div>\n\n                                {/* Filter items */}\n                                <Container.Row className=\"px-2\">\n\n                                    {/* Rating Filter */}\n                                    <Container.Column className=\"col-sm-6 col-md-4 px-1 mb-2\">\n                                        <SingleSelect\n                                            placeholder=\"rating\"\n                                            borderRadius={25}\n                                            options={[\n                                                { label: 5, value: 5 },\n                                                { label: 4, value: 4 },\n                                                { label: 3, value: 3 },\n                                                { label: 2, value: 2 },\n                                                { label: 1, value: 1 }\n                                            ]}\n                                            value={event => handleFilter(event.value, \"rating\")}\n                                        />\n                                    </Container.Column>\n\n                                    {/* Type Filter */}\n                                    <Container.Column className=\"col-sm-6 col-md-4 px-1 mb-2\">\n                                        <SingleSelect\n                                            placeholder=\"type\"\n                                            borderRadius={25}\n                                            options={[\n                                                { label: \"Verified\", value: \"Verified\" },\n                                                { label: \"Unverified\", value: \"Unverified\" }\n                                            ]}\n                                            value={event => handleFilter(event.value, \"type\")}\n                                        />\n                                    </Container.Column>\n\n                                    {/* Status Filter */}\n                                    <Container.Column className=\"col-sm-6 col-md-4 px-1 mb-2\">\n                                        <SingleSelect\n                                            placeholder=\"status\"\n                                            borderRadius={25}\n                                            options={[\n                                                { label: \"Pending\", value: \"Pending\" },\n                                                { label: \"Approved\", value: \"Approved\" }\n                                            ]}\n                                            value={event => handleFilter(event.value, \"status\")}\n                                        />\n                                    </Container.Column>\n\n                                    {/* Customer filter */}\n                                    <Container.Column className=\"col-sm-6 px-1 mb-2\">\n                                        <SearchableSelect\n                                            placeholder=\"Type customer ...\"\n                                            borderRadius={25}\n                                            search={inputValue => handleSearchItem({ inputValue, field: \"customer\" })}\n                                            values={data => handleFilter(data.value, \"customer\")}\n                                        />\n                                    </Container.Column>\n\n                                    {/* Product filter */}\n                                    <Container.Column className=\"col-sm-6 px-1 mb-2\">\n                                        <SearchableSelect\n                                            placeholder=\"Type product ...\"\n                                            borderRadius={25}\n                                            search={inputValue => handleSearchItem({ inputValue, field: \"product\" })}\n                                            values={data => handleFilter(data.value, \"product\")}\n                                        />\n                                    </Container.Column>\n                                </Container.Row>\n                            </Card.Header>\n                            <Card.Body className=\"p-0\">\n                                <DataTable\n                                    fixedHeader\n                                    fixedHeaderScrollHeight=\"580px\"\n                                    columns={columns}\n                                    data={data}\n                                    loading={isLoading}\n                                    totalRows={totalItems}\n                                    pagination={true}\n                                    paginationServer={true}\n                                    handlePerRowsChange={handleLimitChange}\n                                    handlePageChange={handlePageChange}\n                                />\n                            </Card.Body>\n                        </Card.Simple>\n                    </Container.Column>\n                </Container.Row>\n            </Container.Fluid>\n\n            {/* Delete confirmation */}\n            <DeleteModal\n                show={isDelete.show}\n                loading={isDelete.loading}\n                message={<h6>Want to delete this Review ?</h6>}\n                onHide={() => setDelete({ value: null, show: false, loading: false })}\n                doDelete={handleDelete}\n            />\n        </div>\n    );\n};\n\nexport default Index;"]},"metadata":{},"sourceType":"module"}