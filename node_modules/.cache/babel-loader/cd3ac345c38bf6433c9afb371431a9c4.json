{"ast":null,"code":"import _toConsumableArray from\"D:/previous/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _objectSpread from\"D:/previous/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"D:/previous/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/previous/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\previous\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useCallback,useEffect,useRef}from'react';import'./style.scss';import'react-toastify/dist/ReactToastify.css';import Select from'react-select';import{Form}from'react-bootstrap';import{Icon}from'react-icons-kit';import{useForm}from'react-hook-form';import{Link,useParams}from'react-router-dom';import{chevronLeft,plus,trash2}from'react-icons-kit/feather';import{DeleteModal}from'../../components/modal/Delete';import{SingleFileUploader}from'../../components/fileUploader/Index';import{PreLoader}from'../../components/loading/Index';import CreatableSelect from'react-select/creatable';import Requests from'../../utils/Requests/Index';import ProductMaterialEditInput from'../../components/form/product/MaterialEdit';import ProductAdditionalEditInput from'../../components/form/product/AdditionalEdit';import ReturnPolicy from'../../components/form/product/ReturnPolicy';import Warranty from'../../components/form/product/Warranty';import Emi from'../../components/form/product/Emi';import DescriptionEditInput from'../../components/form/product/DescriptionEdit';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Edit=function Edit(){var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,setError=_useForm.setError,clearErrors=_useForm.clearErrors,errors=_useForm.errors;var _useParams=useParams(),id=_useParams.id;var subCatRefs=useRef();var leafCatRefs=useRef();var _useState=useState({}),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setErrors=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isUpdate=_useState4[0],setUpdate=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),isLoading=_useState6[0],setLoading=_useState6[1];var _useState7=useState({file:null,show:false,loading:false}),_useState8=_slicedToArray(_useState7,2),isDelete=_useState8[0],setDelete=_useState8[1];var _useState9=useState({}),_useState10=_slicedToArray(_useState9,2),product=_useState10[0],setProduct=_useState10[1];var _useState11=useState([]),_useState12=_slicedToArray(_useState11,2),vendors=_useState12[0],setVendors=_useState12[1];var _useState13=useState([]),_useState14=_slicedToArray(_useState13,2),brands=_useState14[0],setBrands=_useState14[1];var _useState15=useState({options:[]}),_useState16=_slicedToArray(_useState15,2),categories=_useState16[0],setCategories=_useState16[1];var _useState17=useState({options:[]}),_useState18=_slicedToArray(_useState17,2),subCategories=_useState18[0],setSubCategories=_useState18[1];var _useState19=useState({options:[]}),_useState20=_slicedToArray(_useState19,2),leafCategories=_useState20[0],setLeafCategories=_useState20[1];var _useState21=useState({preview:null,isUpload:false}),_useState22=_slicedToArray(_useState21,2),thumbnail=_useState22[0],setThumbnail=_useState22[1];var _useState23=useState([]),_useState24=_slicedToArray(_useState23,2),additinalImages=_useState24[0],setAdditionalImages=_useState24[1];var _useState25=useState(false),_useState26=_slicedToArray(_useState25,2),additionalUpload=_useState26[0],setAdditionalUpload=_useState26[1];var _useState27=useState({value:null,loading:false,error:null}),_useState28=_slicedToArray(_useState27,2),descriptionImage=_useState28[0],setDescriptionImage=_useState28[1];var _useState29=useState({headers:{Authorization:\"Bearer \"+localStorage.getItem('token')}}),_useState30=_slicedToArray(_useState29,1),header=_useState30[0];// Get Data \nvar getData=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response,productResponse;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Requests.Options.Index(header);case 2:response=_context.sent;if(response){setCategories(function(exCategory){return _objectSpread(_objectSpread({},exCategory),{},{options:response.mainCategories});});setBrands(response.brands);setVendors(response.vendors);}_context.next=6;return Requests.Product.Show(id,header);case 6:productResponse=_context.sent;if(productResponse&&productResponse.status===200){setProduct(productResponse.data.product);setAdditionalImages(productResponse.data.product.thumbnail.additional);}setLoading(false);case 9:case\"end\":return _context.stop();}}},_callee);})),[id,header]);useEffect(function(){getData();},[id,header,getData]);// Handle main category\nvar handleMainCategory=function handleMainCategory(event){var value=event.value;var children=event.child;subCatRefs.current.select.clearValue();leafCatRefs.current.select.clearValue();setProduct(_objectSpread(_objectSpread({},product),{},{mainCategory:value,subCategory:null,leafCategory:null}));if(children&&children.length){setSubCategories(function(exChildren){return _objectSpread(_objectSpread({},exChildren),{},{options:children});});}else{setSubCategories(function(exChildren){return _objectSpread(_objectSpread({},exChildren),{},{options:[]});});}};// Handle sub category\nvar handleSubCategory=function handleSubCategory(event){if(event){var value=event.value;var children=event.child;leafCatRefs.current.select.clearValue();setProduct(_objectSpread(_objectSpread({},product),{},{subCategory:value,leafCategory:null}));if(children&&children.length){setLeafCategories(function(exChildren){return _objectSpread(_objectSpread({},exChildren),{},{options:children});});}else{setLeafCategories(function(exChildren){return _objectSpread(_objectSpread({},exChildren),{},{options:[]});});}}};// Handle leaf category\nvar handleLeafCategory=function handleLeafCategory(event){if(event)setProduct(_objectSpread(_objectSpread({},product),{},{leafCategory:event.value}));};// Thumbnail handeller\nvar thumbnailHandeller=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(event){var file,formData;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:file=event.target.files[0];if(!file){_context2.next=8;break;}setThumbnail({preview:URL.createObjectURL(file),isUpload:true});formData=new FormData();formData.append('image',file);_context2.next=7;return Requests.Product.UpdateThumb(id,formData,header);case 7:setThumbnail({preview:URL.createObjectURL(file),isUpload:false});case 8:case\"end\":return _context2.stop();}}},_callee2);}));return function thumbnailHandeller(_x){return _ref2.apply(this,arguments);};}();// Additinal Image handeller\nvar additionalImageHandeller=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(event){var file,fileURl,formData;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:file=event.target.files[0];fileURl=URL.createObjectURL(file);if(!file){_context3.next=10;break;}setAdditionalImages([].concat(_toConsumableArray(additinalImages),[fileURl]));setAdditionalUpload(true);formData=new FormData();formData.append('image',file);_context3.next=9;return Requests.Product.AddThumb(id,formData,header);case 9:setAdditionalUpload(false);case 10:case\"end\":return _context3.stop();}}},_callee3);}));return function additionalImageHandeller(_x2){return _ref3.apply(this,arguments);};}();// get additional info data\nvar getAdditional=function getAdditional(data){return setProduct(_objectSpread(_objectSpread({},product),{},{additionalInfo:data}));};// get material info data\nvar getMaterial=function getMaterial(data){return setProduct(_objectSpread(_objectSpread({},product),{},{materials:data}));};// get description data\nvar getDescription=function getDescription(data){return setProduct(_objectSpread(_objectSpread({},product),{},{description:data}));};// Handle return & replacement\nvar handleReturnReplacement=function handleReturnReplacement(data){if(data.status){setProduct(_objectSpread(_objectSpread({},product),{},{returnReplacement:_objectSpread(_objectSpread({},product.returnReplacement),{},{status:data.status})}));}else{setProduct(_objectSpread(_objectSpread({},product),{},{returnReplacement:_objectSpread(_objectSpread({},product.returnReplacement),{},{status:false,limit:null,description:null,limitError:null})}));}if(data.limit)setProduct(_objectSpread(_objectSpread({},product),{},{returnReplacement:_objectSpread(_objectSpread({},product.returnReplacement),{},{limit:data.limit,limitError:null})}));if(data.description)setProduct(_objectSpread(_objectSpread({},product),{},{returnReplacement:_objectSpread(_objectSpread({},product.returnReplacement),{},{description:data.description})}));};// Handle warranty\nvar handleWarranty=function handleWarranty(data){if(data.status){setProduct(_objectSpread(_objectSpread({},product),{},{warranty:_objectSpread(_objectSpread({},product.warranty),{},{status:data.status})}));}else{setProduct(_objectSpread(_objectSpread({},product),{},{warranty:_objectSpread(_objectSpread({},product.warranty),{},{status:null,day:null,month:null,year:null,description:null,error:null})}));}if(data.day)setProduct(_objectSpread(_objectSpread({},product),{},{warranty:_objectSpread(_objectSpread({},product.warranty),{},{day:data.day,error:null})}));if(data.month)setProduct(_objectSpread(_objectSpread({},product),{},{warranty:_objectSpread(_objectSpread({},product.warranty),{},{month:data.month,error:null})}));if(data.year)setProduct(_objectSpread(_objectSpread({},product),{},{warranty:_objectSpread(_objectSpread({},product.warranty),{},{year:data.year,error:null})}));if(data.description)setProduct(_objectSpread(_objectSpread({},product),{},{warranty:_objectSpread(_objectSpread({},product.warranty),{},{description:data.description})}));};// Handle EMI\nvar handleEMI=function handleEMI(data){if(data.amount)setProduct(_objectSpread(_objectSpread({},product),{},{emi:_objectSpread(_objectSpread({},product.emi),{},{amount:parseInt(data.amount)})}));if(data.duration)setProduct(_objectSpread(_objectSpread({},product),{},{emi:_objectSpread(_objectSpread({},product.emi),{},{duration:data.duration})}));};// Upload description images\nvar uploadDescriptionImages=/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(data){var formData;return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:setDescriptionImage(_objectSpread(_objectSpread({},descriptionImage),{},{loading:true,value:data.image||null,error:data.error||null}));formData=new FormData();formData.append('image',data.image);_context4.next=5;return Requests.Product.UploadDescImage(id,formData,header);case 5:setDescriptionImage(_objectSpread(_objectSpread({},descriptionImage),{},{loading:false}));case 6:case\"end\":return _context4.stop();}}},_callee4);}));return function uploadDescriptionImages(_x3){return _ref4.apply(this,arguments);};}();// Submit form\nvar onSubmit=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee5(data){var newProduct;return _regeneratorRuntime.wrap(function _callee5$(_context5){while(1){switch(_context5.prev=_context5.next){case 0:if(product.vendor){_context5.next=2;break;}return _context5.abrupt(\"return\",setErrors(_objectSpread(_objectSpread({},error),{},{vendor:'Vendor is required.'})));case 2:if(product.mainCategory){_context5.next=4;break;}return _context5.abrupt(\"return\",setErrors(_objectSpread(_objectSpread({},error),{},{mainCategory:'Main category is required.'})));case 4:if(product.tags.length){_context5.next=6;break;}return _context5.abrupt(\"return\",setErrors(_objectSpread(_objectSpread({},error),{},{tags:'Tags is required.'})));case 6:if(!(product.returnReplacement.status&&!product.returnReplacement.limit)){_context5.next=8;break;}return _context5.abrupt(\"return\",setProduct(_objectSpread(_objectSpread({},product),{},{warranty:_objectSpread(_objectSpread({},product.warranty),{},{limitError:true})})));case 8:if(!(parseInt(data.salePrice)<=parseInt(data.purchasePrice))){_context5.next=13;break;}setError(\"salePrice\",{type:\"manual\",message:\"Sale price must be greater than purchase price\"});return _context5.abrupt(\"return\");case 13:clearErrors(\"salePrice\");case 14:newProduct=_objectSpread(_objectSpread({},data),{},{vendor:product.vendor._id||product.vendor,brand:product.brand&&product.brand._id?product.brand._id:product.brand,mainCategory:product.mainCategory._id||product.mainCategory,subCategory:product.subCategory?product.subCategory._id||product.subCategory:null,leafCategory:product.leafCategory?product.leafCategory._id||product.leafCategory:null,isTrending:product.isTrending,newArrivals:product.newArrivals,bestSale:product.bestSale,tags:product.tags,materials:JSON.stringify(product.materials),additionalInfo:product.additionalInfo,description:product.description,returnReplacement:{status:product.returnReplacement.status,limit:product.returnReplacement.limit,description:product.returnReplacement.description},warranty:{status:product.warranty.status,day:product.warranty.day,month:product.warranty.month,year:product.warranty.year,description:product.warranty.description},emi:{amount:product.emi.amount,duration:product.emi.duration}});setUpdate(true);_context5.next=18;return Requests.Product.Update(id,newProduct,header);case 18:setUpdate(false);case 19:case\"end\":return _context5.stop();}}},_callee5);}));return function onSubmit(_x4){return _ref5.apply(this,arguments);};}();// Submit to delete thumb\nvar deleteThumb=/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee6(){var fileArr,file,nonDeleteFiles;return _regeneratorRuntime.wrap(function _callee6$(_context6){while(1){switch(_context6.prev=_context6.next){case 0:setDelete(_objectSpread(_objectSpread({},isDelete),{},{loading:true}));fileArr=isDelete.file.split('/');file=fileArr.pop();_context6.next=5;return additinalImages.filter(function(item){return item!==isDelete.file;});case 5:nonDeleteFiles=_context6.sent;setAdditionalImages(nonDeleteFiles);_context6.next=9;return Requests.Product.RemoveAdditionalThumb(id,file,header);case 9:setDelete({file:null,show:false,loading:false});case 10:case\"end\":return _context6.stop();}}},_callee6);}));return function deleteThumb(){return _ref6.apply(this,arguments);};}();if(isLoading)return/*#__PURE__*/_jsx(PreLoader,{});return/*#__PURE__*/_jsxs(\"div\",{className:\"edit-product\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-padding\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card border-0 shadow-sm\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header p-3 p-lg-4 bg-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h6\",{className:\"mb-0\",children:\"Edit product\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-auto\",children:/*#__PURE__*/_jsx(Link,{to:\"/dashboard/product\",type:\"button\",className:\"btn shadow-none rounded-circle\",children:/*#__PURE__*/_jsx(Icon,{icon:chevronLeft,size:22})})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body p-4\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[errors.name&&errors.name.message?/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:errors.name&&errors.name.message}):/*#__PURE__*/_jsx(\"p\",{children:\"Product name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",defaultValue:product.name||null,className:\"form-control shadow-none\",placeholder:\"Enter product name\",ref:register({required:\"Product name is required\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[error.vendor?/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:error.vendor}):/*#__PURE__*/_jsx(\"p\",{children:\"Vendor / Publisher\"}),/*#__PURE__*/_jsx(Select,{defaultValue:{value:product.vendor._id,label:product.vendor.name},classNamePrefix:\"custom-select\",styles:customStyles,placeholder:'Select vendor',components:{DropdownIndicator:function DropdownIndicator(){return null;},IndicatorSeparator:function IndicatorSeparator(){return null;}},options:vendors,onChange:function onChange(event){return setProduct(_objectSpread(_objectSpread({},product),{},{vendor:event.value}));}})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Brand / Author\"}),/*#__PURE__*/_jsx(Select,{defaultValue:product.brand?{value:product.brand._id,label:product.brand.name}:null,classNamePrefix:\"custom-select\",styles:customStyles,placeholder:'Select brand',components:{DropdownIndicator:function DropdownIndicator(){return null;},IndicatorSeparator:function IndicatorSeparator(){return null;}},options:brands,onChange:function onChange(event){return setProduct(_objectSpread(_objectSpread({},product),{},{brand:event.value}));}})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-lg-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[error.mainCategory?/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:error.mainCategory}):/*#__PURE__*/_jsx(\"p\",{children:\"Main category\"}),/*#__PURE__*/_jsx(Select,{defaultValue:product.mainCategory?{value:product.mainCategory._id,label:product.mainCategory.name}:null,classNamePrefix:\"custom-select\",styles:customStyles,placeholder:'Select main category',components:{DropdownIndicator:function DropdownIndicator(){return null;},IndicatorSeparator:function IndicatorSeparator(){return null;}},options:categories.options,onChange:handleMainCategory})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-lg-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Sub category\"}),/*#__PURE__*/_jsx(Select,{ref:subCatRefs,defaultValue:product.subCategory?{value:product.subCategory._id,label:product.subCategory.name}:null,classNamePrefix:\"custom-select\",styles:customStyles,placeholder:'Select sub category',components:{DropdownIndicator:function DropdownIndicator(){return null;},IndicatorSeparator:function IndicatorSeparator(){return null;}},options:subCategories.options,onChange:handleSubCategory})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-lg-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Leaf category\"}),/*#__PURE__*/_jsx(Select,{ref:leafCatRefs,defaultValue:product.leafCategory?{value:product.leafCategory._id,label:product.leafCategory.name}:null,classNamePrefix:\"custom-select\",styles:customStyles,placeholder:'Select leaf category',components:{DropdownIndicator:function DropdownIndicator(){return null;},IndicatorSeparator:function IndicatorSeparator(){return null;}},options:leafCategories.options,onChange:handleLeafCategory})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-lg-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"input-group mb-3\",children:/*#__PURE__*/_jsx(Form.Group,{controlId:\"trendingItem\",children:/*#__PURE__*/_jsx(Form.Check,{type:\"checkbox\",label:\"Tranding Item\",checked:product.isTrending,onChange:function onChange(){return setProduct(_objectSpread(_objectSpread({},product),{},{isTrending:!product.isTrending}));}})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-lg-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"input-group mb-3\",children:/*#__PURE__*/_jsx(Form.Group,{controlId:\"newArrival\",children:/*#__PURE__*/_jsx(Form.Check,{type:\"checkbox\",label:\"New Arrivals\",checked:product.newArrivals,onChange:function onChange(){return setProduct(_objectSpread(_objectSpread({},product),{},{newArrivals:!product.newArrivals}));}})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-lg-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"input-group mb-3\",children:/*#__PURE__*/_jsx(Form.Group,{controlId:\"bestSale\",children:/*#__PURE__*/_jsx(Form.Check,{type:\"checkbox\",label:\"Best Sale\",checked:product.bestSale,onChange:function onChange(){return setProduct(_objectSpread(_objectSpread({},product),{},{bestSale:!product.bestSale}));}})})})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-lg-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[error.tags?/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:error.tags}):/*#__PURE__*/_jsx(\"p\",{children:\"Tags\"}),/*#__PURE__*/_jsx(CreatableSelect,{defaultValue:product.tags?product.tags.map(function(item){return{value:item,label:item};}):null,classNamePrefix:\"custom-select\",isMulti:true,styles:customStyles,placeholder:'Enter tags',components:{DropdownIndicator:function DropdownIndicator(){return null;},IndicatorSeparator:function IndicatorSeparator(){return null;}},onChange:function onChange(event){return setProduct(_objectSpread(_objectSpread({},product),{},{tags:event.map(function(item){return item.value;})}));}})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-lg-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[errors.sku&&errors.sku.message?/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:errors.sku&&errors.sku.message}):/*#__PURE__*/_jsx(\"p\",{children:\"Product SKU\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"sku\",defaultValue:product.sku,className:\"form-control shadow-none\",placeholder:\"Enter SKU\",ref:register({required:\"SKU is required\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-lg-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[errors.stockAmount&&errors.stockAmount.message?/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:errors.stockAmount&&errors.stockAmount.message}):/*#__PURE__*/_jsx(\"p\",{children:\"Stock amount\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"stockAmount\",defaultValue:product.stockAmount,className:\"form-control shadow-none\",placeholder:\"Enter stock name\",ref:register({required:\"Stock amount is required\",pattern:{value:/^\\d+$/,message:\"The amount must be in number.\"}})})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid pricing-container mb-4\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 py-3 mb-3 border-bottom\",children:/*#__PURE__*/_jsx(\"h6\",{className:\"mb-0\",children:\"Pricing\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-lg-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[errors.purchasePrice&&errors.purchasePrice.message?/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:errors.purchasePrice&&errors.purchasePrice.message}):/*#__PURE__*/_jsx(\"p\",{children:\"Purchase price\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"purchasePrice\",defaultValue:product.purchasePrice,className:\"form-control shadow-none\",placeholder:\"Enter purchase price\",ref:register({required:\"Purchase price is required\",pattern:{value:/^\\d+$/,message:\"Price must be in number.\"}})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-lg-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[errors.salePrice&&errors.salePrice.message?/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:errors.salePrice&&errors.salePrice.message}):/*#__PURE__*/_jsx(\"p\",{children:\"Sale price\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"salePrice\",defaultValue:product.salePrice,className:\"form-control shadow-none\",placeholder:\"Enter sale price\",ref:register({required:\"Sale price is required\",pattern:{value:/^\\d+$/,message:\"Price must be in number.\"}})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-lg-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Discount Type\"}),/*#__PURE__*/_jsxs(\"select\",{name:\"discountType\",className:\"form-control shadow-none\",ref:register(),defaultValue:product.discountType,children:[/*#__PURE__*/_jsx(\"option\",{value:\"\",children:\"Select type\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Flat\",children:\"Flat\"}),/*#__PURE__*/_jsx(\"option\",{value:\"Percentage\",children:\"Percentage\"})]})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-lg-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Discount Amount\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",name:\"discountAmount\",placeholder:\"Enter amount\",className:\"form-control shadow-none\",defaultValue:product.discountAmount,ref:register()})]})})]})}),/*#__PURE__*/_jsx(ProductAdditionalEditInput,{value:product.additionalInfo,update:getAdditional}),/*#__PURE__*/_jsx(DescriptionEditInput,{value:product.description,update:getDescription}),/*#__PURE__*/_jsx(\"div\",{className:\"row mb-2 mb-lg-3\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"Video Link\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"video\",className:\"form-control shadow-none\",defaultValue:product.video||null,placeholder:\"https://www.youtube.com/embed/Fm2TH7e93ug\",ref:register()})]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"row mb-3 mb-lg-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[product.thumbnail||thumbnail.preview?/*#__PURE__*/_jsx(\"div\",{className:\"thumbnail-container text-center\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"image border\",children:[/*#__PURE__*/_jsx(\"img\",{src:thumbnail.preview||product.thumbnail.small,className:\"img-fluid\",alt:\"...\"}),thumbnail.isUpload?/*#__PURE__*/_jsx(\"div\",{className:\"thumbnail-overlay flex-center flex-column\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loader\"})}):null]})}):null,!thumbnail.isUpload?/*#__PURE__*/_jsx(\"div\",{className:\"thumbnail-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"image border\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".jpg, .png, .jpeg\",className:\"upload\",onChange:thumbnailHandeller}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-center flex-column\",children:/*#__PURE__*/_jsx(Icon,{icon:plus,size:22})})]})}):null]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"row mb-3 mb-lg-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex flex-wrap\",children:[additinalImages&&additinalImages.map(function(file,i){return/*#__PURE__*/_jsxs(\"div\",{className:\"thumbnail-container text-center\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"image border\",children:/*#__PURE__*/_jsx(\"img\",{src:file,className:\"img-fluid\",alt:\"...\"})}),additionalUpload?/*#__PURE__*/_jsx(\"div\",{className:\"thumbnail-overlay flex-center flex-column\",children:/*#__PURE__*/_jsx(\"div\",{className:\"loader\"})}):null,/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"btn shadow-sm rounded-circle\",onClick:function onClick(){return setDelete({file:file,show:true,loading:false});},children:/*#__PURE__*/_jsx(Icon,{icon:trash2,size:23})})]},i);}),!additionalUpload?/*#__PURE__*/_jsx(\"div\",{className:\"thumbnail-container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"image border\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"file\",accept:\".jpg, .png, .jpeg\",className:\"upload\",onChange:additionalImageHandeller}),/*#__PURE__*/_jsx(\"div\",{className:\"flex-center flex-column\",children:/*#__PURE__*/_jsx(Icon,{icon:plus,size:22})})]})}):null]})})}),/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 text-right\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn shadow-none\",disabled:isUpdate,children:isUpdate?'Updating...':'Update Product'})})})]})})]})})})}),/*#__PURE__*/_jsx(DeleteModal,{show:isDelete.show,loading:isDelete.loading,message:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h6\",{children:\"Want to delete this image ?\"}),/*#__PURE__*/_jsx(\"img\",{src:isDelete.file?isDelete.file:null,className:\"img-fluid\",height:150,alt:\"product\"})]}),onHide:function onHide(){return setDelete({file:null,show:false,loading:false});},doDelete:deleteThumb})]});};export default Edit;var customStyles={control:function control(provided,state){return _objectSpread(_objectSpread({},provided),{},{minHeight:42,fontSize:14,color:'#000',boxShadow:'none','&:hover':{borderColor:'1px solid #ced4da'},border:state.isFocused?'1px solid #dfdfdf':'1px solid #ced4da',borderRadius:4});}};","map":{"version":3,"sources":["D:/previous/src/pages/product/Edit.js"],"names":["React","useState","useCallback","useEffect","useRef","Select","Form","Icon","useForm","Link","useParams","chevronLeft","plus","trash2","DeleteModal","SingleFileUploader","PreLoader","CreatableSelect","Requests","ProductMaterialEditInput","ProductAdditionalEditInput","ReturnPolicy","Warranty","Emi","DescriptionEditInput","Edit","register","handleSubmit","setError","clearErrors","errors","id","subCatRefs","leafCatRefs","error","setErrors","isUpdate","setUpdate","isLoading","setLoading","file","show","loading","isDelete","setDelete","product","setProduct","vendors","setVendors","brands","setBrands","options","categories","setCategories","subCategories","setSubCategories","leafCategories","setLeafCategories","preview","isUpload","thumbnail","setThumbnail","additinalImages","setAdditionalImages","additionalUpload","setAdditionalUpload","value","descriptionImage","setDescriptionImage","headers","Authorization","localStorage","getItem","header","getData","Options","Index","response","exCategory","mainCategories","Product","Show","productResponse","status","data","additional","handleMainCategory","event","children","child","current","select","clearValue","mainCategory","subCategory","leafCategory","length","exChildren","handleSubCategory","handleLeafCategory","thumbnailHandeller","target","files","URL","createObjectURL","formData","FormData","append","UpdateThumb","additionalImageHandeller","fileURl","AddThumb","getAdditional","additionalInfo","getMaterial","materials","getDescription","description","handleReturnReplacement","returnReplacement","limit","limitError","handleWarranty","warranty","day","month","year","handleEMI","amount","emi","parseInt","duration","uploadDescriptionImages","image","UploadDescImage","onSubmit","vendor","tags","salePrice","purchasePrice","type","message","newProduct","_id","brand","isTrending","newArrivals","bestSale","JSON","stringify","Update","deleteThumb","fileArr","split","pop","filter","item","nonDeleteFiles","RemoveAdditionalThumb","name","required","label","customStyles","DropdownIndicator","IndicatorSeparator","map","sku","stockAmount","pattern","discountType","discountAmount","video","small","i","control","provided","state","minHeight","fontSize","color","boxShadow","borderColor","border","isFocused","borderRadius"],"mappings":"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","sourcesContent":["import React, { useState, useCallback, useEffect, useRef } from 'react'\nimport './style.scss'\nimport 'react-toastify/dist/ReactToastify.css'\nimport Select from 'react-select'\nimport { Form } from 'react-bootstrap'\nimport { Icon } from 'react-icons-kit'\nimport { useForm } from 'react-hook-form'\nimport { Link, useParams } from 'react-router-dom'\nimport { chevronLeft, plus, trash2 } from 'react-icons-kit/feather'\nimport { DeleteModal } from '../../components/modal/Delete'\nimport { SingleFileUploader } from '../../components/fileUploader/Index'\nimport { PreLoader } from '../../components/loading/Index'\n\nimport CreatableSelect from 'react-select/creatable'\nimport Requests from '../../utils/Requests/Index'\nimport ProductMaterialEditInput from '../../components/form/product/MaterialEdit'\nimport ProductAdditionalEditInput from '../../components/form/product/AdditionalEdit'\nimport ReturnPolicy from '../../components/form/product/ReturnPolicy'\nimport Warranty from '../../components/form/product/Warranty'\nimport Emi from '../../components/form/product/Emi'\nimport DescriptionEditInput from '../../components/form/product/DescriptionEdit'\n\nconst Edit = () => {\n    const { register, handleSubmit, setError, clearErrors, errors } = useForm()\n    const { id } = useParams()\n    const subCatRefs = useRef()\n    const leafCatRefs = useRef()\n    const [error, setErrors] = useState({})\n    const [isUpdate, setUpdate] = useState(false)\n    const [isLoading, setLoading] = useState(true)\n    const [isDelete, setDelete] = useState({ file: null, show: false, loading: false })\n\n    const [product, setProduct] = useState({})\n    const [vendors, setVendors] = useState([])\n    const [brands, setBrands] = useState([])\n\n    const [categories, setCategories] = useState({ options: [] })\n    const [subCategories, setSubCategories] = useState({ options: [] })\n    const [leafCategories, setLeafCategories] = useState({ options: [] })\n\n    const [thumbnail, setThumbnail] = useState({ preview: null, isUpload: false })\n    const [additinalImages, setAdditionalImages] = useState([])\n    const [additionalUpload, setAdditionalUpload] = useState(false)\n    const [descriptionImage, setDescriptionImage] = useState({ value: null, loading: false, error: null })\n    const [header] = useState({\n        headers: { Authorization: \"Bearer \" + localStorage.getItem('token') }\n    })\n\n    // Get Data \n    const getData = useCallback(async () => {\n        const response = await Requests.Options.Index(header)\n        if (response) {\n            setCategories(exCategory => ({ ...exCategory, options: response.mainCategories }))\n            setBrands(response.brands)\n            setVendors(response.vendors)\n        }\n\n        const productResponse = await Requests.Product.Show(id, header)\n        if (productResponse && productResponse.status === 200) {\n            setProduct(productResponse.data.product)\n            setAdditionalImages(productResponse.data.product.thumbnail.additional)\n        }\n        setLoading(false)\n    }, [id, header])\n\n    useEffect(() => {\n        getData()\n    }, [id, header, getData])\n\n    // Handle main category\n    const handleMainCategory = event => {\n        const value = event.value\n        const children = event.child\n        subCatRefs.current.select.clearValue()\n        leafCatRefs.current.select.clearValue()\n        setProduct({ ...product, mainCategory: value, subCategory: null, leafCategory: null })\n\n        if (children && children.length) {\n            setSubCategories(exChildren => ({ ...exChildren, options: children }))\n        } else {\n            setSubCategories(exChildren => ({\n                ...exChildren,\n                options: []\n            }))\n        }\n    }\n\n    // Handle sub category\n    const handleSubCategory = event => {\n        if (event) {\n            const value = event.value\n            const children = event.child\n            leafCatRefs.current.select.clearValue()\n            setProduct({ ...product, subCategory: value, leafCategory: null })\n\n            if (children && children.length) {\n                setLeafCategories(exChildren => ({ ...exChildren, options: children }))\n            } else {\n                setLeafCategories(exChildren => ({\n                    ...exChildren,\n                    options: []\n                }))\n            }\n        }\n    }\n\n    // Handle leaf category\n    const handleLeafCategory = event => {\n        if (event) setProduct({ ...product, leafCategory: event.value })\n    }\n\n    // Thumbnail handeller\n    const thumbnailHandeller = async (event) => {\n        let file = event.target.files[0]\n        if (file) {\n            setThumbnail({ preview: URL.createObjectURL(file), isUpload: true })\n\n            let formData = new FormData()\n            formData.append('image', file)\n\n            await Requests.Product.UpdateThumb(id, formData, header)\n            setThumbnail({ preview: URL.createObjectURL(file), isUpload: false })\n        }\n    }\n\n    // Additinal Image handeller\n    const additionalImageHandeller = async (event) => {\n        const file = event.target.files[0]\n        const fileURl = URL.createObjectURL(file)\n        if (file) {\n            setAdditionalImages([...additinalImages, fileURl])\n            setAdditionalUpload(true)\n\n            let formData = new FormData()\n            formData.append('image', file)\n\n            await Requests.Product.AddThumb(id, formData, header)\n            setAdditionalUpload(false)\n        }\n    }\n\n    // get additional info data\n    const getAdditional = data => setProduct({ ...product, additionalInfo: data })\n\n    // get material info data\n    const getMaterial = data => setProduct({ ...product, materials: data })\n\n    // get description data\n    const getDescription = data => setProduct({ ...product, description: data })\n\n    // Handle return & replacement\n    const handleReturnReplacement = data => {\n        if (data.status) {\n            setProduct({ ...product, returnReplacement: { ...product.returnReplacement, status: data.status } })\n        } else {\n            setProduct({ ...product, returnReplacement: { ...product.returnReplacement, status: false, limit: null, description: null, limitError: null } })\n        }\n        if (data.limit) setProduct({ ...product, returnReplacement: { ...product.returnReplacement, limit: data.limit, limitError: null } })\n        if (data.description) setProduct({ ...product, returnReplacement: { ...product.returnReplacement, description: data.description } })\n    }\n\n    // Handle warranty\n    const handleWarranty = data => {\n        if (data.status) {\n            setProduct({ ...product, warranty: { ...product.warranty, status: data.status } })\n        } else {\n            setProduct({ ...product, warranty: { ...product.warranty, status: null, day: null, month: null, year: null, description: null, error: null } })\n        }\n\n        if (data.day) setProduct({ ...product, warranty: { ...product.warranty, day: data.day, error: null } })\n        if (data.month) setProduct({ ...product, warranty: { ...product.warranty, month: data.month, error: null } })\n        if (data.year) setProduct({ ...product, warranty: { ...product.warranty, year: data.year, error: null } })\n        if (data.description) setProduct({ ...product, warranty: { ...product.warranty, description: data.description } })\n    }\n\n    // Handle EMI\n    const handleEMI = data => {\n        if (data.amount) setProduct({ ...product, emi: { ...product.emi, amount: parseInt(data.amount) } })\n        if (data.duration) setProduct({ ...product, emi: { ...product.emi, duration: data.duration } })\n    }\n\n    // Upload description images\n    const uploadDescriptionImages = async (data) => {\n        setDescriptionImage({\n            ...descriptionImage,\n            loading: true,\n            value: data.image || null,\n            error: data.error || null\n        })\n\n        const formData = new FormData()\n        formData.append('image', data.image)\n\n        await Requests.Product.UploadDescImage(id, formData, header)\n        setDescriptionImage({\n            ...descriptionImage,\n            loading: false\n        })\n    }\n\n    // Submit form\n    const onSubmit = async (data) => {\n\n        if (!product.vendor) return setErrors({ ...error, vendor: 'Vendor is required.' })\n        if (!product.mainCategory) return setErrors({ ...error, mainCategory: 'Main category is required.' })\n        if (!product.tags.length) return setErrors({ ...error, tags: 'Tags is required.' })\n        if (product.returnReplacement.status && !product.returnReplacement.limit) {\n            return setProduct({ ...product, warranty: { ...product.warranty, limitError: true } })\n        }\n        // if (product.warranty.status && !product.warranty.day) {\n        //     return setProduct({ ...product, warranty: { ...product.warranty, error: true } })\n        // }\n\n        if (parseInt(data.salePrice) <= parseInt(data.purchasePrice)) {\n            setError(\"salePrice\", {\n                type: \"manual\",\n                message: \"Sale price must be greater than purchase price\"\n            })\n            return\n        } else {\n            clearErrors(\"salePrice\")\n        }\n\n        const newProduct = {\n            ...data,\n            vendor: product.vendor._id || product.vendor,\n            brand: product.brand && product.brand._id ? product.brand._id : product.brand,\n\n            mainCategory: product.mainCategory._id || product.mainCategory,\n            subCategory: product.subCategory ? product.subCategory._id || product.subCategory : null,\n            leafCategory: product.leafCategory ? product.leafCategory._id || product.leafCategory : null,\n\n            isTrending: product.isTrending,\n            newArrivals: product.newArrivals,\n            bestSale: product.bestSale,\n            tags: product.tags,\n            materials: JSON.stringify(product.materials),\n            additionalInfo: product.additionalInfo,\n            description: product.description,\n            returnReplacement: {\n                status: product.returnReplacement.status,\n                limit: product.returnReplacement.limit,\n                description: product.returnReplacement.description\n            },\n            warranty: {\n                status: product.warranty.status,\n                day: product.warranty.day,\n                month: product.warranty.month,\n                year: product.warranty.year,\n                description: product.warranty.description\n            },\n            emi: {\n                amount: product.emi.amount,\n                duration: product.emi.duration\n            }\n        }\n\n        setUpdate(true)\n        await Requests.Product.Update(id, newProduct, header)\n        setUpdate(false)\n    }\n\n    // Submit to delete thumb\n    const deleteThumb = async () => {\n        setDelete({ ...isDelete, loading: true })\n        const fileArr = isDelete.file.split('/')\n        const file = fileArr.pop()\n\n        const nonDeleteFiles = await additinalImages.filter(item => item !== isDelete.file)\n        setAdditionalImages(nonDeleteFiles)\n\n        await Requests.Product.RemoveAdditionalThumb(id, file, header)\n        setDelete({ file: null, show: false, loading: false })\n    }\n\n    if (isLoading) return <PreLoader />\n\n    return (\n        <div className=\"edit-product\">\n            <div className=\"container-fluid\">\n                <div className=\"row\">\n                    <div className=\"col-12 col-padding\">\n                        <div className=\"card border-0 shadow-sm\">\n                            <div className=\"card-header p-3 p-lg-4 bg-white\">\n                                <div className=\"d-flex\">\n                                    <div><h6 className=\"mb-0\">Edit product</h6></div>\n                                    <div className=\"ml-auto\">\n                                        <Link\n                                            to=\"/dashboard/product\"\n                                            type=\"button\"\n                                            className=\"btn shadow-none rounded-circle\"\n                                        >\n                                            <Icon icon={chevronLeft} size={22} />\n                                        </Link>\n                                    </div>\n                                </div>\n                            </div>\n\n                            {/* Update form */}\n                            <div className=\"card-body p-4\">\n                                <form onSubmit={handleSubmit(onSubmit)}>\n\n                                    <div className=\"row\">\n\n                                        {/* Name */}\n                                        <div className=\"col-12\">\n                                            <div className=\"form-group mb-4\">\n                                                {errors.name && errors.name.message ? (\n                                                    <p className=\"text-danger\">{errors.name && errors.name.message}</p>\n                                                ) : <p>Product name</p>}\n\n                                                <input\n                                                    type=\"text\"\n                                                    name=\"name\"\n                                                    defaultValue={product.name || null}\n                                                    className=\"form-control shadow-none\"\n                                                    placeholder=\"Enter product name\"\n                                                    ref={register({\n                                                        required: \"Product name is required\"\n                                                    })}\n                                                />\n                                            </div>\n                                        </div>\n\n                                        {/* Product bengali name */}\n                                        {/* <div className=\"col-12\">\n                                            <div className=\"form-group mb-4\">\n                                                {errors.bn_name && errors.bn_name.message ? (\n                                                    <p className=\"text-danger\">{errors.bn_name && errors.bn_name.message}</p>\n                                                ) : <p>Product name (EN)</p>}\n\n                                                <input\n                                                    type=\"text\"\n                                                    name=\"bn_name\"\n                                                    defaultValue={product.bn_name || null}\n                                                    className=\"form-control shadow-none\"\n                                                    placeholder=\"Enter product bengali name\"\n                                                    // ref={register({\n                                                    //     required: \"Product name is required\"\n                                                    // })}\n                                                />\n                                            </div>\n                                        </div> */}\n\n                                        {/* Vendor */}\n                                        <div className=\"col-12\">\n                                            <div className=\"form-group mb-4\">\n                                                {error.vendor ?\n                                                    <p className=\"text-danger\">{error.vendor}</p>\n                                                    : <p>Vendor / Publisher</p>}\n\n                                                <Select\n                                                    defaultValue={{ value: product.vendor._id, label: product.vendor.name }}\n                                                    classNamePrefix=\"custom-select\"\n                                                    styles={customStyles}\n                                                    placeholder={'Select vendor'}\n                                                    components={{ DropdownIndicator: () => null, IndicatorSeparator: () => null }}\n                                                    options={vendors}\n                                                    onChange={(event) => setProduct({ ...product, vendor: event.value })}\n                                                />\n                                            </div>\n                                        </div>\n\n                                        {/* Brand */}\n                                        <div className=\"col-12\">\n                                            <div className=\"form-group mb-4\">\n                                                <p>Brand / Author</p>\n\n                                                <Select\n                                                    defaultValue={product.brand ? { value: product.brand._id, label: product.brand.name } : null}\n                                                    classNamePrefix=\"custom-select\"\n                                                    styles={customStyles}\n                                                    placeholder={'Select brand'}\n                                                    components={{ DropdownIndicator: () => null, IndicatorSeparator: () => null }}\n                                                    options={brands}\n                                                    onChange={(event) => setProduct({ ...product, brand: event.value })}\n                                                />\n                                            </div>\n                                        </div>\n\n                                        {/* Main Category */}\n                                        <div className=\"col-12 col-lg-4\">\n                                            <div className=\"form-group mb-4\">\n                                                {error.mainCategory ?\n                                                    <p className=\"text-danger\">{error.mainCategory}</p>\n                                                    : <p>Main category</p>}\n\n                                                <Select\n                                                    defaultValue={product.mainCategory ? { value: product.mainCategory._id, label: product.mainCategory.name } : null}\n                                                    classNamePrefix=\"custom-select\"\n                                                    styles={customStyles}\n                                                    placeholder={'Select main category'}\n                                                    components={{ DropdownIndicator: () => null, IndicatorSeparator: () => null }}\n                                                    options={categories.options}\n                                                    onChange={handleMainCategory}\n                                                />\n                                            </div>\n                                        </div>\n\n                                        {/* Sub Category */}\n                                        <div className=\"col-12 col-lg-4\">\n                                            <div className=\"form-group mb-4\">\n                                                <p>Sub category</p>\n\n                                                <Select\n                                                    ref={subCatRefs}\n                                                    defaultValue={product.subCategory ? { value: product.subCategory._id, label: product.subCategory.name } : null}\n                                                    classNamePrefix=\"custom-select\"\n                                                    styles={customStyles}\n                                                    placeholder={'Select sub category'}\n                                                    components={{ DropdownIndicator: () => null, IndicatorSeparator: () => null }}\n                                                    options={subCategories.options}\n                                                    onChange={handleSubCategory}\n                                                />\n                                            </div>\n                                        </div>\n\n                                        {/* Leaf Category */}\n                                        <div className=\"col-12 col-lg-4\">\n                                            <div className=\"form-group mb-4\">\n                                                <p>Leaf category</p>\n\n                                                <Select\n                                                    ref={leafCatRefs}\n                                                    defaultValue={product.leafCategory ? { value: product.leafCategory._id, label: product.leafCategory.name } : null}\n                                                    classNamePrefix=\"custom-select\"\n                                                    styles={customStyles}\n                                                    placeholder={'Select leaf category'}\n                                                    components={{ DropdownIndicator: () => null, IndicatorSeparator: () => null }}\n                                                    options={leafCategories.options}\n                                                    onChange={handleLeafCategory}\n                                                />\n                                            </div>\n                                        </div>\n\n                                        {/* Trending item */}\n                                        <div className=\"col-12 col-lg-4\">\n                                            <div className=\"input-group mb-3\">\n                                                <Form.Group controlId=\"trendingItem\">\n                                                    <Form.Check\n                                                        type=\"checkbox\"\n                                                        label=\"Tranding Item\"\n                                                        checked={product.isTrending}\n                                                        onChange={() => setProduct({ ...product, isTrending: !product.isTrending })}\n                                                    />\n                                                </Form.Group>\n                                            </div>\n                                        </div>\n\n                                        {/* New Arrivals */}\n                                        <div className=\"col-12 col-lg-4\">\n                                            <div className=\"input-group mb-3\">\n                                                <Form.Group controlId=\"newArrival\">\n                                                    <Form.Check\n                                                        type=\"checkbox\"\n                                                        label=\"New Arrivals\"\n                                                        checked={product.newArrivals}\n                                                        onChange={() => setProduct({ ...product, newArrivals: !product.newArrivals })}\n                                                    />\n                                                </Form.Group>\n                                            </div>\n                                        </div>\n\n                                        {/* Best Sale */}\n                                        <div className=\"col-12 col-lg-4\">\n                                            <div className=\"input-group mb-3\">\n                                                <Form.Group controlId=\"bestSale\">\n                                                    <Form.Check\n                                                        type=\"checkbox\"\n                                                        label=\"Best Sale\"\n                                                        checked={product.bestSale}\n                                                        onChange={() => setProduct({ ...product, bestSale: !product.bestSale })}\n                                                    />\n                                                </Form.Group>\n                                            </div>\n                                        </div>\n\n                                        {/* Tags */}\n                                        <div className=\"col-12 col-lg-4\">\n                                            <div className=\"form-group mb-4\">\n                                                {error.tags ?\n                                                    <p className=\"text-danger\">{error.tags}</p>\n                                                    : <p>Tags</p>}\n\n                                                <CreatableSelect\n                                                    defaultValue={product.tags ? product.tags.map(item => ({ value: item, label: item })) : null}\n                                                    classNamePrefix=\"custom-select\"\n                                                    isMulti\n                                                    styles={customStyles}\n                                                    placeholder={'Enter tags'}\n                                                    components={{ DropdownIndicator: () => null, IndicatorSeparator: () => null }}\n                                                    onChange={(event) => setProduct({ ...product, tags: event.map(item => item.value) })}\n                                                />\n                                            </div>\n                                        </div>\n\n                                        {/* SKU */}\n                                        <div className=\"col-12 col-lg-4\">\n                                            <div className=\"form-group mb-4\">\n                                                {errors.sku && errors.sku.message ? (\n                                                    <p className=\"text-danger\">{errors.sku && errors.sku.message}</p>\n                                                ) : <p>Product SKU</p>}\n\n                                                <input\n                                                    type=\"text\"\n                                                    name=\"sku\"\n                                                    defaultValue={product.sku}\n                                                    className=\"form-control shadow-none\"\n                                                    placeholder=\"Enter SKU\"\n                                                    ref={register({\n                                                        required: \"SKU is required\"\n                                                    })}\n                                                />\n                                            </div>\n                                        </div>\n\n                                        {/* Stock amount */}\n                                        <div className=\"col-12 col-lg-4\">\n                                            <div className=\"form-group mb-4\">\n                                                {errors.stockAmount && errors.stockAmount.message ? (\n                                                    <p className=\"text-danger\">{errors.stockAmount && errors.stockAmount.message}</p>\n                                                ) : <p>Stock amount</p>}\n\n                                                <input\n                                                    type=\"number\"\n                                                    name=\"stockAmount\"\n                                                    defaultValue={product.stockAmount}\n                                                    className=\"form-control shadow-none\"\n                                                    placeholder=\"Enter stock name\"\n                                                    ref={register({\n                                                        required: \"Stock amount is required\",\n                                                        pattern: {\n                                                            value: /^\\d+$/,\n                                                            message: \"The amount must be in number.\"\n                                                        }\n                                                    })}\n                                                />\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                    {/* Pricing */}\n                                    <div className=\"container-fluid pricing-container mb-4\">\n                                        <div className=\"row\">\n                                            <div className=\"col-12 py-3 mb-3 border-bottom\">\n                                                <h6 className=\"mb-0\">Pricing</h6>\n                                            </div>\n\n                                            {/* Purchase price */}\n                                            <div className=\"col-12 col-lg-6\">\n                                                <div className=\"form-group mb-4\">\n                                                    {errors.purchasePrice && errors.purchasePrice.message ? (\n                                                        <p className=\"text-danger\">{errors.purchasePrice && errors.purchasePrice.message}</p>\n                                                    ) : <p>Purchase price</p>}\n\n                                                    <input\n                                                        type=\"number\"\n                                                        name=\"purchasePrice\"\n                                                        defaultValue={product.purchasePrice}\n                                                        className=\"form-control shadow-none\"\n                                                        placeholder=\"Enter purchase price\"\n                                                        ref={register({\n                                                            required: \"Purchase price is required\",\n                                                            pattern: {\n                                                                value: /^\\d+$/,\n                                                                message: \"Price must be in number.\"\n                                                            }\n                                                        })}\n                                                    />\n                                                </div>\n                                            </div>\n\n                                            {/* Sale Price */}\n                                            <div className=\"col-12 col-lg-6\">\n                                                <div className=\"form-group mb-4\">\n                                                    {errors.salePrice && errors.salePrice.message ? (\n                                                        <p className=\"text-danger\">{errors.salePrice && errors.salePrice.message}</p>\n                                                    ) : <p>Sale price</p>}\n\n                                                    <input\n                                                        type=\"number\"\n                                                        name=\"salePrice\"\n                                                        defaultValue={product.salePrice}\n                                                        className=\"form-control shadow-none\"\n                                                        placeholder=\"Enter sale price\"\n                                                        ref={register({\n                                                            required: \"Sale price is required\",\n                                                            pattern: {\n                                                                value: /^\\d+$/,\n                                                                message: \"Price must be in number.\"\n                                                            }\n                                                        })}\n                                                    />\n                                                </div>\n                                            </div>\n\n                                            {/* Discount type */}\n                                            <div className=\"col-12 col-lg-6\">\n                                                <div className=\"form-group mb-4\">\n                                                    <p>Discount Type</p>\n\n                                                    <select\n                                                        name=\"discountType\"\n                                                        className=\"form-control shadow-none\"\n                                                        ref={register()}\n                                                        defaultValue={product.discountType}\n                                                    >\n                                                        <option value=\"\">Select type</option>\n                                                        <option value=\"Flat\">Flat</option>\n                                                        <option value=\"Percentage\">Percentage</option>\n                                                    </select>\n                                                </div>\n                                            </div>\n\n                                            {/* Discount Amount */}\n                                            <div className=\"col-12 col-lg-6\">\n                                                <div className=\"form-group mb-4\">\n                                                    <p>Discount Amount</p>\n\n                                                    <input\n                                                        type=\"number\"\n                                                        name=\"discountAmount\"\n                                                        placeholder=\"Enter amount\"\n                                                        className=\"form-control shadow-none\"\n                                                        defaultValue={product.discountAmount}\n                                                        ref={register()}\n                                                    />\n                                                </div>\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                    {/* <ProductMaterialEditInput\n                                        value={product.materials}\n                                        update={getMaterial}\n                                    /> */}\n\n                                    <ProductAdditionalEditInput\n                                        value={product.additionalInfo}\n                                        update={getAdditional}\n                                    />\n\n                                    {/* <ReturnPolicy\n                                        data={handleReturnReplacement}\n                                        deafult={product.returnReplacement}\n                                        error={product.returnReplacement && product.returnReplacement.limitError ? product.returnReplacement.limitError : null}\n                                    /> */}\n\n                                    {/* <Warranty\n                                        data={handleWarranty}\n                                        deafult={product.warranty}\n                                        error={product.warranty && product.warranty.error ? product.warranty.error : null}\n                                    /> */}\n\n                                    {/* <Emi\n                                        deafult={product.emi}\n                                        data={handleEMI}\n                                    /> */}\n\n                                    <DescriptionEditInput\n                                        value={product.description}\n                                        update={getDescription}\n                                    />\n                                    {/* <div className=\"form-group\">\n                                        <label>Example textarea</label>\n                                        <textarea\n                                            name=\"description\"\n                                            className=\"form-control\"\n                                            // id=\"exampleFormControlTextarea1\"\n                                            defaultValue={product.description}\n                                            rows=\"3\"\n                                            ref={register()}\n                                        />\n                                    </div> */}\n\n                                    {/* Description file upload */}\n                                    {/* <div className=\"d-flex flex-wrap\">\n                                        {product.descriptionImages && product.descriptionImages.length ?\n                                            product.descriptionImages.map((item, i) =>\n                                                <div\n                                                    key={i}\n                                                    className=\"border mr-1 mb-1\"\n                                                    style={{ width: 150, height: 150 }}\n                                                >\n                                                    <img src={item} className=\"img-fluid\" alt=\"...\" />\n                                                </div>\n                                            ) : null\n                                        }\n\n                                        <div>\n                                            <SingleFileUploader\n                                                width={150}\n                                                height={150}\n                                                limit={8192}\n                                                error={descriptionImage.error}\n                                                loading={descriptionImage.loading}\n                                                dataHandeller={uploadDescriptionImages}\n                                            />\n                                        </div>\n                                    </div> */}\n\n                                    {/* Video */}\n                                    <div className=\"row mb-2 mb-lg-3\">\n                                        <div className=\"col-12\">\n                                            <div className=\"form-group mb-4\">\n                                                <p>Video Link</p>\n\n                                                <input\n                                                    type=\"text\"\n                                                    name=\"video\"\n                                                    className=\"form-control shadow-none\"\n                                                    defaultValue={product.video || null}\n                                                    placeholder=\"https://www.youtube.com/embed/Fm2TH7e93ug\"\n                                                    ref={register()}\n                                                />\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                    {/* Thumbnail upload & preview Container */}\n                                    <div className=\"row mb-3 mb-lg-4\">\n                                        <div className=\"col-12\">\n                                            <div className=\"d-flex\">\n                                                {/* image preview */}\n                                                {product.thumbnail || thumbnail.preview ?\n                                                    <div className=\"thumbnail-container text-center\">\n                                                        <div className=\"image border\">\n                                                            <img src={thumbnail.preview || product.thumbnail.small} className=\"img-fluid\" alt=\"...\" />\n\n                                                            {/* Loading overlay */}\n                                                            {thumbnail.isUpload ?\n                                                                <div className=\"thumbnail-overlay flex-center flex-column\">\n                                                                    <div className=\"loader\"></div>\n                                                                </div>\n                                                                : null}\n                                                        </div>\n                                                    </div>\n                                                    : null}\n\n                                                {!thumbnail.isUpload ?\n                                                    <div className=\"thumbnail-container\">\n                                                        <div className=\"image border\">\n                                                            <input\n                                                                type=\"file\"\n                                                                accept=\".jpg, .png, .jpeg\"\n                                                                className=\"upload\"\n                                                                onChange={thumbnailHandeller}\n                                                            />\n                                                            <div className=\"flex-center flex-column\">\n                                                                <Icon icon={plus} size={22} />\n                                                            </div>\n                                                        </div>\n                                                    </div>\n                                                    : null}\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                    {/* Additional images upload & preview Container */}\n                                    <div className=\"row mb-3 mb-lg-4\">\n                                        <div className=\"col-12\">\n                                            <div className=\"d-flex flex-wrap\">\n\n                                                {/* image preview */}\n                                                {additinalImages && additinalImages.map((file, i) =>\n                                                    <div className=\"thumbnail-container text-center\" key={i}>\n                                                        <div className=\"image border\">\n                                                            <img src={file} className=\"img-fluid\" alt=\"...\" />\n                                                        </div>\n                                                        {additionalUpload ?\n                                                            <div className=\"thumbnail-overlay flex-center flex-column\">\n                                                                <div className=\"loader\"></div>\n                                                            </div>\n                                                            : null}\n\n                                                        {/* File delete button */}\n                                                        <button\n                                                            type=\"button\"\n                                                            className=\"btn shadow-sm rounded-circle\"\n                                                            onClick={() => setDelete({ file: file, show: true, loading: false })}\n                                                        >\n                                                            <Icon icon={trash2} size={23} />\n                                                        </button>\n                                                    </div>\n                                                )}\n\n                                                {!additionalUpload ?\n                                                    <div className=\"thumbnail-container\">\n                                                        <div className=\"image border\">\n                                                            <input\n                                                                type=\"file\"\n                                                                accept=\".jpg, .png, .jpeg\"\n                                                                className=\"upload\"\n                                                                onChange={additionalImageHandeller}\n                                                            />\n                                                            <div className=\"flex-center flex-column\">\n                                                                <Icon icon={plus} size={22} />\n                                                            </div>\n                                                        </div>\n                                                    </div>\n                                                    : null}\n                                            </div>\n                                        </div>\n                                    </div>\n\n                                    {/* Submit button */}\n                                    <div className=\"row\">\n                                        <div className=\"col-12 text-right\">\n                                            <button type=\"submit\" className=\"btn shadow-none\" disabled={isUpdate}>\n                                                {isUpdate ? 'Updating...' : 'Update Product'}\n                                            </button>\n                                        </div>\n                                    </div>\n                                </form>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            {/* Delete confirmation */}\n            <DeleteModal\n                show={isDelete.show}\n                loading={isDelete.loading}\n                message={\n                    <div>\n                        <h6>Want to delete this image ?</h6>\n                        <img src={isDelete.file ? isDelete.file : null} className=\"img-fluid\" height={150} alt=\"product\" />\n                    </div>\n                }\n                onHide={() => setDelete({ file: null, show: false, loading: false })}\n                doDelete={deleteThumb}\n            />\n        </div>\n    );\n};\n\nexport default Edit;\n\nconst customStyles = {\n    control: (provided, state) => ({\n        ...provided,\n        minHeight: 42,\n        fontSize: 14,\n        color: '#000',\n        boxShadow: 'none', '&:hover': { borderColor: '1px solid #ced4da' },\n        border: state.isFocused ? '1px solid #dfdfdf' : '1px solid #ced4da',\n        borderRadius: 4\n    })\n}"]},"metadata":{},"sourceType":"module"}