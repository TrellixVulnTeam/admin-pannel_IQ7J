{"ast":null,"code":"import _objectSpread from\"D:/previous/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"D:/previous/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/previous/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\previous\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useCallback,useEffect,useState}from'react';import{useForm}from'react-hook-form';import{FormGroup}from'../formGroup';import{Container}from'../container';import{Text}from'../text';import{SingleSelect}from'../select';import Requests from'../../utils/Requests/Index';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var DistrictForm=function DistrictForm(props){var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,clearErrors=_useForm.clearErrors,setError=_useForm.setError,errors=_useForm.errors;var districtData=props.districtData?props.districtData:{};var _useState=useState([]),_useState2=_slicedToArray(_useState,2),division=_useState2[0],setDivision=_useState2[1];var _useState3=useState(null),_useState4=_slicedToArray(_useState3,2),selectedDivision=_useState4[0],setSelectedDivision=_useState4[1];var _useState5=useState({headers:{Authorization:\"Bearer \"+localStorage.getItem('token')}}),_useState6=_slicedToArray(_useState5,1),header=_useState6[0];// Fetch division data\nvar fetchData=useCallback(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(page){var items,response,i,element;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;items=[];_context.next=4;return Requests.Services.Shipping.Division.Index(page,10,header);case 4:response=_context.sent;if(response){if(response.data&&response.data.length>0){for(i=0;i<response.data.length;i++){element=response.data[i];items.push({label:element.name,value:element._id});}}}setDivision(items);_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);if(_context.t0)console.log(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);}));return function(_x){return _ref.apply(this,arguments);};}(),[header]);useEffect(function(){if(districtData&&districtData.division){setSelectedDivision(districtData.division._id);}},[districtData]);useEffect(function(){fetchData(1);},[header,fetchData]);// District form submit\nvar onSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data){var is_error,formData;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:is_error=false;if(!selectedDivision){setError(\"selectedDivision\",{type:\"manual\",message:\"Division is required.\"});is_error=true;}if(!is_error){_context2.next=4;break;}return _context2.abrupt(\"return\");case 4:formData=_objectSpread(_objectSpread({},data),{},{division:selectedDivision});// console.log(formData);\nprops.submit(formData);case 6:case\"end\":return _context2.stop();}}},_callee2);}));return function onSubmit(_x2){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(Container.Row,{children:[/*#__PURE__*/_jsx(Container.Column,{children:/*#__PURE__*/_jsxs(FormGroup,{children:[errors.name&&errors.name.message?/*#__PURE__*/_jsx(Text,{className:\"text-danger fs-13 mb-0\",children:errors.name&&errors.name.message}):/*#__PURE__*/_jsxs(Text,{className:\"fs-13 mb-0\",children:[\"District name (EN) \",/*#__PURE__*/_jsx(\"span\",{className:\"text-danger\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",className:errors.name?\"form-control shadow-none error\":\"form-control shadow-none\",placeholder:\"Enter district english name\",defaultValue:districtData?districtData.name:null,ref:register({required:\"District name (EN) is required\"})})]})}),/*#__PURE__*/_jsx(Container.Column,{children:/*#__PURE__*/_jsxs(FormGroup,{children:[errors.bn_name&&errors.bn_name.message?/*#__PURE__*/_jsx(Text,{className:\"text-danger fs-13 mb-0\",children:errors.bn_name&&errors.bn_name.message}):/*#__PURE__*/_jsxs(Text,{className:\"fs-13 mb-0\",children:[\"District name (BN) \",/*#__PURE__*/_jsx(\"span\",{className:\"text-danger\",children:\"*\"})]}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"bn_name\",className:errors.bn_name?\"form-control shadow-none error\":\"form-control shadow-none\",placeholder:\"Enter district bengali name\",defaultValue:districtData?districtData.bn_name:null,ref:register({required:\"District name (BN) is required\"})})]})}),/*#__PURE__*/_jsx(Container.Column,{children:/*#__PURE__*/_jsxs(FormGroup,{children:[errors.selectedDivision&&errors.selectedDivision.message?/*#__PURE__*/_jsx(Text,{className:\"text-danger fs-13 mb-0\",children:errors.selectedDivision&&errors.selectedDivision.message}):/*#__PURE__*/_jsxs(Text,{className:\"fs-13 mb-0\",children:[\"Division \",/*#__PURE__*/_jsx(\"span\",{className:\"text-danger\",children:\"*\"})]}),/*#__PURE__*/_jsx(SingleSelect,{placeholder:\" division\",deafult:districtData&&districtData.division?{value:districtData.division._id?districtData.division._id:null,label:districtData.division.name?districtData.division.name:null}:null,options:division,value:function value(event){setSelectedDivision(event.value);clearErrors(\"selectedDivision\");}})]})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-right\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn shadow-none text-uppercase\",disabled:props.loading,children:/*#__PURE__*/_jsx(Text,{className:\"fs-14 mb-0\",children:props.loading?props.update?\"Updating ...\":\"Submitting ...\":props.update?\"Update\":\"Submit\"})})})]});};","map":{"version":3,"sources":["D:/previous/src/components/form/DistrictForm.js"],"names":["React","useCallback","useEffect","useState","useForm","FormGroup","Container","Text","SingleSelect","Requests","DistrictForm","props","register","handleSubmit","clearErrors","setError","errors","districtData","division","setDivision","selectedDivision","setSelectedDivision","headers","Authorization","localStorage","getItem","header","fetchData","page","items","Services","Shipping","Division","Index","response","data","length","i","element","push","label","name","value","_id","console","log","onSubmit","is_error","type","message","formData","submit","required","bn_name","event","loading","update"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useState } from 'react'\nimport { useForm } from 'react-hook-form'\nimport { FormGroup } from '../formGroup'\nimport { Container } from '../container'\nimport { Text } from '../text'\nimport { SingleSelect } from '../select'\nimport Requests from '../../utils/Requests/Index'\n\nexport const DistrictForm = (props) => {\n  const { register, handleSubmit, clearErrors, setError, errors } = useForm()\n  const districtData = props.districtData ? props.districtData : {}\n  const [division, setDivision] = useState([])\n  const [selectedDivision, setSelectedDivision] = useState(null)\n  const [header] = useState({\n    headers: { Authorization: \"Bearer \" + localStorage.getItem('token') }\n  })\n\n  // Fetch division data\n  const fetchData = useCallback(async (page) => {\n    try {\n      const items = []\n      const response = await Requests.Services.Shipping.Division.Index(page, 10, header)\n      if (response) {\n        if (response.data && response.data.length > 0) {\n          for (let i = 0; i < response.data.length; i++) {\n            const element = response.data[i]\n            items.push({\n              label: element.name,\n              value: element._id,\n            })\n          }\n        }\n      }\n      setDivision(items)\n    } catch (error) {\n      if (error) console.log(error);\n    }\n  }, [header])\n\n  useEffect(() => {\n    if (districtData && districtData.division) {\n      setSelectedDivision(districtData.division._id)\n    }\n  }, [districtData])\n\n  useEffect(() => {\n    fetchData(1)\n  }, [header, fetchData])\n\n  // District form submit\n  const onSubmit = async data => {\n    let is_error = false\n\n    if (!selectedDivision) {\n      setError(\"selectedDivision\", {\n        type: \"manual\",\n        message: \"Division is required.\"\n      })\n      is_error = true\n    }\n\n    if (is_error) return\n\n\n    const formData = {\n      ...data,\n      division: selectedDivision\n    }\n    // console.log(formData);\n    props.submit(formData)\n  }\n\n  return (\n    <form onSubmit={handleSubmit(onSubmit)}>\n      <Container.Row>\n\n        {/* Name */}\n        <Container.Column>\n          <FormGroup>\n            {errors.name && errors.name.message ?\n              <Text className=\"text-danger fs-13 mb-0\">{errors.name && errors.name.message}</Text>\n              : <Text className=\"fs-13 mb-0\">District name (EN) <span className=\"text-danger\">*</span></Text>}\n            <input\n              type=\"text\"\n              name=\"name\"\n              className={errors.name ? \"form-control shadow-none error\" : \"form-control shadow-none\"}\n              placeholder=\"Enter district english name\"\n              defaultValue={districtData ? districtData.name : null}\n              ref={register({ required: \"District name (EN) is required\" })}\n            />\n          </FormGroup>\n        </Container.Column>\n\n        {/* Bengali name */}\n        <Container.Column>\n          <FormGroup>\n            {errors.bn_name && errors.bn_name.message ?\n              <Text className=\"text-danger fs-13 mb-0\">{errors.bn_name && errors.bn_name.message}</Text>\n              : <Text className=\"fs-13 mb-0\">District name (BN) <span className=\"text-danger\">*</span></Text>}\n            <input\n              type=\"text\"\n              name='bn_name'\n              className={errors.bn_name ? \"form-control shadow-none error\" : \"form-control shadow-none\"}\n              placeholder=\"Enter district bengali name\"\n              defaultValue={districtData ? districtData.bn_name : null}\n              ref={register({ required: \"District name (BN) is required\" })}\n            />\n          </FormGroup>\n        </Container.Column>\n\n        {/* Division */}\n        <Container.Column >\n          <FormGroup>\n            {errors.selectedDivision && errors.selectedDivision.message ?\n              <Text className=\"text-danger fs-13 mb-0\">{errors.selectedDivision && errors.selectedDivision.message}</Text>\n              : <Text className=\"fs-13 mb-0\">Division <span className=\"text-danger\">*</span></Text>}\n            <SingleSelect\n              placeholder=\" division\"\n              deafult={districtData && districtData.division ?\n                {\n                  value: districtData.division._id ? districtData.division._id : null,\n                  label: districtData.division.name ? districtData.division.name : null\n                } : null}\n              options={division}\n              value={event => {\n                setSelectedDivision(event.value)\n                clearErrors(\"selectedDivision\")\n              }}\n            />\n          </FormGroup>\n        </Container.Column>\n\n      </Container.Row>\n\n      {/* Submit button */}\n      <div className=\"text-right\">\n        <button\n          type=\"submit\"\n          className=\"btn shadow-none text-uppercase\"\n          disabled={props.loading}\n        ><Text className=\"fs-14 mb-0\">\n            {props.loading\n              ? props.update\n                ? \"Updating ...\"\n                : \"Submitting ...\"\n              : props.update\n                ? \"Update\"\n                : \"Submit\"}\n          </Text></button>\n      </div>\n    </form>\n  );\n}\n"]},"metadata":{},"sourceType":"module"}