{"ast":null,"code":"import _objectSpread from\"D:/previous/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"D:/previous/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/previous/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\previous\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useEffect,useState}from'react';import'./style.scss';import _ from'lodash';import Icon from'react-icons-kit';import{Form}from'react-bootstrap';import{useForm}from'react-hook-form';import{Link,useParams}from'react-router-dom';import{chevronLeft}from'react-icons-kit/feather';import{SingleSelect}from'../../components/select';import{PreLoader}from'../../components/loading/Index';import Requests from'../../utils/Requests/Index';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Edit=function Edit(){var _useParams=useParams(),id=_useParams.id;var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,setError=_useForm.setError,clearErrors=_useForm.clearErrors,errors=_useForm.errors;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),admin=_useState2[0],setAdmin=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),isUpdate=_useState4[0],setUpdate=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isLoading=_useState6[0],setLoading=_useState6[1];var _useState7=useState({value:null,options:[]}),_useState8=_slicedToArray(_useState7,2),roles=_useState8[0],setRoles=_useState8[1];var _useState9=useState(null),_useState10=_slicedToArray(_useState9,2),status=_useState10[0],setStatus=_useState10[1];var _useState11=useState({headers:{Authorization:\"Bearer \"+localStorage.getItem('token')}}),_useState12=_slicedToArray(_useState11,1),header=_useState12[0];useEffect(function(){var getData=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var options,response,rolesRes,i,element;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:options=[];setLoading(true);_context.next=4;return Requests.Admin.Show(id,header);case 4:response=_context.sent;_context.next=7;return Requests.Role.Index(header);case 7:rolesRes=_context.sent;if(rolesRes&&rolesRes.status){if(rolesRes.data&&rolesRes.data.length){for(i=0;i<rolesRes.data.length;i++){element=rolesRes.data[i];options.push({label:_.capitalize(element.role),value:element._id});}}}if(response){setAdmin(response.admin);setStatus(response.admin.accountStatus);setRoles(function(exRoles){return _objectSpread(_objectSpread({},exRoles),{},{options:options,value:{value:response.admin.role._id,label:response.admin.role.role}});});}setLoading(false);case 11:case\"end\":return _context.stop();}}},_callee);}));return function getData(){return _ref.apply(this,arguments);};}();getData();},[id,header]);// Handle role\nvar handleRole=function handleRole(event){setRoles(function(exRoles){return _objectSpread(_objectSpread({},exRoles),{},{value:event});});clearErrors([\"role\"]);};// Handle checkbox\nvar handleCheckBox=function handleCheckBox(event){return setStatus(event.target.value);};// Submit Form\nvar onSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data){var formData;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(roles.value){_context2.next=2;break;}return _context2.abrupt(\"return\",setError(\"role\",{type:\"manual\",message:\"Role is required!\"}));case 2:formData=_objectSpread(_objectSpread({},data),{},{role:roles.value.value,accountStatus:status});setUpdate(true);_context2.next=6;return Requests.Admin.Update(id,formData,header);case 6:setUpdate(false);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function onSubmit(_x){return _ref2.apply(this,arguments);};}();if(isLoading)return/*#__PURE__*/_jsx(PreLoader,{});return/*#__PURE__*/_jsx(\"div\",{className:\"admin-create pb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-padding\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card border-0 shadow-sm\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header p-3 p-lg-4 bg-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h6\",{className:\"mb-0\",children:\"Edit Admin\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-auto\",children:/*#__PURE__*/_jsx(Link,{to:\"/dashboard/admin\",type:\"button\",className:\"btn shadow-none rounded-circle\",children:/*#__PURE__*/_jsx(Icon,{icon:chevronLeft,size:22})})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body p-4\",children:/*#__PURE__*/_jsx(\"form\",{onSubmit:handleSubmit(onSubmit),children:/*#__PURE__*/_jsxs(\"div\",{className:\"row\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-lg-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[errors.name&&errors.name.message?/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:errors.name&&errors.name.message}):/*#__PURE__*/_jsx(\"p\",{children:\"Name\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",defaultValue:admin.name,className:\"form-control shadow-none\",placeholder:\"Enter name\",ref:register({required:\"Name is required\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-lg-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[/*#__PURE__*/_jsx(\"p\",{children:\"E-mail\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",defaultValue:admin.email,className:\"form-control shadow-none\",disabled:true})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[errors.phone&&errors.phone.message?/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:errors.phone&&errors.phone.message}):/*#__PURE__*/_jsx(\"p\",{children:\"Phone\"}),/*#__PURE__*/_jsx(\"input\",{disabled:true,type:\"text\",defaultValue:admin.phone,className:\"form-control shadow-none\"})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[errors.presentAddress&&errors.presentAddress.message?/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:errors.presentAddress&&errors.presentAddress.message}):/*#__PURE__*/_jsx(\"p\",{children:\"Present address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"presentAddress\",defaultValue:admin.address?admin.address.presentAddress:null,className:\"form-control shadow-none\",placeholder:\"Enter present address\",ref:register({required:\"Present address is required\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[errors.permanentAddress&&errors.permanentAddress.message?/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:errors.permanentAddress&&errors.permanentAddress.message}):/*#__PURE__*/_jsx(\"p\",{children:\"Permanent address\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"permanentAddress\",defaultValue:admin.address?admin.address.permanentAddress:null,className:\"form-control shadow-none\",placeholder:\"Enter permanent address\",ref:register({required:\"Permanent address is required\"})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-lg-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[errors.role&&errors.role.message?/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:errors.role&&errors.role.message}):/*#__PURE__*/_jsx(\"p\",{children:\"Role\"}),/*#__PURE__*/_jsx(SingleSelect,{placeholder:\"role\",deafult:roles.value?{value:roles.value.value,label:roles.value.label}:null,options:roles.options,value:function value(data){return handleRole(data);}})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-lg-6\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"input-group mb-4 pt-4\",children:[/*#__PURE__*/_jsx(Form.Group,{controlId:\"isActive\",children:/*#__PURE__*/_jsx(Form.Check,{type:\"checkbox\",value:\"Active\",label:\"Active\",checked:status==='Active',onChange:handleCheckBox})}),/*#__PURE__*/_jsx(Form.Group,{className:\"ml-3\",controlId:\"isDeactive\",children:/*#__PURE__*/_jsx(Form.Check,{type:\"checkbox\",value:\"Deactive\",label:\"Deactive\",checked:status==='Deactive',onChange:handleCheckBox})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"col-12 text-right\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn shadow-none\",disabled:isUpdate,children:isUpdate?/*#__PURE__*/_jsx(\"span\",{children:\"Updating...\"}):/*#__PURE__*/_jsx(\"span\",{children:\"Update\"})})})]})})})]})})})})});};export default Edit;","map":{"version":3,"sources":["D:/previous/src/pages/admin/Edit.js"],"names":["React","useEffect","useState","_","Icon","Form","useForm","Link","useParams","chevronLeft","SingleSelect","PreLoader","Requests","Edit","id","register","handleSubmit","setError","clearErrors","errors","admin","setAdmin","isUpdate","setUpdate","isLoading","setLoading","value","options","roles","setRoles","status","setStatus","headers","Authorization","localStorage","getItem","header","getData","Admin","Show","response","Role","Index","rolesRes","data","length","i","element","push","label","capitalize","role","_id","accountStatus","exRoles","handleRole","event","handleCheckBox","target","onSubmit","type","message","formData","Update","name","required","email","phone","presentAddress","address","permanentAddress"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport './style.scss'\nimport _ from 'lodash'\nimport Icon from 'react-icons-kit'\nimport { Form } from 'react-bootstrap'\nimport { useForm } from 'react-hook-form'\nimport { Link, useParams } from 'react-router-dom'\nimport { chevronLeft } from 'react-icons-kit/feather'\nimport { SingleSelect } from '../../components/select'\nimport { PreLoader } from '../../components/loading/Index'\n\nimport Requests from '../../utils/Requests/Index'\n\n\nconst Edit = () => {\n    const { id } = useParams()\n    const { register, handleSubmit, setError, clearErrors, errors } = useForm()\n    const [admin, setAdmin] = useState({})\n    const [isUpdate, setUpdate] = useState(false)\n    const [isLoading, setLoading] = useState(false)\n    const [roles, setRoles] = useState({ value: null, options: [] })\n    const [status, setStatus] = useState(null)\n    const [header] = useState({\n        headers: { Authorization: \"Bearer \" + localStorage.getItem('token') }\n    })\n\n    useEffect(() => {\n        const getData = async () => {\n            let options = []\n            setLoading(true)\n\n            const response = await Requests.Admin.Show(id, header)\n            const rolesRes = await Requests.Role.Index(header)\n            if (rolesRes && rolesRes.status) {\n                if (rolesRes.data && rolesRes.data.length) {\n                    for (let i = 0; i < rolesRes.data.length; i++) {\n                        const element = rolesRes.data[i]\n                        options.push({ label: _.capitalize(element.role), value: element._id })\n                    }\n                }\n            }\n\n            if (response) {\n                setAdmin(response.admin)\n                setStatus(response.admin.accountStatus)\n                setRoles(exRoles => ({ ...exRoles, options: options, value: { value: response.admin.role._id, label: response.admin.role.role } }))\n            }\n\n            setLoading(false)\n        }\n\n        getData()\n    }, [id, header])\n\n    // Handle role\n    const handleRole = event => {\n        setRoles(exRoles => ({ ...exRoles, value: event }))\n        clearErrors([\"role\"])\n    }\n\n    // Handle checkbox\n    const handleCheckBox = event => setStatus(event.target.value)\n\n    // Submit Form\n    const onSubmit = async (data) => {\n        if (!roles.value) {\n            return setError(\"role\", {\n                type: \"manual\",\n                message: \"Role is required!\"\n            })\n        }\n\n        let formData = { ...data, role: roles.value.value, accountStatus: status }\n\n        setUpdate(true)\n        await Requests.Admin.Update(id, formData, header)\n        setUpdate(false)\n    }\n\n    if (isLoading) return <PreLoader />\n\n    return (\n        <div className=\"admin-create pb-4\">\n            <div className=\"container-fluid\">\n                <div className=\"row\">\n                    <div className=\"col-12 col-padding\">\n                        <div className=\"card border-0 shadow-sm\">\n                            <div className=\"card-header p-3 p-lg-4 bg-white\">\n                                <div className=\"d-flex\">\n                                    <div><h6 className=\"mb-0\">Edit Admin</h6></div>\n                                    <div className=\"ml-auto\">\n                                        <Link\n                                            to=\"/dashboard/admin\"\n                                            type=\"button\"\n                                            className=\"btn shadow-none rounded-circle\"\n                                        >\n                                            <Icon icon={chevronLeft} size={22} />\n                                        </Link>\n                                    </div>\n                                </div>\n                            </div>\n                            <div className=\"card-body p-4\">\n                                <form onSubmit={handleSubmit(onSubmit)}>\n\n                                    <div className=\"row\">\n\n                                        {/* Name */}\n                                        <div className=\"col-12 col-lg-6\">\n                                            <div className=\"form-group mb-4\">\n                                                {errors.name && errors.name.message ? (\n                                                    <p className=\"text-danger\">{errors.name && errors.name.message}</p>\n                                                ) : <p>Name</p>}\n\n                                                <input\n                                                    type=\"text\"\n                                                    name=\"name\"\n                                                    defaultValue={admin.name}\n                                                    className=\"form-control shadow-none\"\n                                                    placeholder=\"Enter name\"\n                                                    ref={register({\n                                                        required: \"Name is required\"\n                                                    })}\n                                                />\n                                            </div>\n                                        </div>\n\n                                        {/* E-mail */}\n                                        <div className=\"col-12 col-lg-6\">\n                                            <div className=\"form-group mb-4\">\n                                                <p>E-mail</p>\n\n                                                <input\n                                                    type=\"text\"\n                                                    defaultValue={admin.email}\n                                                    className=\"form-control shadow-none\"\n                                                    disabled\n                                                />\n                                            </div>\n                                        </div>\n\n                                        {/* Phone */}\n                                        <div className=\"col-12\">\n                                            <div className=\"form-group mb-4\">\n                                                {errors.phone && errors.phone.message ? (\n                                                    <p className=\"text-danger\">{errors.phone && errors.phone.message}</p>\n                                                ) : <p>Phone</p>}\n\n                                                <input\n                                                    disabled\n                                                    type=\"text\"\n                                                    defaultValue={admin.phone}\n                                                    className=\"form-control shadow-none\"\n                                                />\n                                            </div>\n                                        </div>\n\n                                        {/* Present address */}\n                                        <div className=\"col-12\">\n                                            <div className=\"form-group mb-4\">\n                                                {errors.presentAddress && errors.presentAddress.message ? (\n                                                    <p className=\"text-danger\">{errors.presentAddress && errors.presentAddress.message}</p>\n                                                ) : <p>Present address</p>}\n\n                                                <input\n                                                    type=\"text\"\n                                                    name=\"presentAddress\"\n                                                    defaultValue={admin.address ? admin.address.presentAddress : null}\n                                                    className=\"form-control shadow-none\"\n                                                    placeholder=\"Enter present address\"\n                                                    ref={register({\n                                                        required: \"Present address is required\"\n                                                    })}\n                                                />\n                                            </div>\n                                        </div>\n\n                                        {/* permanent address */}\n                                        <div className=\"col-12\">\n                                            <div className=\"form-group mb-4\">\n                                                {errors.permanentAddress && errors.permanentAddress.message ? (\n                                                    <p className=\"text-danger\">{errors.permanentAddress && errors.permanentAddress.message}</p>\n                                                ) : <p>Permanent address</p>}\n\n                                                <input\n                                                    type=\"text\"\n                                                    name=\"permanentAddress\"\n                                                    defaultValue={admin.address ? admin.address.permanentAddress : null}\n                                                    className=\"form-control shadow-none\"\n                                                    placeholder=\"Enter permanent address\"\n                                                    ref={register({\n                                                        required: \"Permanent address is required\"\n                                                    })}\n                                                />\n                                            </div>\n                                        </div>\n\n                                        {/* Role */}\n                                        <div className=\"col-12 col-lg-6\">\n                                            <div className=\"form-group mb-4\">\n                                                {errors.role && errors.role.message ?\n                                                    <p className=\"text-danger\">{errors.role && errors.role.message}</p>\n                                                    : <p>Role</p>}\n\n                                                <SingleSelect\n                                                    placeholder=\"role\"\n                                                    deafult={roles.value ? { value: roles.value.value, label: roles.value.label } : null}\n                                                    options={roles.options}\n                                                    value={data => handleRole(data)}\n                                                />\n                                            </div>\n                                        </div>\n\n                                        {/* Active Status */}\n                                        <div className=\"col-12 col-lg-6\">\n                                            <div className=\"input-group mb-4 pt-4\">\n                                                <Form.Group controlId=\"isActive\">\n                                                    <Form.Check\n                                                        type=\"checkbox\"\n                                                        value=\"Active\"\n                                                        label=\"Active\"\n                                                        checked={status === 'Active'}\n                                                        onChange={handleCheckBox}\n                                                    />\n                                                </Form.Group>\n\n                                                <Form.Group className=\"ml-3\" controlId=\"isDeactive\">\n                                                    <Form.Check\n                                                        type=\"checkbox\"\n                                                        value=\"Deactive\"\n                                                        label=\"Deactive\"\n                                                        checked={status === 'Deactive'}\n                                                        onChange={handleCheckBox}\n                                                    />\n                                                </Form.Group>\n                                            </div>\n                                        </div>\n\n                                        <div className=\"col-12 text-right\">\n                                            <button type=\"submit\" className=\"btn shadow-none\" disabled={isUpdate}>\n                                                {isUpdate ? <span>Updating...</span> : <span>Update</span>}\n                                            </button>\n                                        </div>\n                                    </div>\n                                </form>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n        </div>\n    );\n};\n\nexport default Edit;"]},"metadata":{},"sourceType":"module"}