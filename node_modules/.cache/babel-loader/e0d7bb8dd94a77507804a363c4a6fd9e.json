{"ast":null,"code":"import _objectSpread from\"D:/previous/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"D:/previous/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/previous/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\previous\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useCallback,useEffect,useState}from'react';import'./style.scss';import Icon from'react-icons-kit';import{Link}from'react-router-dom';import{plus,trash2}from'react-icons-kit/feather';import{CustomButton}from'../../components/button';import{DataTable}from'../../components/table/Index';import{DeleteModal}from'../../components/modal/Delete';import Requests from'../../utils/Requests/Index';import{edit2}from'react-icons-kit/feather';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Index=function Index(){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setLoading=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),data=_useState4[0],setData=_useState4[1];var _useState5=useState({value:null,show:false,loading:false}),_useState6=_slicedToArray(_useState5,2),isDelete=_useState6[0],setDelete=_useState6[1];var _useState7=useState({headers:{Authorization:\"Bearer \"+localStorage.getItem('token')}}),_useState8=_slicedToArray(_useState7,1),header=_useState8[0];// Fetch data\nvar fetchData=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return Requests.Banner.Index(header);case 2:response=_context.sent;if(response)setData(response.data);setLoading(false);case 5:case\"end\":return _context.stop();}}},_callee);})),[header]);useEffect(function(){fetchData();},[header,fetchData]);var columns=[{name:'Web',cell:function cell(row){return/*#__PURE__*/_jsx(\"img\",{height:40,style:{maxWidth:150},alt:\"Web banner\",src:row.web});}},{name:'Mobile',cell:function cell(row){return/*#__PURE__*/_jsx(\"img\",{height:40,style:{maxWidth:100},alt:\"Mobile banner\",src:row.mobile});}},{name:'Assign To',selector:function selector(row){return row.type?row.type:row.link?row.link.slice(0,25)+' ...':null;},sortable:true},{name:'Action',grow:0,minWidth:'150px',cell:function cell(row){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/dashboard/banner/\".concat(row._id,\"/edit\"),children:/*#__PURE__*/_jsx(CustomButton,{style:{padding:\"6px 10px\"},className:\"btn-success rounded-circle border-0 mr-1\",children:/*#__PURE__*/_jsx(Icon,{icon:edit2,size:16})})}),/*#__PURE__*/_jsx(CustomButton,{style:{padding:\"6px 10px\"},className:\"btn-danger rounded-circle border-0 mr-1\",onClick:function onClick(){return setDelete({value:row,show:true});},children:/*#__PURE__*/_jsx(Icon,{icon:trash2,size:16})})]});}}];// Handle delete\nvar handleDelete=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setDelete(_objectSpread(_objectSpread({},isDelete),{},{loading:true}));_context2.next=3;return Requests.Banner.Delete(isDelete.value._id,header);case 3:fetchData();setDelete(_objectSpread(_objectSpread({},isDelete),{},{show:false,loading:false}));case 5:case\"end\":return _context2.stop();}}},_callee2);}));return function handleDelete(){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"banner-index pb-4\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-padding\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card border-0 shadow-sm\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header p-3 p-lg-4 bg-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h6\",{className:\"mb-0\",children:\"Banner List\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-auto\",children:/*#__PURE__*/_jsx(Link,{to:\"/dashboard/banner/create\",type:\"button\",className:\"btn shadow-none rounded-circle\",children:/*#__PURE__*/_jsx(Icon,{icon:plus,size:22})})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body p-0\",children:/*#__PURE__*/_jsx(DataTable,{columns:columns,data:data,loading:isLoading})})]})})})}),/*#__PURE__*/_jsx(DeleteModal,{show:isDelete.show,loading:isDelete.loading,message:/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h6\",{children:\"Want to delete this Banner ?\"}),/*#__PURE__*/_jsx(\"img\",{src:isDelete.value?isDelete.value.web:null,className:\"img-fluid\",height:150,alt:\"Banner\"})]}),onHide:function onHide(){return setDelete({value:null,show:false,loading:false});},doDelete:handleDelete})]});};export default Index;","map":{"version":3,"sources":["D:/previous/src/pages/banner/Index.js"],"names":["React","useCallback","useEffect","useState","Icon","Link","plus","trash2","CustomButton","DataTable","DeleteModal","Requests","edit2","Index","isLoading","setLoading","data","setData","value","show","loading","isDelete","setDelete","headers","Authorization","localStorage","getItem","header","fetchData","Banner","response","columns","name","cell","row","maxWidth","web","mobile","selector","type","link","slice","sortable","grow","minWidth","_id","padding","handleDelete","Delete"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useState } from 'react'\nimport './style.scss'\nimport Icon from 'react-icons-kit'\nimport { Link } from 'react-router-dom'\nimport { plus, trash2 } from 'react-icons-kit/feather'\nimport { CustomButton } from '../../components/button'\nimport { DataTable } from '../../components/table/Index'\nimport { DeleteModal } from '../../components/modal/Delete'\n\nimport Requests from '../../utils/Requests/Index'\nimport { edit2 } from 'react-icons-kit/feather'\n\nconst Index = () => {\n    const [isLoading, setLoading] = useState(true)\n    const [data, setData] = useState([])\n    const [isDelete, setDelete] = useState({ value: null, show: false, loading: false })\n    const [header] = useState({\n        headers: { Authorization: \"Bearer \" + localStorage.getItem('token') }\n    })\n\n    // Fetch data\n    const fetchData = useCallback(async () => {\n        const response = await Requests.Banner.Index(header)\n        if (response) setData(response.data)\n        setLoading(false)\n    }, [header])\n\n    useEffect(() => {\n        fetchData()\n    }, [header, fetchData])\n\n    const columns = [\n        {\n            name: 'Web',\n            cell: row => <img height={40} style={{ maxWidth: 150 }} alt={\"Web banner\"} src={row.web} />\n        },\n        {\n            name: 'Mobile',\n            cell: row => <img height={40} style={{ maxWidth: 100 }} alt={\"Mobile banner\"} src={row.mobile} />\n        },\n        {\n            name: 'Assign To',\n            selector: row => row.type ? row.type : row.link ? row.link.slice(0, 25) + ' ...' : null,\n            sortable: true\n        },\n        {\n            name: 'Action',\n            grow: 0,\n            minWidth: '150px',\n            cell: row =>\n                <div>\n                    <Link to={`/dashboard/banner/${row._id}/edit`}>\n                        <CustomButton\n                            style={{ padding: \"6px 10px\" }}\n                            className=\"btn-success rounded-circle border-0 mr-1\"\n                        ><Icon icon={edit2} size={16} />\n                        </CustomButton>\n                    </Link>\n\n                    <CustomButton\n                        style={{ padding: \"6px 10px\" }}\n                        className=\"btn-danger rounded-circle border-0 mr-1\"\n                        onClick={() => setDelete({ value: row, show: true })}\n                    ><Icon icon={trash2} size={16} />\n                    </CustomButton>\n                </div>\n        }\n    ]\n\n    // Handle delete\n    const handleDelete = async () => {\n        setDelete({ ...isDelete, loading: true })\n\n        await Requests.Banner.Delete(isDelete.value._id, header)\n        fetchData()\n        setDelete({ ...isDelete, show: false, loading: false })\n    }\n\n    return (\n        <div className=\"banner-index pb-4\">\n            <div className=\"container-fluid\">\n                <div className=\"row\">\n                    <div className=\"col-12 col-padding\">\n                        <div className=\"card border-0 shadow-sm\">\n                            <div className=\"card-header p-3 p-lg-4 bg-white\">\n                                <div className=\"d-flex\">\n                                    <div><h6 className=\"mb-0\">Banner List</h6></div>\n                                    <div className=\"ml-auto\">\n                                        <Link\n                                            to=\"/dashboard/banner/create\"\n                                            type=\"button\"\n                                            className=\"btn shadow-none rounded-circle\"\n                                        >\n                                            <Icon icon={plus} size={22} />\n                                        </Link>\n                                    </div>\n                                </div>\n                            </div>\n\n                            {/* Data table component for show data */}\n                            <div className=\"card-body p-0\">\n                                <DataTable\n                                    columns={columns}\n                                    data={data}\n                                    loading={isLoading}\n                                />\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n\n            {/* Delete confirmation */}\n            <DeleteModal\n                show={isDelete.show}\n                loading={isDelete.loading}\n                message={\n                    <div>\n                        <h6>Want to delete this Banner ?</h6>\n                        <img src={isDelete.value ? isDelete.value.web : null} className=\"img-fluid\" height={150} alt=\"Banner\" />\n                    </div>\n                }\n                onHide={() => setDelete({ value: null, show: false, loading: false })}\n                doDelete={handleDelete}\n            />\n        </div>\n    );\n}\n\nexport default Index;"]},"metadata":{},"sourceType":"module"}