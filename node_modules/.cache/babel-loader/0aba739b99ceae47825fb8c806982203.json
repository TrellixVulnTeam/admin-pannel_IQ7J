{"ast":null,"code":"var _jsxFileName = \"D:\\\\previous\\\\src\\\\components\\\\table\\\\Category.js\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport './style.scss';\nimport Icon from 'react-icons-kit';\nimport { Link } from 'react-router-dom';\nimport { edit2 } from 'react-icons-kit/feather';\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd';\nimport { PreLoader } from '../loading/Index';\nimport Requests from '../../utils/Requests/Index';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst Category = props => {\n  _s();\n\n  const [items, setItems] = useState([]);\n  const [isLoading, setLoading] = useState(false);\n  const [isActive, setActive] = useState(null);\n  const [header] = useState({\n    headers: {\n      Authorization: \"Bearer \" + localStorage.getItem('token')\n    }\n  });\n  useEffect(() => {\n    if (props.items) setItems(props.items);\n  }, [props.items]); // Handle update index\n\n  const handleUpdate = async () => {\n    try {\n      let updatedItems = [];\n\n      if (items && items.length) {\n        for (let i = 0; i < items.length; i++) {\n          const element = items[i];\n          updatedItems.push({\n            _id: element._id,\n            indexId: i\n          });\n        }\n      }\n\n      if (updatedItems && updatedItems.length) {\n        setLoading(true);\n        const response = await Requests.Category.UpdateIndex(updatedItems, header);\n        if (response && response.status === 201) setLoading(false);\n      }\n    } catch (error) {\n      if (error) {\n        setLoading(false);\n        console.log(error);\n      }\n    }\n  }; // Handle active\n\n\n  const handleActive = item => {\n    if (isActive && isActive === item) {\n      setActive(null);\n    } else {\n      setActive(item);\n    }\n  };\n\n  if (isLoading) return /*#__PURE__*/_jsxDEV(PreLoader, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 27\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"category-items\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"parent-container\",\n      children: /*#__PURE__*/_jsxDEV(DragDropContext, {\n        onDragEnd: param => {\n          var _param$destination;\n\n          const srcIndex = param.source.index;\n          const desIndex = (_param$destination = param.destination) === null || _param$destination === void 0 ? void 0 : _param$destination.index;\n          if (desIndex) items.splice(desIndex, 0, items.splice(srcIndex, 1)[0]);\n          handleUpdate();\n        },\n        children: /*#__PURE__*/_jsxDEV(Droppable, {\n          droppableId: \"droppable-1\",\n          children: (provided, snapshot) => /*#__PURE__*/_jsxDEV(\"div\", {\n            ref: provided.innerRef,\n            ...provided.droppableProps,\n            children: items && items.map((item, i) => /*#__PURE__*/_jsxDEV(Draggable, {\n              draggableId: item._id,\n              index: i,\n              children: (provided, snapshot) => /*#__PURE__*/_jsxDEV(\"div\", {\n                ref: provided.innerRef,\n                ...provided.draggableProps,\n                ...provided.dragHandleProps,\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"container-item shadow-sm d-flex item\",\n                  onClick: () => handleActive(item.name),\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"image-container pr-3\",\n                    children: /*#__PURE__*/_jsxDEV(\"img\", {\n                      src: item.image,\n                      className: \"img-fluid\",\n                      alt: \"...\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 99,\n                      columnNumber: 57\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 98,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: /*#__PURE__*/_jsxDEV(\"p\", {\n                      children: item.name\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 101,\n                      columnNumber: 58\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 101,\n                    columnNumber: 53\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"ml-auto\",\n                    children: /*#__PURE__*/_jsxDEV(Link, {\n                      type: \"button\",\n                      to: `/dashboard/category/Main/${item._id}/edit`,\n                      className: \"btn btn-sm shadow-none table-edit-btn\",\n                      children: /*#__PURE__*/_jsxDEV(Icon, {\n                        icon: edit2,\n                        size: 20\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 108,\n                        columnNumber: 61\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 103,\n                      columnNumber: 57\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 102,\n                    columnNumber: 53\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 94,\n                  columnNumber: 49\n                }, this), isActive && isActive === item.name ? /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: item.children && item.children.map((firstChild, j) => /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"children-container\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"container-item shadow-sm d-flex\",\n                      draggable: true,\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"image-container pr-3\",\n                        children: /*#__PURE__*/_jsxDEV(\"img\", {\n                          src: firstChild.image,\n                          className: \"img-fluid\",\n                          alt: \"...\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 121,\n                          columnNumber: 73\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 120,\n                        columnNumber: 69\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        children: /*#__PURE__*/_jsxDEV(\"p\", {\n                          children: firstChild.name\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 123,\n                          columnNumber: 74\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 123,\n                        columnNumber: 69\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"ml-auto\",\n                        children: /*#__PURE__*/_jsxDEV(Link, {\n                          type: \"button\",\n                          to: `/dashboard/category/Sub/${firstChild._id}/edit`,\n                          className: \"btn btn-sm shadow-none table-edit-btn\",\n                          children: /*#__PURE__*/_jsxDEV(Icon, {\n                            icon: edit2,\n                            size: 20\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 130,\n                            columnNumber: 77\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 125,\n                          columnNumber: 73\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 124,\n                        columnNumber: 69\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 119,\n                      columnNumber: 65\n                    }, this), firstChild.children && firstChild.children.map((secondChild, k) => /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"children-container\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"container-item shadow-sm d-flex\",\n                        draggable: true,\n                        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"image-container pr-3\",\n                          children: /*#__PURE__*/_jsxDEV(\"img\", {\n                            src: secondChild.image,\n                            className: \"img-fluid\",\n                            alt: \"...\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 141,\n                            columnNumber: 81\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 140,\n                          columnNumber: 77\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          children: /*#__PURE__*/_jsxDEV(\"p\", {\n                            children: secondChild.name\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 143,\n                            columnNumber: 82\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 143,\n                          columnNumber: 77\n                        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                          className: \"ml-auto\",\n                          children: /*#__PURE__*/_jsxDEV(Link, {\n                            type: \"button\",\n                            to: `/dashboard/category/Leaf/${secondChild._id}/edit`,\n                            className: \"btn btn-sm shadow-none table-edit-btn\",\n                            children: /*#__PURE__*/_jsxDEV(Icon, {\n                              icon: edit2,\n                              size: 20\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 150,\n                              columnNumber: 85\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 145,\n                            columnNumber: 81\n                          }, this)\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 144,\n                          columnNumber: 77\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 139,\n                        columnNumber: 73\n                      }, this)\n                    }, k, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 138,\n                      columnNumber: 69\n                    }, this))]\n                  }, j, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 118,\n                    columnNumber: 61\n                  }, this))\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 116,\n                  columnNumber: 53\n                }, this) : null]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 88,\n                columnNumber: 45\n              }, this)\n            }, item.indexId, false, {\n              fileName: _jsxFileName,\n              lineNumber: 82,\n              columnNumber: 37\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 29\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 17\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 65,\n      columnNumber: 13\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 64,\n    columnNumber: 9\n  }, this);\n};\n\n_s(Category, \"J8aHa+GLOyhmgptZ1sXfvxB5QLE=\");\n\n_c = Category;\nexport default Category;\n\nvar _c;\n\n$RefreshReg$(_c, \"Category\");","map":{"version":3,"sources":["D:/previous/src/components/table/Category.js"],"names":["React","useEffect","useState","Icon","Link","edit2","DragDropContext","Droppable","Draggable","PreLoader","Requests","Category","props","items","setItems","isLoading","setLoading","isActive","setActive","header","headers","Authorization","localStorage","getItem","handleUpdate","updatedItems","length","i","element","push","_id","indexId","response","UpdateIndex","status","error","console","log","handleActive","item","param","srcIndex","source","index","desIndex","destination","splice","provided","snapshot","innerRef","droppableProps","map","draggableProps","dragHandleProps","name","image","children","firstChild","j","secondChild","k"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react'\nimport './style.scss'\nimport Icon from 'react-icons-kit'\nimport { Link } from 'react-router-dom'\nimport { edit2 } from 'react-icons-kit/feather'\nimport { DragDropContext, Droppable, Draggable } from 'react-beautiful-dnd'\nimport { PreLoader } from '../loading/Index'\n\nimport Requests from '../../utils/Requests/Index'\n\n\nconst Category = (props) => {\n    const [items, setItems] = useState([])\n    const [isLoading, setLoading] = useState(false)\n    const [isActive, setActive] = useState(null)\n    const [header] = useState({\n        headers: { Authorization: \"Bearer \" + localStorage.getItem('token') }\n    })\n\n    useEffect(() => {\n        if (props.items) setItems(props.items)\n    }, [props.items])\n\n    // Handle update index\n    const handleUpdate = async () => {\n        try {\n            let updatedItems = []\n\n            if (items && items.length) {\n                for (let i = 0; i < items.length; i++) {\n                    const element = items[i]\n                    updatedItems.push({\n                        _id: element._id,\n                        indexId: i\n                    })\n                }\n            }\n\n            if (updatedItems && updatedItems.length) {\n                setLoading(true)\n                const response = await Requests.Category.UpdateIndex(updatedItems, header)\n                if (response && response.status === 201) setLoading(false)\n            }\n        } catch (error) {\n            if (error) {\n                setLoading(false)\n                console.log(error)\n            }\n        }\n    }\n\n    // Handle active\n    const handleActive = item => {\n        if (isActive && isActive === item) {\n            setActive(null)\n        } else {\n            setActive(item)\n        }\n    }\n\n    if (isLoading) return <PreLoader />\n\n    return (\n        <div className=\"category-items\">\n            <div className=\"parent-container\">\n                <DragDropContext\n                    onDragEnd={(param) => {\n                        const srcIndex = param.source.index\n                        const desIndex = param.destination?.index\n\n                        if (desIndex) items.splice(desIndex, 0, items.splice(srcIndex, 1)[0])\n                        handleUpdate()\n                    }}\n                >\n                    <Droppable droppableId=\"droppable-1\">\n                        {(provided, snapshot) => (\n                            <div\n                                ref={provided.innerRef}\n                                {...provided.droppableProps}\n                            >\n                                {items && items.map((item, i) =>\n                                    <Draggable\n                                        key={item.indexId}\n                                        draggableId={item._id}\n                                        index={i}\n                                    >\n                                        {(provided, snapshot) => (\n                                            <div\n                                                ref={provided.innerRef}\n                                                {...provided.draggableProps}\n                                                {...provided.dragHandleProps}\n                                            >\n                                                {/* Parent Content */}\n                                                <div\n                                                    className=\"container-item shadow-sm d-flex item\"\n                                                    onClick={() => handleActive(item.name)}\n                                                >\n                                                    <div className=\"image-container pr-3\">\n                                                        <img src={item.image} className=\"img-fluid\" alt=\"...\" />\n                                                    </div>\n                                                    <div><p>{item.name}</p></div>\n                                                    <div className=\"ml-auto\">\n                                                        <Link\n                                                            type=\"button\"\n                                                            to={`/dashboard/category/Main/${item._id}/edit`}\n                                                            className=\"btn btn-sm shadow-none table-edit-btn\"\n                                                        >\n                                                            <Icon icon={edit2} size={20} />\n                                                        </Link>\n                                                    </div>\n                                                </div>\n\n                                                {/* Childrens */}\n\n                                                {isActive && isActive === item.name ?\n                                                    <div>\n                                                        {item.children && item.children.map((firstChild, j) =>\n                                                            <div className=\"children-container\" key={j}>\n                                                                <div className=\"container-item shadow-sm d-flex\" draggable>\n                                                                    <div className=\"image-container pr-3\">\n                                                                        <img src={firstChild.image} className=\"img-fluid\" alt=\"...\" />\n                                                                    </div>\n                                                                    <div><p>{firstChild.name}</p></div>\n                                                                    <div className=\"ml-auto\">\n                                                                        <Link\n                                                                            type=\"button\"\n                                                                            to={`/dashboard/category/Sub/${firstChild._id}/edit`}\n                                                                            className=\"btn btn-sm shadow-none table-edit-btn\"\n                                                                        >\n                                                                            <Icon icon={edit2} size={20} />\n                                                                        </Link>\n                                                                    </div>\n                                                                </div>\n\n\n                                                                {/* Second child */}\n                                                                {firstChild.children && firstChild.children.map((secondChild, k) =>\n                                                                    <div className=\"children-container\" key={k}>\n                                                                        <div className=\"container-item shadow-sm d-flex\" draggable>\n                                                                            <div className=\"image-container pr-3\">\n                                                                                <img src={secondChild.image} className=\"img-fluid\" alt=\"...\" />\n                                                                            </div>\n                                                                            <div><p>{secondChild.name}</p></div>\n                                                                            <div className=\"ml-auto\">\n                                                                                <Link\n                                                                                    type=\"button\"\n                                                                                    to={`/dashboard/category/Leaf/${secondChild._id}/edit`}\n                                                                                    className=\"btn btn-sm shadow-none table-edit-btn\"\n                                                                                >\n                                                                                    <Icon icon={edit2} size={20} />\n                                                                                </Link>\n                                                                            </div>\n                                                                        </div>\n                                                                    </div>\n                                                                )}\n                                                            </div>\n                                                        )}\n                                                    </div>\n                                                    : null}\n                                            </div>\n                                        )}\n                                    </Draggable>\n                                )}\n                            </div>\n                        )}\n                    </Droppable>\n                </DragDropContext>\n\n            </div>\n        </div>\n    );\n};\n\nexport default Category;"]},"metadata":{},"sourceType":"module"}