{"ast":null,"code":"import _asyncToGenerator from\"D:/previous/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/previous/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\previous\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useState,useEffect,useCallback,useRef}from'react';import'./style.scss';import Icon from'react-icons-kit';import{Link,useParams}from'react-router-dom';import{chevronLeft}from'react-icons-kit/feather';import{Toastify}from'../../components/toastify';import{PreLoader}from'../../components/loading/Index';import{CampaignForm}from'../../components/form/campaign';import Requests from'../../utils/Requests/Index';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Edit=function Edit(){var _useParams=useParams(),id=_useParams.id;var _useState=useState({}),_useState2=_slicedToArray(_useState,2),data=_useState2[0],setData=_useState2[1];var _useState3=useState(true),_useState4=_slicedToArray(_useState3,2),isLoading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isUpdate=_useState6[0],setUpdate=_useState6[1];var _useState7=useState(false),_useState8=_slicedToArray(_useState7,2),isImgLoading=_useState8[0],setImgLoading=_useState8[1];// Fetch data\nvar fetchData=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return Requests.Services.Campaign.Show(id);case 3:response=_context.sent;if(response&&response.status===200){setData(response.data.data);console.log(response.data.data);}setLoading(false);_context.next=11;break;case 8:_context.prev=8;_context.t0=_context[\"catch\"](0);if(_context.t0){setLoading(false);console.log(_context.t0.response);}case 11:case\"end\":return _context.stop();}}},_callee,null,[[0,8]]);})),[id]);useEffect(function(){fetchData();},[id,fetchData]);/* handle data form */var handleSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;setUpdate(true);_context2.next=4;return Requests.Services.Campaign.Update(id,data);case 4:response=_context2.sent;if(response&&response.status===201){Toastify.Success(response.data.message);}setUpdate(false);_context2.next=12;break;case 9:_context2.prev=9;_context2.t0=_context2[\"catch\"](0);if(_context2.t0){setUpdate(false);console.log(_context2.t0.response);if(_context2.t0.response&&_context2.t0.response.data&&_context2.t0.response.data.message){Toastify.Error(_context2.t0.response.data.message);}}case 12:case\"end\":return _context2.stop();}}},_callee2,null,[[0,9]]);}));return function handleSubmit(_x){return _ref2.apply(this,arguments);};}();/* handle image update */var handleImgSubmit=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(data){var response;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;setImgLoading(true);_context3.next=4;return Requests.Services.Campaign.EditBanner(id,data);case 4:response=_context3.sent;if(response&&response.status===201){Toastify.Success(response.data.message);}setImgLoading(false);_context3.next=12;break;case 9:_context3.prev=9;_context3.t0=_context3[\"catch\"](0);if(_context3.t0){setImgLoading(false);console.log(_context3.t0.response);if(_context3.t0.response&&_context3.t0.response.data&&_context3.t0.response.data.message){Toastify.Error(_context3.t0.response.data.message);}}case 12:case\"end\":return _context3.stop();}}},_callee3,null,[[0,9]]);}));return function handleImgSubmit(_x2){return _ref3.apply(this,arguments);};}();if(isLoading)return/*#__PURE__*/_jsx(PreLoader,{});return/*#__PURE__*/_jsx(\"div\",{className:\"edit-campaign pb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-padding\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card border-0 shadow-sm\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header p-3 p-lg-4 bg-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h6\",{className:\"mb-0\",children:\"Edit campaign\"}),/*#__PURE__*/_jsx(\"small\",{className:\"text-muted\",children:/*#__PURE__*/_jsx(\"i\",{children:\"Select item/options if you want to apply unless no need to select.\"})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-auto pt-2\",children:/*#__PURE__*/_jsx(Link,{to:\"/dashboard/campaign\",type:\"button\",className:\"btn shadow-none rounded-circle\",children:/*#__PURE__*/_jsx(Icon,{icon:chevronLeft,size:22})})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body p-4\",children:/*#__PURE__*/_jsx(CampaignForm,{formType:\"edit\",data:data,loading:isUpdate,imgLoading:isImgLoading,onSubmit:function onSubmit(data){return handleSubmit(data);},onImgSubmit:function onImgSubmit(data){return handleImgSubmit(data);}})})]})})})})});};export default Edit;","map":{"version":3,"sources":["D:/previous/src/pages/campaign/Edit.js"],"names":["React","useState","useEffect","useCallback","useRef","Icon","Link","useParams","chevronLeft","Toastify","PreLoader","CampaignForm","Requests","Edit","id","data","setData","isLoading","setLoading","isUpdate","setUpdate","isImgLoading","setImgLoading","fetchData","Services","Campaign","Show","response","status","console","log","handleSubmit","Update","Success","message","Error","handleImgSubmit","EditBanner"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useCallback, useRef } from 'react'\nimport './style.scss'\nimport Icon from 'react-icons-kit'\nimport { Link, useParams } from 'react-router-dom'\nimport { chevronLeft } from 'react-icons-kit/feather'\n\nimport { Toastify } from '../../components/toastify'\nimport { PreLoader } from '../../components/loading/Index'\nimport { CampaignForm } from '../../components/form/campaign'\nimport Requests from '../../utils/Requests/Index'\n\n\n\nconst Edit = () => {\n    const { id } = useParams()\n    const [data, setData] = useState({})\n    const [isLoading, setLoading] = useState(true)\n    const [isUpdate, setUpdate] = useState(false)\n    const [isImgLoading, setImgLoading] = useState(false)\n\n    // Fetch data\n    const fetchData = useCallback(async () => {\n        try {\n            const response = await Requests.Services.Campaign.Show(id)\n            if (response && response.status === 200) {\n                setData(response.data.data)\n\n                console.log(response.data.data);\n            }\n            setLoading(false)\n        } catch (error) {\n            if (error) {\n                setLoading(false)\n                console.log(error.response);\n            }\n        }\n    }, [id])\n\n    useEffect(() => {\n        fetchData()\n    }, [id, fetchData])\n\n\n    /* handle data form */\n    const handleSubmit = async (data) => {\n        try {\n            setUpdate(true)\n            const response = await Requests.Services.Campaign.Update(id, data)\n            if (response && response.status === 201) {\n                Toastify.Success(response.data.message)\n            }\n\n            setUpdate(false)\n        } catch (error) {\n            if (error) {\n                setUpdate(false)\n                console.log(error.response)\n                if (error.response && error.response.data && error.response.data.message) {\n                    Toastify.Error(error.response.data.message)\n                }\n            }\n        }\n    }\n\n    /* handle image update */\n    const handleImgSubmit = async (data) => {\n        try {\n            setImgLoading(true)\n            const response = await Requests.Services.Campaign.EditBanner(id, data)\n            if (response && response.status === 201) {\n                Toastify.Success(response.data.message)\n            }\n\n            setImgLoading(false)\n        } catch (error) {\n            if (error) {\n                setImgLoading(false)\n                console.log(error.response)\n                if (error.response && error.response.data && error.response.data.message) {\n                    Toastify.Error(error.response.data.message)\n                }\n            }\n        }\n    }\n\n    if (isLoading) return <PreLoader />\n\n    return (\n        <div className=\"edit-campaign pb-4\">\n            <div className=\"container-fluid\">\n                <div className=\"row\">\n                    <div className=\"col-12 col-padding\">\n                        <div className=\"card border-0 shadow-sm\">\n                            <div className=\"card-header p-3 p-lg-4 bg-white\">\n                                <div className=\"d-flex\">\n                                    <div>\n                                        <h6 className=\"mb-0\">Edit campaign</h6>\n                                        <small className=\"text-muted\">\n                                            <i>Select item/options if you want to apply unless no need to select.</i>\n                                        </small>\n                                    </div>\n                                    <div className=\"ml-auto pt-2\">\n                                        <Link\n                                            to=\"/dashboard/campaign\"\n                                            type=\"button\"\n                                            className=\"btn shadow-none rounded-circle\"\n                                        >\n                                            <Icon icon={chevronLeft} size={22} />\n                                        </Link>\n                                    </div>\n                                </div>\n                            </div>\n                            <div className=\"card-body p-4\">\n                                <CampaignForm\n                                    formType=\"edit\"\n                                    data={data}\n                                    loading={isUpdate}\n                                    imgLoading={isImgLoading}\n                                    onSubmit={data => handleSubmit(data)}\n                                    onImgSubmit={data => handleImgSubmit(data)}\n                                />\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default Edit;\n"]},"metadata":{},"sourceType":"module"}