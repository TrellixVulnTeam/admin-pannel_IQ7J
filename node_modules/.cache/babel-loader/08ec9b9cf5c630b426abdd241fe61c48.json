{"ast":null,"code":"import _objectSpread from\"D:/previous/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"D:/previous/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/previous/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\previous\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useCallback,useEffect,useState}from'react';import _ from'lodash';import Icon from'react-icons-kit';import{Link}from'react-router-dom';import{useForm}from'react-hook-form';import{chevronLeft}from'react-icons-kit/feather';import{MultiSelect}from'../../components/select';import Requests from'../../utils/Requests/Index';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Create=function Create(){var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,setError=_useForm.setError,clearErrors=_useForm.clearErrors,errors=_useForm.errors;var _useState=useState(false),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setLoading=_useState2[1];var _useState3=useState({values:[],options:[]}),_useState4=_slicedToArray(_useState3,2),permissions=_useState4[0],setPermissions=_useState4[1];var _useState5=useState({headers:{Authorization:\"Bearer \"+localStorage.getItem('token')}}),_useState6=_slicedToArray(_useState5,1),header=_useState6[0];// fetch permissions\nvar fetchData=useCallback(/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var options,response,i,element;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;options=[];_context.next=4;return Requests.Role.Routes(header);case 4:response=_context.sent;if(response.data&&response.data.length){for(i=0;i<response.data.length;i++){element=response.data[i];options.push({label:_.capitalize(element.group),value:element.group});}}setPermissions(function(exPermission){return _objectSpread(_objectSpread({},exPermission),{},{options:options});});_context.next=12;break;case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);if(_context.t0)console.log(_context.t0);case 12:case\"end\":return _context.stop();}}},_callee,null,[[0,9]]);})),[header]);useEffect(function(){fetchData();},[header,fetchData]);// Handle permission\nvar handlePermission=function handlePermission(data){setPermissions(function(exPermission){return _objectSpread(_objectSpread({},exPermission),{},{values:data});});clearErrors([\"permission\"]);};// Submit Form\nvar onSubmit=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(data){var formData;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;if(permissions.values.length){_context2.next=3;break;}return _context2.abrupt(\"return\",setError(\"permission\",{type:\"manual\",message:\"Permission is required!\"}));case 3:formData=_objectSpread(_objectSpread({},data),{},{rights:permissions.values.map(function(item){return item.value;})});setLoading(true);_context2.next=7;return Requests.Role.Store(formData,header);case 7:setLoading(false);_context2.next=13;break;case 10:_context2.prev=10;_context2.t0=_context2[\"catch\"](0);if(_context2.t0)console.log(_context2.t0);case 13:case\"end\":return _context2.stop();}}},_callee2,null,[[0,10]]);}));return function onSubmit(_x){return _ref2.apply(this,arguments);};}();return/*#__PURE__*/_jsx(\"div\",{className:\"store-banner pb-4\",children:/*#__PURE__*/_jsx(\"div\",{className:\"container-fluid\",children:/*#__PURE__*/_jsx(\"div\",{className:\"row\",children:/*#__PURE__*/_jsx(\"div\",{className:\"col-12 col-padding\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card border-0 shadow-sm\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"card-header p-3 p-lg-4 bg-white\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h6\",{className:\"mb-0\",children:\"Create Role\"})}),/*#__PURE__*/_jsx(\"div\",{className:\"ml-auto\",children:/*#__PURE__*/_jsx(Link,{to:\"/dashboard/role\",type:\"button\",className:\"btn shadow-none rounded-circle\",children:/*#__PURE__*/_jsx(Icon,{icon:chevronLeft,size:22})})})]})}),/*#__PURE__*/_jsx(\"div\",{className:\"card-body p-4\",children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[errors.role&&errors.role.message?/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:errors.role&&errors.role.message}):/*#__PURE__*/_jsx(\"p\",{children:\"Role\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"role\",className:\"form-control shadow-none\",placeholder:\"Enter role title\",ref:register({required:\"Role title is required\"})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group mb-4\",children:[errors.permission&&errors.permission.message?/*#__PURE__*/_jsx(\"p\",{className:\"text-danger\",children:errors.permission&&errors.permission.message}):/*#__PURE__*/_jsx(\"p\",{children:\"Select perission\"}),/*#__PURE__*/_jsx(MultiSelect,{placeholder:\"permission\",options:permissions.options,values:function values(data){return handlePermission(data);},refs:register})]}),/*#__PURE__*/_jsx(\"div\",{className:\"text-right\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn shadow-none\",disabled:isLoading,children:isLoading?'Creating ...':'Create'})})]})})]})})})})});};export default Create;","map":{"version":3,"sources":["D:/previous/src/pages/role/Create.js"],"names":["React","useCallback","useEffect","useState","_","Icon","Link","useForm","chevronLeft","MultiSelect","Requests","Create","register","handleSubmit","setError","clearErrors","errors","isLoading","setLoading","values","options","permissions","setPermissions","headers","Authorization","localStorage","getItem","header","fetchData","Role","Routes","response","data","length","i","element","push","label","capitalize","group","value","exPermission","console","log","handlePermission","onSubmit","type","message","formData","rights","map","item","Store","role","required","permission"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useState } from 'react'\nimport _ from 'lodash'\nimport Icon from 'react-icons-kit'\nimport { Link } from 'react-router-dom'\nimport { useForm } from 'react-hook-form'\nimport { chevronLeft } from 'react-icons-kit/feather'\nimport { MultiSelect } from '../../components/select'\n\nimport Requests from '../../utils/Requests/Index'\n\nconst Create = () => {\n    const { register, handleSubmit, setError, clearErrors, errors } = useForm()\n    const [isLoading, setLoading] = useState(false)\n    const [permissions, setPermissions] = useState({ values: [], options: [] })\n    const [header] = useState({\n        headers: { Authorization: \"Bearer \" + localStorage.getItem('token') }\n    })\n\n    // fetch permissions\n    const fetchData = useCallback(async () => {\n        try {\n            let options = []\n\n            const response = await Requests.Role.Routes(header)\n            if (response.data && response.data.length) {\n                for (let i = 0; i < response.data.length; i++) {\n                    const element = response.data[i]\n                    options.push({ label: _.capitalize(element.group), value: element.group })\n                }\n            }\n\n            setPermissions(exPermission => ({ ...exPermission, options: options }))\n        } catch (error) {\n            if (error) console.log(error)\n        }\n    }, [header])\n\n    useEffect(() => {\n        fetchData()\n    }, [header, fetchData])\n\n    // Handle permission\n    const handlePermission = data => {\n        setPermissions(exPermission => ({ ...exPermission, values: data }))\n        clearErrors([\"permission\"])\n    }\n\n    // Submit Form\n    const onSubmit = async (data) => {\n        try {\n            if (!permissions.values.length) {\n                return setError(\"permission\", {\n                    type: \"manual\",\n                    message: \"Permission is required!\"\n                })\n            }\n\n            const formData = {\n                ...data,\n                rights: permissions.values.map(item => item.value)\n            }\n\n            setLoading(true)\n            await Requests.Role.Store(formData, header)\n            setLoading(false)\n        } catch (error) {\n            if (error) console.log(error)\n        }\n    }\n\n    return (\n        <div className=\"store-banner pb-4\">\n            <div className=\"container-fluid\">\n                <div className=\"row\">\n                    <div className=\"col-12 col-padding\">\n                        <div className=\"card border-0 shadow-sm\">\n                            <div className=\"card-header p-3 p-lg-4 bg-white\">\n                                <div className=\"d-flex\">\n                                    <div><h6 className=\"mb-0\">Create Role</h6></div>\n                                    <div className=\"ml-auto\">\n                                        <Link\n                                            to=\"/dashboard/role\"\n                                            type=\"button\"\n                                            className=\"btn shadow-none rounded-circle\"\n                                        >\n                                            <Icon icon={chevronLeft} size={22} />\n                                        </Link>\n                                    </div>\n                                </div>\n                            </div>\n                            <div className=\"card-body p-4\">\n                                <form onSubmit={handleSubmit(onSubmit)}>\n\n                                    {/* Role */}\n                                    <div className=\"form-group mb-4\">\n                                        {errors.role && errors.role.message ?\n                                            <p className=\"text-danger\">{errors.role && errors.role.message}</p>\n                                            : <p>Role</p>}\n\n                                        <input\n                                            type=\"text\"\n                                            name=\"role\"\n                                            className=\"form-control shadow-none\"\n                                            placeholder=\"Enter role title\"\n                                            ref={register({ required: \"Role title is required\" })}\n                                        />\n                                    </div>\n\n                                    {/* Permission */}\n                                    <div className=\"form-group mb-4\">\n                                        {errors.permission && errors.permission.message ?\n                                            <p className=\"text-danger\">{errors.permission && errors.permission.message}</p>\n                                            : <p>Select perission</p>}\n\n                                        <MultiSelect\n                                            placeholder=\"permission\"\n                                            options={permissions.options}\n                                            values={data => handlePermission(data)}\n                                            refs={register}\n                                        />\n                                    </div>\n\n                                    <div className=\"text-right\">\n                                        <button type=\"submit\" className=\"btn shadow-none\" disabled={isLoading}>\n                                            {isLoading ? 'Creating ...' : 'Create'}\n                                        </button>\n                                    </div>\n\n                                </form>\n                            </div>\n                        </div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    );\n}\n\nexport default Create;"]},"metadata":{},"sourceType":"module"}