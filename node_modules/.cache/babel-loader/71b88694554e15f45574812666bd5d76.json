{"ast":null,"code":"import _defineProperty from\"D:/previous/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"D:/previous/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"D:/previous/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/previous/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _regeneratorRuntime from\"D:\\\\previous\\\\node_modules\\\\@babel\\\\runtime\\\\regenerator\\\\index.js\";import React,{useCallback,useEffect,useState}from'react';import Icon from'react-icons-kit';import{Link,useHistory}from'react-router-dom';import{edit2,plus,trash2,x}from'react-icons-kit/feather';import{CustomButton}from'../../components/button';import{DeleteModal}from'../../components/modal/Delete';import{DataTable}from'../../components/table/Index';import{formatDateWithAMPM}from'../../utils/Helpers';import{Container}from'../../components/container';import{Card}from'../../components/card/Index';import{SingleSelect}from'../../components/select';import{useQuery}from'../../components/query/Index';import Requests from'../../utils/Requests/Index';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Index=function Index(){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),isLoading=_useState2[0],setLoading=_useState2[1];var _useState3=useState(10),_useState4=_slicedToArray(_useState3,2),limit=_useState4[0],setLimit=_useState4[1];var history=useHistory();var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),totalItems=_useState6[0],setTotalItems=_useState6[1];var queryParams=useQuery();var _useState7=useState([]),_useState8=_slicedToArray(_useState7,2),data=_useState8[0],setData=_useState8[1];var _useState9=useState(false),_useState10=_slicedToArray(_useState9,2),closeFilter=_useState10[0],setCloseFilter=_useState10[1];var _useState11=useState({value:null,show:false,loading:false}),_useState12=_slicedToArray(_useState11,2),isDelete=_useState12[0],setDelete=_useState12[1];var _useState13=useState({headers:{Authorization:\"Bearer \"+localStorage.getItem('token')}}),_useState14=_slicedToArray(_useState13,1),header=_useState14[0];// Fetch data\nvar fetchData=useCallback(/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(query){var response;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setLoading(true);_context.next=3;return Requests.Services.Shipping.MainShipping.Index(query,header);case 3:response=_context.sent;if(response){setData(response.data);setTotalItems(response.pagination?response.pagination.items:0);}setLoading(false);case 6:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref.apply(this,arguments);};}(),[header]);// handle page change\nvar handlePageChange=function handlePageChange(page){return fetchData(page);};// handle limit change\nvar handleLimitChange=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(newLimit,page){var response;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:setLoading(true);_context2.next=3;return Requests.Services.Shipping.MainShipping.Index(page,newLimit,header);case 3:response=_context2.sent;setData(response.data);setLimit(newLimit);setLoading(false);case 7:case\"end\":return _context2.stop();}}},_callee2);}));return function handleLimitChange(_x2,_x3){return _ref2.apply(this,arguments);};}();useEffect(function(){if(queryParams){var params=_objectSpread({},queryParams);params.page=queryParams.page||1;params.limit=queryParams.limit||10;var queryString=Object.keys(params).map(function(key){return\"\".concat(key,\"=\").concat(params[key]);}).join('&');fetchData(queryString);setCloseFilter(true);}},[queryParams.limit,queryParams.page,queryParams.assign_to,queryParams.discount_type,queryParams.start_from,queryParams.end_to,fetchData]);/* handle filter by URL params */var handleFilterByUrl=function handleFilterByUrl(field,value){var item=_defineProperty({},field,value);var params=_objectSpread(_objectSpread(_objectSpread({},queryParams),item),{},{page:queryParams.page||1,limit:queryParams.limit||10});var queryString=Object.keys(params).map(function(key){return\"\".concat(key,\"=\").concat(params[key]);}).join('&');history.replace(\"/dashboard/shipping?\".concat(queryString));setCloseFilter(true);};// Handle delete\nvar handleDelete=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:setDelete(_objectSpread(_objectSpread({},isDelete),{},{loading:true}));_context3.next=3;return Requests.Services.Shipping.MainShipping.Delete(isDelete.value._id,header);case 3:fetchData(1);setDelete(_objectSpread(_objectSpread({},isDelete),{},{show:false,loading:false}));case 5:case\"end\":return _context3.stop();}}},_callee3);}));return function handleDelete(){return _ref3.apply(this,arguments);};}();var columns=[{name:'Title',selector:function selector(row){return row.title||\"N/A\";},sortable:true},{name:'Assign To',selector:function selector(row){return row.assign_to||\"N/A\";},sortable:true},{name:'Type',selector:function selector(row){return row.discount_type||\"N/A\";},sortable:true},{name:'Start From',selector:function selector(row){return formatDateWithAMPM(row.start_from)||\"N/A\";},sortable:true},{name:'End To',selector:function selector(row){return formatDateWithAMPM(row.end_to)||\"N/A\";},sortable:true},{name:'Action',grow:0,minWidth:'150px',cell:function cell(row){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Link,{to:\"/dashboard/shipping/\".concat(row._id,\"/edit\"),children:/*#__PURE__*/_jsx(CustomButton,{style:{padding:\"6px 10px\"},className:\"btn-success rounded-circle border-0 mx-1\",children:/*#__PURE__*/_jsx(Icon,{icon:edit2,size:16})})}),/*#__PURE__*/_jsx(CustomButton,{style:{padding:\"6px 10px\"},className:\"btn-danger rounded-circle border-0\",onClick:function onClick(){return setDelete({value:row,show:true});},children:/*#__PURE__*/_jsx(Icon,{icon:trash2,size:16})})]});}}];return/*#__PURE__*/_jsxs(\"div\",{className:\"pb-4\",children:[/*#__PURE__*/_jsx(Container.Fluid,{children:/*#__PURE__*/_jsx(Container.Row,{children:/*#__PURE__*/_jsx(Container.Column,{className:\"col-padding\",children:/*#__PURE__*/_jsxs(Card.Simple,{className:\"border-0\",children:[/*#__PURE__*/_jsxs(Card.Header,{className:\"bg-white border-0 p-3 p-lg-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"d-flex\",children:[/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsx(\"h6\",{className:\"mb-0\",children:\"Shipping List\"})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ml-auto\",children:[/*#__PURE__*/_jsx(Link,{to:\"/dashboard/shipping/create\",children:/*#__PURE__*/_jsx(CustomButton,{className:\"btn-primary border-0 rounded-circle circle__padding\",children:/*#__PURE__*/_jsx(Icon,{icon:plus,size:22})})}),closeFilter?/*#__PURE__*/_jsx(CustomButton,{className:\"btn-danger border-0 rounded-circle circle__padding ml-1\",onClick:function onClick(){setCloseFilter(false);history.push(\"/dashboard/shipping\");},children:/*#__PURE__*/_jsx(Icon,{icon:x,size:22})}):null]})]}),/*#__PURE__*/_jsxs(Container.Row,{className:\"pt-2 px-2\",children:[/*#__PURE__*/_jsx(Container.Column,{className:\"col-sm-3 px-1 mb-2\",children:/*#__PURE__*/_jsx(SingleSelect,{placeholder:\"Assign To\",borderRadius:25,options:[{label:\"Anything\",value:\"Anything\"},{label:\"Brand\",value:\"Brand\"},{label:\"Category\",value:\"Category\"},{label:\"Sub-category\",value:\"Sub-category\"},{label:\"Leaf-category\",value:\"Leaf-category\"},{label:\"Vendor\",value:\"Vendor\"},{label:\"Product\",value:\"Product\"},{label:\"Customer\",value:\"Customer\"}],value:function value(event){return handleFilterByUrl(\"assign_to\",event.value);}})}),/*#__PURE__*/_jsx(Container.Column,{className:\"col-sm-3 px-1 mb-2\",children:/*#__PURE__*/_jsx(SingleSelect,{placeholder:\"Type\",borderRadius:25,options:[{label:\"Flat\",value:\"Flat\"},{label:\"Percentage\",value:\"Percentage\"}],value:function value(event){return handleFilterByUrl(\"discount_type\",event.value);}})}),/*#__PURE__*/_jsx(Container.Column,{className:\"col-sm-3 px-1 mb-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"form-group mb-0\",children:/*#__PURE__*/_jsx(\"input\",{type:\"date\",className:\"form-control shadow-none\",style:{borderRadius:25,fontSize:14,minHeight:42},onChange:function onChange(event){return handleFilterByUrl(\"start_from\",event.target.value);}})})}),/*#__PURE__*/_jsx(Container.Column,{className:\"col-sm-3 px-1 mb-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"form-group mb-0\",children:/*#__PURE__*/_jsx(\"input\",{type:\"date\",className:\"form-control shadow-none\",style:{borderRadius:25,fontSize:14,minHeight:42},onChange:function onChange(event){return handleFilterByUrl(\"end_to\",event.target.value);}})})})]})]}),/*#__PURE__*/_jsx(Card.Body,{className:\"p-0\",children:/*#__PURE__*/_jsx(DataTable,{fixedHeader:true,fixedHeaderScrollHeight:\"580px\",columns:columns,data:data,loading:isLoading,totalRows:totalItems,pagination:true,paginationServer:true,handlePerRowsChange:handleLimitChange,handlePageChange:handlePageChange})})]})})})}),/*#__PURE__*/_jsx(DeleteModal,{show:isDelete.show,loading:isDelete.loading,message:/*#__PURE__*/_jsx(\"h6\",{children:\"Want to delete this shipping ?\"}),onHide:function onHide(){return setDelete({value:null,show:false,loading:false});},doDelete:handleDelete})]});};export default Index;","map":{"version":3,"sources":["D:/previous/src/pages/shipping/Index.js"],"names":["React","useCallback","useEffect","useState","Icon","Link","useHistory","edit2","plus","trash2","x","CustomButton","DeleteModal","DataTable","formatDateWithAMPM","Container","Card","SingleSelect","useQuery","Requests","Index","isLoading","setLoading","limit","setLimit","history","totalItems","setTotalItems","queryParams","data","setData","closeFilter","setCloseFilter","value","show","loading","isDelete","setDelete","headers","Authorization","localStorage","getItem","header","fetchData","query","Services","Shipping","MainShipping","response","pagination","items","handlePageChange","page","handleLimitChange","newLimit","params","queryString","Object","keys","map","key","join","assign_to","discount_type","start_from","end_to","handleFilterByUrl","field","item","replace","handleDelete","Delete","_id","columns","name","selector","row","title","sortable","grow","minWidth","cell","padding","push","label","event","borderRadius","fontSize","minHeight","target"],"mappings":"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","sourcesContent":["import React, { useCallback, useEffect, useState } from 'react'\nimport Icon from 'react-icons-kit'\nimport { Link, useHistory } from 'react-router-dom'\nimport { edit2, plus, trash2, x } from 'react-icons-kit/feather'\nimport { CustomButton } from '../../components/button'\nimport { DeleteModal } from '../../components/modal/Delete'\nimport { DataTable } from '../../components/table/Index'\nimport { formatDateWithAMPM } from '../../utils/Helpers'\nimport { Container } from '../../components/container'\nimport { Card } from '../../components/card/Index'\nimport { SingleSelect } from '../../components/select'\nimport { useQuery } from '../../components/query/Index'\n\nimport Requests from '../../utils/Requests/Index'\n\nconst Index = () => {\n    const [isLoading, setLoading] = useState(true)\n    const [limit, setLimit] = useState(10)\n    const history = useHistory()\n    const [totalItems, setTotalItems] = useState(0)\n    const queryParams = useQuery()\n    const [data, setData] = useState([])\n    const [closeFilter, setCloseFilter] = useState(false)\n    const [isDelete, setDelete] = useState({ value: null, show: false, loading: false })\n    const [header] = useState({\n        headers: { Authorization: \"Bearer \" + localStorage.getItem('token') }\n    })\n\n    // Fetch data\n    const fetchData = useCallback(async (query) => {\n        setLoading(true)\n        const response = await Requests.Services.Shipping.MainShipping.Index(query, header)\n\n        if (response) {\n            setData(response.data)\n            setTotalItems(response.pagination ? response.pagination.items : 0)\n        }\n        setLoading(false)\n    }, [header])\n\n\n    // handle page change\n    const handlePageChange = page => fetchData(page)\n\n    // handle limit change\n    const handleLimitChange = async (newLimit, page) => {\n        setLoading(true)\n        const response = await Requests.Services.Shipping.MainShipping.Index(page, newLimit, header)\n\n        setData(response.data)\n        setLimit(newLimit)\n        setLoading(false)\n    }\n\n\n    useEffect(() => {\n        if (queryParams) {\n            let params = { ...queryParams }\n            params.page = queryParams.page || 1\n            params.limit = queryParams.limit || 10\n            const queryString = Object.keys(params).map(key => `${key}=${params[key]}`).join('&')\n            fetchData(queryString)\n            setCloseFilter(true)\n        }\n    }, [\n        queryParams.limit,\n        queryParams.page,\n        queryParams.assign_to,\n        queryParams.discount_type,\n        queryParams.start_from,\n        queryParams.end_to,\n        fetchData\n    ])\n\n    /* handle filter by URL params */\n    const handleFilterByUrl = (field, value) => {\n        let item = { [field]: value }\n        let params = {\n            ...queryParams,\n            ...item,\n            page: queryParams.page || 1,\n            limit: queryParams.limit || 10\n        }\n        const queryString = Object.keys(params).map(key => `${key}=${params[key]}`).join('&')\n        history.replace(`/dashboard/shipping?${queryString}`)\n        setCloseFilter(true)\n    }\n\n    // Handle delete\n    const handleDelete = async () => {\n        setDelete({ ...isDelete, loading: true })\n\n        await Requests.Services.Shipping.MainShipping.Delete(isDelete.value._id, header)\n        fetchData(1)\n        setDelete({ ...isDelete, show: false, loading: false })\n    }\n\n    const columns = [\n        {\n            name: 'Title',\n            selector: row => row.title || \"N/A\",\n            sortable: true\n        },\n        {\n            name: 'Assign To',\n            selector: row => row.assign_to || \"N/A\",\n            sortable: true\n        },\n        {\n            name: 'Type',\n            selector: row => row.discount_type || \"N/A\",\n            sortable: true\n        },\n        {\n            name: 'Start From',\n            selector: row => formatDateWithAMPM(row.start_from) || \"N/A\",\n            sortable: true\n        },\n        {\n            name: 'End To',\n            selector: row => formatDateWithAMPM(row.end_to) || \"N/A\",\n            sortable: true\n        },\n        {\n            name: 'Action',\n            grow: 0,\n            minWidth: '150px',\n            cell: row =>\n                <div>\n                    {/* <Link to={`/dashboard/shipping/${row._id}/show`}>\n                        <CustomButton\n                            style={{ padding: \"6px 10px\" }}\n                            className=\"btn-primary rounded-circle border-0\"\n                        ><Icon icon={eye} size={16} />\n                        </CustomButton>\n                    </Link> */}\n\n                    <Link to={`/dashboard/shipping/${row._id}/edit`}>\n                        <CustomButton\n                            style={{ padding: \"6px 10px\" }}\n                            className=\"btn-success rounded-circle border-0 mx-1\"\n                        ><Icon icon={edit2} size={16} />\n                        </CustomButton>\n                    </Link>\n\n                    <CustomButton\n                        style={{ padding: \"6px 10px\" }}\n                        className=\"btn-danger rounded-circle border-0\"\n                        onClick={() => setDelete({ value: row, show: true })}\n                    ><Icon icon={trash2} size={16} />\n                    </CustomButton>\n                </div>\n        }\n    ]\n\n    return (\n        <div className=\"pb-4\">\n            <Container.Fluid>\n                <Container.Row>\n                    <Container.Column className=\"col-padding\">\n                        <Card.Simple className=\"border-0\">\n                            <Card.Header className=\"bg-white border-0 p-3 p-lg-4\">\n\n                                {/* title container */}\n                                <div className=\"d-flex\">\n                                    <div><h6 className=\"mb-0\">Shipping List</h6></div>\n                                    <div className=\"ml-auto\">\n                                        <Link to=\"/dashboard/shipping/create\">\n                                            <CustomButton className=\"btn-primary border-0 rounded-circle circle__padding\">\n                                                <Icon icon={plus} size={22} />\n                                            </CustomButton>\n                                        </Link>\n\n                                        {closeFilter ?\n                                            <CustomButton\n                                                className=\"btn-danger border-0 rounded-circle circle__padding ml-1\"\n                                                onClick={() => {\n                                                    setCloseFilter(false)\n                                                    history.push(`/dashboard/shipping`)\n                                                }}\n                                            >\n                                                <Icon icon={x} size={22} />\n                                            </CustomButton>\n                                            : null\n                                        }\n                                    </div>\n                                </div>\n\n                                {/* Filter items */}\n                                <Container.Row className=\"pt-2 px-2\">\n\n                                    {/* Assign To */}\n                                    <Container.Column className=\"col-sm-3 px-1 mb-2\">\n                                        <SingleSelect\n                                            placeholder=\"Assign To\"\n                                            borderRadius={25}\n                                            options={[\n                                                { label: \"Anything\", value: \"Anything\" },\n                                                { label: \"Brand\", value: \"Brand\" },\n                                                { label: \"Category\", value: \"Category\" },\n                                                { label: \"Sub-category\", value: \"Sub-category\" },\n                                                { label: \"Leaf-category\", value: \"Leaf-category\" },\n                                                { label: \"Vendor\", value: \"Vendor\" },\n                                                { label: \"Product\", value: \"Product\" },\n                                                { label: \"Customer\", value: \"Customer\" }\n                                            ]}\n                                            value={event => handleFilterByUrl(\"assign_to\", event.value)}\n                                        />\n                                    </Container.Column>\n\n                                    {/* Type */}\n                                    <Container.Column className=\"col-sm-3 px-1 mb-2\">\n                                        <SingleSelect\n                                            placeholder=\"Type\"\n                                            borderRadius={25}\n                                            options={[\n                                                { label: \"Flat\", value: \"Flat\" },\n                                                { label: \"Percentage\", value: \"Percentage\" }\n                                            ]}\n                                            value={event => handleFilterByUrl(\"discount_type\", event.value)}\n                                        />\n                                    </Container.Column>\n\n                                    {/* Date range filter */}\n                                    <Container.Column className=\"col-sm-3 px-1 mb-2\">\n                                        <div className=\"form-group mb-0\">\n                                            <input\n                                                type=\"date\"\n                                                className=\"form-control shadow-none\"\n                                                style={{ borderRadius: 25, fontSize: 14, minHeight: 42 }}\n                                                onChange={event => handleFilterByUrl(\"start_from\", event.target.value)}\n                                            />\n                                        </div>\n                                    </Container.Column>\n                                    <Container.Column className=\"col-sm-3 px-1 mb-2\">\n                                        <div className=\"form-group mb-0\">\n                                            <input\n                                                type=\"date\"\n                                                className=\"form-control shadow-none\"\n                                                style={{ borderRadius: 25, fontSize: 14, minHeight: 42 }}\n                                                onChange={event => handleFilterByUrl(\"end_to\", event.target.value)}\n                                            />\n                                        </div>\n                                    </Container.Column>\n\n                                    {/* <Container.Column className=\"col-xl-8 px-1 mb-2\">\n                                        <RangeFilter\n                                            loading={isRangeFilterLoading}\n                                            filter={handleRangeFilter}\n                                        />\n                                    </Container.Column> */}\n                                </Container.Row>\n                            </Card.Header>\n                            <Card.Body className=\"p-0\">\n                                <DataTable\n                                    fixedHeader\n                                    fixedHeaderScrollHeight=\"580px\"\n                                    columns={columns}\n                                    data={data}\n                                    loading={isLoading}\n                                    totalRows={totalItems}\n                                    pagination={true}\n                                    paginationServer={true}\n                                    handlePerRowsChange={handleLimitChange}\n                                    handlePageChange={handlePageChange}\n                                />\n                            </Card.Body>\n                        </Card.Simple>\n                    </Container.Column>\n                </Container.Row>\n            </Container.Fluid>\n\n            {/* Delete confirmation */}\n            <DeleteModal\n                show={isDelete.show}\n                loading={isDelete.loading}\n                message={<h6>Want to delete this shipping ?</h6>}\n                onHide={() => setDelete({ value: null, show: false, loading: false })}\n                doDelete={handleDelete}\n            />\n        </div>\n    );\n}\n\nexport default Index;\n"]},"metadata":{},"sourceType":"module"}